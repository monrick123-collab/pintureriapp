(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function ob(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var uu={exports:{}},Wn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function cb(){if(Gm)return Wn;Gm=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var x in c)x!=="key"&&(d[x]=c[x])}else d=c;return c=d.ref,{$$typeof:s,type:i,key:f,ref:c!==void 0?c:null,props:d}}return Wn.Fragment=a,Wn.jsx=n,Wn.jsxs=n,Wn}var Vm;function ub(){return Vm||(Vm=1,uu.exports=cb()),uu.exports}var r=ub(),du={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function db(){if(Km)return Ae;Km=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.iterator;function j(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(w,P,ae){this.props=w,this.context=P,this.refs=E,this.updater=ae||_}C.prototype.isReactComponent={},C.prototype.setState=function(w,P){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,P,"setState")},C.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function U(){}U.prototype=C.prototype;function R(w,P,ae){this.props=w,this.context=P,this.refs=E,this.updater=ae||_}var A=R.prototype=new U;A.constructor=R,S(A,C.prototype),A.isPureReactComponent=!0;var $=Array.isArray,Y={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function T(w,P,ae,ie,se,ve){return ae=ve.ref,{$$typeof:s,type:w,key:P,ref:ae!==void 0?ae:null,props:ve}}function V(w,P){return T(w.type,P,void 0,void 0,void 0,w.props)}function q(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function re(w){var P={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ae){return P[ae]})}var me=/\/+/g;function ne(w,P){return typeof w=="object"&&w!==null&&w.key!=null?re(""+w.key):P.toString(36)}function Re(){}function Q(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Re,Re):(w.status="pending",w.then(function(P){w.status==="pending"&&(w.status="fulfilled",w.value=P)},function(P){w.status==="pending"&&(w.status="rejected",w.reason=P)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function Ee(w,P,ae,ie,se){var ve=typeof w;(ve==="undefined"||ve==="boolean")&&(w=null);var ge=!1;if(w===null)ge=!0;else switch(ve){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(w.$$typeof){case s:case a:ge=!0;break;case b:return ge=w._init,Ee(ge(w._payload),P,ae,ie,se)}}if(ge)return se=se(w),ge=ie===""?"."+ne(w,0):ie,$(se)?(ae="",ge!=null&&(ae=ge.replace(me,"$&/")+"/"),Ee(se,P,ae,"",function(pe){return pe})):se!=null&&(q(se)&&(se=V(se,ae+(se.key==null||w&&w.key===se.key?"":(""+se.key).replace(me,"$&/")+"/")+ge)),P.push(se)),1;ge=0;var X=ie===""?".":ie+":";if($(w))for(var J=0;J<w.length;J++)ie=w[J],ve=X+ne(ie,J),ge+=Ee(ie,P,ae,ve,se);else if(J=j(w),typeof J=="function")for(w=J.call(w),J=0;!(ie=w.next()).done;)ie=ie.value,ve=X+ne(ie,J++),ge+=Ee(ie,P,ae,ve,se);else if(ve==="object"){if(typeof w.then=="function")return Ee(Q(w),P,ae,ie,se);throw P=String(w),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ge}function W(w,P,ae){if(w==null)return w;var ie=[],se=0;return Ee(w,ie,"","",function(ve){return P.call(ae,ve,se++)}),ie}function ce(w){if(w._status===-1){var P=w._result;P=P(),P.then(function(ae){(w._status===0||w._status===-1)&&(w._status=1,w._result=ae)},function(ae){(w._status===0||w._status===-1)&&(w._status=2,w._result=ae)}),w._status===-1&&(w._status=0,w._result=P)}if(w._status===1)return w._result.default;throw w._result}var le=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function ye(){}return Ae.Children={map:W,forEach:function(w,P,ae){W(w,function(){P.apply(this,arguments)},ae)},count:function(w){var P=0;return W(w,function(){P++}),P},toArray:function(w){return W(w,function(P){return P})||[]},only:function(w){if(!q(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ae.Component=C,Ae.Fragment=n,Ae.Profiler=c,Ae.PureComponent=R,Ae.StrictMode=i,Ae.Suspense=m,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ae.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ae.cache=function(w){return function(){return w.apply(null,arguments)}},Ae.cloneElement=function(w,P,ae){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ie=S({},w.props),se=w.key,ve=void 0;if(P!=null)for(ge in P.ref!==void 0&&(ve=void 0),P.key!==void 0&&(se=""+P.key),P)!te.call(P,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&P.ref===void 0||(ie[ge]=P[ge]);var ge=arguments.length-2;if(ge===1)ie.children=ae;else if(1<ge){for(var X=Array(ge),J=0;J<ge;J++)X[J]=arguments[J+2];ie.children=X}return T(w.type,se,void 0,void 0,ve,ie)},Ae.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:d,_context:w},w},Ae.createElement=function(w,P,ae){var ie,se={},ve=null;if(P!=null)for(ie in P.key!==void 0&&(ve=""+P.key),P)te.call(P,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(se[ie]=P[ie]);var ge=arguments.length-2;if(ge===1)se.children=ae;else if(1<ge){for(var X=Array(ge),J=0;J<ge;J++)X[J]=arguments[J+2];se.children=X}if(w&&w.defaultProps)for(ie in ge=w.defaultProps,ge)se[ie]===void 0&&(se[ie]=ge[ie]);return T(w,ve,void 0,void 0,null,se)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(w){return{$$typeof:x,render:w}},Ae.isValidElement=q,Ae.lazy=function(w){return{$$typeof:b,_payload:{_status:-1,_result:w},_init:ce}},Ae.memo=function(w,P){return{$$typeof:p,type:w,compare:P===void 0?null:P}},Ae.startTransition=function(w){var P=Y.T,ae={};Y.T=ae;try{var ie=w(),se=Y.S;se!==null&&se(ae,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(ye,le)}catch(ve){le(ve)}finally{Y.T=P}},Ae.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ae.use=function(w){return Y.H.use(w)},Ae.useActionState=function(w,P,ae){return Y.H.useActionState(w,P,ae)},Ae.useCallback=function(w,P){return Y.H.useCallback(w,P)},Ae.useContext=function(w){return Y.H.useContext(w)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(w,P){return Y.H.useDeferredValue(w,P)},Ae.useEffect=function(w,P){return Y.H.useEffect(w,P)},Ae.useId=function(){return Y.H.useId()},Ae.useImperativeHandle=function(w,P,ae){return Y.H.useImperativeHandle(w,P,ae)},Ae.useInsertionEffect=function(w,P){return Y.H.useInsertionEffect(w,P)},Ae.useLayoutEffect=function(w,P){return Y.H.useLayoutEffect(w,P)},Ae.useMemo=function(w,P){return Y.H.useMemo(w,P)},Ae.useOptimistic=function(w,P){return Y.H.useOptimistic(w,P)},Ae.useReducer=function(w,P,ae){return Y.H.useReducer(w,P,ae)},Ae.useRef=function(w){return Y.H.useRef(w)},Ae.useState=function(w){return Y.H.useState(w)},Ae.useSyncExternalStore=function(w,P,ae){return Y.H.useSyncExternalStore(w,P,ae)},Ae.useTransition=function(){return Y.H.useTransition()},Ae.version="19.0.0",Ae}var Ym;function Qu(){return Ym||(Ym=1,du.exports=db()),du.exports}var v=Qu();const ja=ob(v);var hu={exports:{}},Zn={},fu={exports:{}},mu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function hb(){return Xm||(Xm=1,(function(s){function a(W,ce){var le=W.length;W.push(ce);e:for(;0<le;){var ye=le-1>>>1,w=W[ye];if(0<c(w,ce))W[ye]=ce,W[le]=w,le=ye;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ce=W[0],le=W.pop();if(le!==ce){W[0]=le;e:for(var ye=0,w=W.length,P=w>>>1;ye<P;){var ae=2*(ye+1)-1,ie=W[ae],se=ae+1,ve=W[se];if(0>c(ie,le))se<w&&0>c(ve,ie)?(W[ye]=ve,W[se]=le,ye=se):(W[ye]=ie,W[ae]=le,ye=ae);else if(se<w&&0>c(ve,le))W[ye]=ve,W[se]=le,ye=se;else break e}}return ce}function c(W,ce){var le=W.sortIndex-ce.sortIndex;return le!==0?le:W.id-ce.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,x=f.now();s.unstable_now=function(){return f.now()-x}}var m=[],p=[],b=1,N=null,j=3,_=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(W){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=W)i(p),ce.sortIndex=ce.expirationTime,a(m,ce);else break;ce=n(p)}}function $(W){if(E=!1,A(W),!S)if(n(m)!==null)S=!0,Q();else{var ce=n(p);ce!==null&&Ee($,ce.startTime-W)}}var Y=!1,te=-1,T=5,V=-1;function q(){return!(s.unstable_now()-V<T)}function re(){if(Y){var W=s.unstable_now();V=W;var ce=!0;try{e:{S=!1,E&&(E=!1,U(te),te=-1),_=!0;var le=j;try{t:{for(A(W),N=n(m);N!==null&&!(N.expirationTime>W&&q());){var ye=N.callback;if(typeof ye=="function"){N.callback=null,j=N.priorityLevel;var w=ye(N.expirationTime<=W);if(W=s.unstable_now(),typeof w=="function"){N.callback=w,A(W),ce=!0;break t}N===n(m)&&i(m),A(W)}else i(m);N=n(m)}if(N!==null)ce=!0;else{var P=n(p);P!==null&&Ee($,P.startTime-W),ce=!1}}break e}finally{N=null,j=le,_=!1}ce=void 0}}finally{ce?me():Y=!1}}}var me;if(typeof R=="function")me=function(){R(re)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Re=ne.port2;ne.port1.onmessage=re,me=function(){Re.postMessage(null)}}else me=function(){C(re,0)};function Q(){Y||(Y=!0,me())}function Ee(W,ce){te=C(function(){W(s.unstable_now())},ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_continueExecution=function(){S||_||(S=!0,Q())},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_getFirstCallbackNode=function(){return n(m)},s.unstable_next=function(W){switch(j){case 1:case 2:case 3:var ce=3;break;default:ce=j}var le=j;j=ce;try{return W()}finally{j=le}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(W,ce){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=j;j=W;try{return ce()}finally{j=le}},s.unstable_scheduleCallback=function(W,ce,le){var ye=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ye+le:ye):le=ye,W){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=le+w,W={id:b++,callback:ce,priorityLevel:W,startTime:le,expirationTime:w,sortIndex:-1},le>ye?(W.sortIndex=le,a(p,W),n(m)===null&&W===n(p)&&(E?(U(te),te=-1):E=!0,Ee($,le-ye))):(W.sortIndex=w,a(m,W),S||_||(S=!0,Q())),W},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(W){var ce=j;return function(){var le=j;j=ce;try{return W.apply(this,arguments)}finally{j=le}}}})(mu)),mu}var Qm;function fb(){return Qm||(Qm=1,fu.exports=hb()),fu.exports}var pu={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function mb(){if(Fm)return At;Fm=1;var s=Qu();function a(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(m,p,b){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:N==null?null:""+N,children:m,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,At.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(m,p,null,b)},At.flushSync=function(m){var p=f.T,b=i.p;try{if(f.T=null,i.p=2,m)return m()}finally{f.T=p,i.p=b,i.d.f()}},At.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},At.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},At.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,N=x(b,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:N,integrity:j,fetchPriority:_}):b==="script"&&i.d.X(m,{crossOrigin:N,integrity:j,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},At.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=x(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},At.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,N=x(b,p.crossOrigin);i.d.L(m,b,{crossOrigin:N,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},At.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=x(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},At.requestFormReset=function(m){i.d.r(m)},At.unstable_batchedUpdates=function(m,p){return m(p)},At.useFormState=function(m,p,b){return f.H.useFormState(m,p,b)},At.useFormStatus=function(){return f.H.useHostTransitionStatus()},At.version="19.0.0",At}var Jm;function pb(){if(Jm)return pu.exports;Jm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),pu.exports=mb(),pu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function xb(){if(Wm)return Zn;Wm=1;var s=fb(),a=Qu(),n=pb();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var d=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),$=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var T=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===T?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case x:return"Portal";case b:return"Profiler";case p:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _:return(e.displayName||"Context")+".Provider";case j:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch{}}return null}var q=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=Object.assign,me,ne;function Re(e){if(me===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);me=t&&t[1]||"",ne=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+e+ne}var Q=!1;function Ee(e,t){if(!e||Q)return"";Q=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(I){var z=I}Reflect.construct(e,[],K)}else{try{K.call()}catch(I){z=I}e.call(K.prototype)}}else{try{throw Error()}catch(I){z=I}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(I){if(I&&z&&typeof I.stack=="string")return[I.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),g=h[0],y=h[1];if(g&&y){var k=g.split(`
`),D=y.split(`
`);for(u=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;if(o===k.length||u===D.length)for(o=k.length-1,u=D.length-1;1<=o&&0<=u&&k[o]!==D[u];)u--;for(;1<=o&&0<=u;o--,u--)if(k[o]!==D[u]){if(o!==1||u!==1)do if(o--,u--,0>u||k[o]!==D[u]){var H=`
`+k[o].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=o&&0<=u);break}}}finally{Q=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?Re(l):""}function W(e){switch(e.tag){case 26:case 27:case 5:return Re(e.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return e=Ee(e.type,!1),e;case 11:return e=Ee(e.type.render,!1),e;case 1:return e=Ee(e.type,!0),e;default:return""}}function ce(e){try{var t="";do t+=W(e),e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function le(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function ye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(le(e)!==e)throw Error(i(188))}function P(e){var t=e.alternate;if(!t){if(t=le(e),t===null)throw Error(i(188));return t!==e?null:e}for(var l=e,o=t;;){var u=l.return;if(u===null)break;var h=u.alternate;if(h===null){if(o=u.return,o!==null){l=o;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===l)return w(u),e;if(h===o)return w(u),t;h=h.sibling}throw Error(i(188))}if(l.return!==o.return)l=u,o=h;else{for(var g=!1,y=u.child;y;){if(y===l){g=!0,l=u,o=h;break}if(y===o){g=!0,o=u,l=h;break}y=y.sibling}if(!g){for(y=h.child;y;){if(y===l){g=!0,l=h,o=u;break}if(y===o){g=!0,o=h,l=u;break}y=y.sibling}if(!g)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?e:t}function ae(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ae(e),t!==null)return t;e=e.sibling}return null}var ie=Array.isArray,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ge=[],X=-1;function J(e){return{current:e}}function pe(e){0>X||(e.current=ge[X],ge[X]=null,X--)}function be(e,t){X++,ge[X]=e.current,e.current=t}var at=J(null),Z=J(null),fe=J(null),gt=J(null);function F(e,t){switch(be(fe,t),be(Z,e),be(at,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?ym(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=ym(e),t=vm(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}pe(at),be(at,t)}function _e(){pe(at),pe(Z),pe(fe)}function bt(e){e.memoizedState!==null&&be(gt,e);var t=at.current,l=vm(t,e.type);t!==l&&(be(Z,e),be(at,l))}function Le(e){Z.current===e&&(pe(at),pe(Z)),gt.current===e&&(pe(gt),Yn._currentValue=ve)}var Ht=Object.prototype.hasOwnProperty,ys=s.unstable_scheduleCallback,Wr=s.unstable_cancelCallback,eo=s.unstable_shouldYield,to=s.unstable_requestPaint,Gt=s.unstable_now,ao=s.unstable_getCurrentPriorityLevel,B=s.unstable_ImmediatePriority,ze=s.unstable_UserBlockingPriority,_t=s.unstable_NormalPriority,bl=s.unstable_LowPriority,yl=s.unstable_IdlePriority,vl=s.log,wl=s.unstable_setDisableYieldValue,Ga=null,ht=null;function Zr(e){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ga,e,void 0,(e.current.flags&128)===128)}catch{}}function sa(e){if(typeof vl=="function"&&wl(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Ga,e)}catch{}}var kt=Math.clz32?Math.clz32:tn,en=Math.log,so=Math.LN2;function tn(e){return e>>>=0,e===0?32:31-(en(e)/so|0)|0}var Va=128,jl=4194304;function vs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nl(e,t){var l=e.pendingLanes;if(l===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes,g=e.warmLanes;e=e.finishedLanes!==0;var y=l&134217727;return y!==0?(l=y&~u,l!==0?o=vs(l):(h&=y,h!==0?o=vs(h):e||(g=y&~g,g!==0&&(o=vs(g))))):(y=l&~u,y!==0?o=vs(y):h!==0?o=vs(h):e||(g=l&~g,g!==0&&(o=vs(g)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,g=t&-t,u>=g||u===32&&(g&4194176)!==0)?t:o}function an(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fx(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ud(){var e=Va;return Va<<=1,(Va&4194176)===0&&(Va=128),e}function dd(){var e=jl;return jl<<=1,(jl&62914560)===0&&(jl=4194304),e}function ro(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function sn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jx(e,t,l,o,u,h){var g=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var y=e.entanglements,k=e.expirationTimes,D=e.hiddenUpdates;for(l=g&~l;0<l;){var H=31-kt(l),K=1<<H;y[H]=0,k[H]=-1;var z=D[H];if(z!==null)for(D[H]=null,H=0;H<z.length;H++){var I=z[H];I!==null&&(I.lane&=-536870913)}l&=~K}o!==0&&hd(e,o,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(g&~t))}function hd(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-kt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|l&4194218}function fd(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var o=31-kt(l),u=1<<o;u&t|e[o]&t&&(e[o]|=t),l&=~u}}function md(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pd(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:zm(e.type))}function Wx(e,t){var l=se.p;try{return se.p=e,t()}finally{se.p=l}}var Ka=Math.random().toString(36).slice(2),St="__reactFiber$"+Ka,Ot="__reactProps$"+Ka,Ws="__reactContainer$"+Ka,no="__reactEvents$"+Ka,Zx="__reactListeners$"+Ka,e0="__reactHandles$"+Ka,xd="__reactResources$"+Ka,rn="__reactMarker$"+Ka;function lo(e){delete e[St],delete e[Ot],delete e[no],delete e[Zx],delete e[e0]}function ws(e){var t=e[St];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Ws]||l[St]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Nm(e);e!==null;){if(l=e[St])return l;e=Nm(e)}return t}e=l,l=e.parentNode}return null}function Zs(e){if(e=e[St]||e[Ws]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function nn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function er(e){var t=e[xd];return t||(t=e[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[rn]=!0}var gd=new Set,bd={};function js(e,t){tr(e,t),tr(e+"Capture",t)}function tr(e,t){for(bd[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),t0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yd={},vd={};function a0(e){return Ht.call(vd,e)?!0:Ht.call(yd,e)?!1:t0.test(e)?vd[e]=!0:(yd[e]=!0,!1)}function _l(e,t,l){if(a0(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function kl(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function _a(e,t,l,o){if(o===null)e.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+o)}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s0(e){var t=wd(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){o=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){e._valueTracker||(e._valueTracker=s0(e))}function jd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),o="";return e&&(o=wd(e)?e.checked?"true":"false":e.value),e=o,e!==l?(t.setValue(e),!0):!1}function El(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var r0=/[\n"\\]/g;function Kt(e){return e.replace(r0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function io(e,t,l,o,u,h,g,y){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?oo(e,g,Vt(t)):l!=null?oo(e,g,Vt(l)):o!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Vt(y):e.removeAttribute("name")}function Nd(e,t,l,o,u,h,g,y){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||t!=null))return;l=l!=null?""+Vt(l):"",t=t!=null?""+Vt(t):l,y||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=y?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function oo(e,t,l){t==="number"&&El(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function ar(e,t,l,o){if(e=e.options,t){t={};for(var u=0;u<l.length;u++)t["$"+l[u]]=!0;for(l=0;l<e.length;l++)u=t.hasOwnProperty("$"+e[l].value),e[l].selected!==u&&(e[l].selected=u),u&&o&&(e[l].defaultSelected=!0)}else{for(l=""+Vt(l),t=null,u=0;u<e.length;u++){if(e[u].value===l){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function _d(e,t,l){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+Vt(l):""}function kd(e,t,l,o){if(t==null){if(o!=null){if(l!=null)throw Error(i(92));if(ie(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),t=l}l=Vt(t),e.defaultValue=l,o=e.textContent,o===l&&o!==""&&o!==null&&(e.value=o)}function sr(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var n0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sd(e,t,l){var o=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,l):typeof l!="number"||l===0||n0.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function Ed(e,t,l){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&l[u]!==o&&Sd(e,u,o)}else for(var h in t)t.hasOwnProperty(h)&&Sd(e,h,t[h])}function co(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(e){return i0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var uo=null;function ho(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rr=null,nr=null;function Ad(e){var t=Zs(e);if(t&&(e=t.stateNode)){var l=e[Ot]||null;e:switch(e=t.stateNode,t.type){case"input":if(io(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var o=l[t];if(o!==e&&o.form===e.form){var u=o[Ot]||null;if(!u)throw Error(i(90));io(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<l.length;t++)o=l[t],o.form===e.form&&jd(o)}break e;case"textarea":_d(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&ar(e,!!l.multiple,t,!1)}}}var fo=!1;function Rd(e,t,l){if(fo)return e(t,l);fo=!0;try{var o=e(t);return o}finally{if(fo=!1,(rr!==null||nr!==null)&&(di(),rr&&(t=rr,e=nr,nr=rr=null,Ad(t),e)))for(t=0;t<e.length;t++)Ad(e[t])}}function ln(e,t){var l=e.stateNode;if(l===null)return null;var o=l[Ot]||null;if(o===null)return null;l=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(i(231,t,typeof l));return l}var mo=!1;if(Na)try{var on={};Object.defineProperty(on,"passive",{get:function(){mo=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{mo=!1}var Ya=null,po=null,Rl=null;function Cd(){if(Rl)return Rl;var e,t=po,l=t.length,o,u="value"in Ya?Ya.value:Ya.textContent,h=u.length;for(e=0;e<l&&t[e]===u[e];e++);var g=l-e;for(o=1;o<=g&&t[l-o]===u[h-o];o++);return Rl=u.slice(e,1<o?1-o:void 0)}function Cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tl(){return!0}function Td(){return!1}function Dt(e){function t(l,o,u,h,g){this._reactName=l,this._targetInst=u,this.type=o,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(l=e[y],this[y]=l?l(h):h[y]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Tl:Td,this.isPropagationStopped=Td,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),t}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=Dt(Ns),cn=re({},Ns,{view:0,detail:0}),o0=Dt(cn),xo,go,un,Dl=re({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&e.type==="mousemove"?(xo=e.screenX-un.screenX,go=e.screenY-un.screenY):go=xo=0,un=e),xo)},movementY:function(e){return"movementY"in e?e.movementY:go}}),Od=Dt(Dl),c0=re({},Dl,{dataTransfer:0}),u0=Dt(c0),d0=re({},cn,{relatedTarget:0}),bo=Dt(d0),h0=re({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Dt(h0),m0=re({},Ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p0=Dt(m0),x0=re({},Ns,{data:0}),Dd=Dt(x0),g0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y0[e])?!!t[e]:!1}function yo(){return v0}var w0=re({},cn,{key:function(e){if(e.key){var t=g0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?Cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j0=Dt(w0),N0=re({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=Dt(N0),_0=re({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),k0=Dt(_0),S0=re({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),E0=Dt(S0),A0=re({},Dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=Dt(A0),C0=re({},Ns,{newState:0,oldState:0}),T0=Dt(C0),O0=[9,13,27,32],vo=Na&&"CompositionEvent"in window,dn=null;Na&&"documentMode"in document&&(dn=document.documentMode);var D0=Na&&"TextEvent"in window&&!dn,qd=Na&&(!vo||dn&&8<dn&&11>=dn),Md=" ",Ld=!1;function zd(e,t){switch(e){case"keyup":return O0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function U0(e,t){switch(e){case"compositionend":return Bd(t);case"keypress":return t.which!==32?null:(Ld=!0,Md);case"textInput":return e=t.data,e===Md&&Ld?null:e;default:return null}}function q0(e,t){if(lr)return e==="compositionend"||!vo&&zd(e,t)?(e=Cd(),Rl=po=Ya=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qd&&t.locale!=="ko"?null:t.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!M0[e.type]:t==="textarea"}function Pd(e,t,l,o){rr?nr?nr.push(o):nr=[o]:rr=o,t=xi(t,"onChange"),0<t.length&&(l=new Ol("onChange","change",null,l,o),e.push({event:l,listeners:t}))}var hn=null,fn=null;function L0(e){mm(e,0)}function Ul(e){var t=nn(e);if(jd(t))return e}function Id(e,t){if(e==="change")return t}var Hd=!1;if(Na){var wo;if(Na){var jo="oninput"in document;if(!jo){var Gd=document.createElement("div");Gd.setAttribute("oninput","return;"),jo=typeof Gd.oninput=="function"}wo=jo}else wo=!1;Hd=wo&&(!document.documentMode||9<document.documentMode)}function Vd(){hn&&(hn.detachEvent("onpropertychange",Kd),fn=hn=null)}function Kd(e){if(e.propertyName==="value"&&Ul(fn)){var t=[];Pd(t,fn,e,ho(e)),Rd(L0,t)}}function z0(e,t,l){e==="focusin"?(Vd(),hn=t,fn=l,hn.attachEvent("onpropertychange",Kd)):e==="focusout"&&Vd()}function B0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ul(fn)}function $0(e,t){if(e==="click")return Ul(t)}function P0(e,t){if(e==="input"||e==="change")return Ul(t)}function I0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:I0;function mn(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),o=Object.keys(t);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var u=l[o];if(!Ht.call(t,u)||!qt(e[u],t[u]))return!1}return!0}function Yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xd(e,t){var l=Yd(e);e=0;for(var o;l;){if(l.nodeType===3){if(o=e+l.textContent.length,e<=t&&o>=t)return{node:l,offset:t-e};e=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yd(l)}}function Qd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=El(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=El(e.document)}return t}function No(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function H0(e,t){var l=Fd(t);t=e.focusedElem;var o=e.selectionRange;if(l!==t&&t&&t.ownerDocument&&Qd(t.ownerDocument.documentElement,t)){if(o!==null&&No(t)){if(e=o.start,l=o.end,l===void 0&&(l=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(l,t.value.length);else if(l=(e=t.ownerDocument||document)&&e.defaultView||window,l.getSelection){l=l.getSelection();var u=t.textContent.length,h=Math.min(o.start,u);o=o.end===void 0?h:Math.min(o.end,u),!l.extend&&h>o&&(u=o,o=h,h=u),u=Xd(t,h);var g=Xd(t,o);u&&g&&(l.rangeCount!==1||l.anchorNode!==u.node||l.anchorOffset!==u.offset||l.focusNode!==g.node||l.focusOffset!==g.offset)&&(e=e.createRange(),e.setStart(u.node,u.offset),l.removeAllRanges(),h>o?(l.addRange(e),l.extend(g.node,g.offset)):(e.setEnd(g.node,g.offset),l.addRange(e)))}}for(e=[],l=t;l=l.parentNode;)l.nodeType===1&&e.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)l=e[t],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var G0=Na&&"documentMode"in document&&11>=document.documentMode,ir=null,_o=null,pn=null,ko=!1;function Jd(e,t,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ko||ir==null||ir!==El(o)||(o=ir,"selectionStart"in o&&No(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),pn&&mn(pn,o)||(pn=o,o=xi(_o,"onSelect"),0<o.length&&(t=new Ol("onSelect","select",null,t,l),e.push({event:t,listeners:o}),t.target=ir)))}function _s(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var or={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},So={},Wd={};Na&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function ks(e){if(So[e])return So[e];if(!or[e])return e;var t=or[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Wd)return So[e]=t[l];return e}var Zd=ks("animationend"),eh=ks("animationiteration"),th=ks("animationstart"),V0=ks("transitionrun"),K0=ks("transitionstart"),Y0=ks("transitioncancel"),ah=ks("transitionend"),sh=new Map,rh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ra(e,t){sh.set(e,t),js(t,[e])}var Yt=[],cr=0,Eo=0;function ql(){for(var e=cr,t=Eo=cr=0;t<e;){var l=Yt[t];Yt[t++]=null;var o=Yt[t];Yt[t++]=null;var u=Yt[t];Yt[t++]=null;var h=Yt[t];if(Yt[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}h!==0&&nh(l,u,h)}}function Ml(e,t,l,o){Yt[cr++]=e,Yt[cr++]=t,Yt[cr++]=l,Yt[cr++]=o,Eo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ao(e,t,l,o){return Ml(e,t,l,o),Ll(e)}function Xa(e,t){return Ml(e,null,null,t),Ll(e)}function nh(e,t,l){e.lanes|=l;var o=e.alternate;o!==null&&(o.lanes|=l);for(var u=!1,h=e.return;h!==null;)h.childLanes|=l,o=h.alternate,o!==null&&(o.childLanes|=l),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;u&&t!==null&&e.tag===3&&(h=e.stateNode,u=31-kt(l),h=h.hiddenUpdates,e=h[u],e===null?h[u]=[t]:e.push(t),t.lane=l|536870912)}function Ll(e){if(50<$n)throw $n=0,Uc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ur={},lh=new WeakMap;function Xt(e,t){if(typeof e=="object"&&e!==null){var l=lh.get(e);return l!==void 0?l:(t={value:e,source:t,stack:ce(t)},lh.set(e,t),t)}return{value:e,source:t,stack:ce(t)}}var dr=[],hr=0,zl=null,Bl=0,Qt=[],Ft=0,Ss=null,ka=1,Sa="";function Es(e,t){dr[hr++]=Bl,dr[hr++]=zl,zl=e,Bl=t}function ih(e,t,l){Qt[Ft++]=ka,Qt[Ft++]=Sa,Qt[Ft++]=Ss,Ss=e;var o=ka;e=Sa;var u=32-kt(o)-1;o&=~(1<<u),l+=1;var h=32-kt(t)+u;if(30<h){var g=u-u%5;h=(o&(1<<g)-1).toString(32),o>>=g,u-=g,ka=1<<32-kt(t)+u|l<<u|o,Sa=h+e}else ka=1<<h|l<<u|o,Sa=e}function Ro(e){e.return!==null&&(Es(e,1),ih(e,1,0))}function Co(e){for(;e===zl;)zl=dr[--hr],dr[hr]=null,Bl=dr[--hr],dr[hr]=null;for(;e===Ss;)Ss=Qt[--Ft],Qt[Ft]=null,Sa=Qt[--Ft],Qt[Ft]=null,ka=Qt[--Ft],Qt[Ft]=null}var Ct=null,yt=null,qe=!1,na=null,ga=!1,To=Error(i(519));function As(e){var t=Error(i(418,""));throw bn(Xt(t,e)),To}function oh(e){var t=e.stateNode,l=e.type,o=e.memoizedProps;switch(t[St]=e,t[Ot]=o,l){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(l=0;l<In.length;l++)De(In[l],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),Nd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Sl(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),kd(t,o.value,o.defaultValue,o.children),Sl(t)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||o.suppressHydrationWarning===!0||bm(t.textContent,l)?(o.popover!=null&&(De("beforetoggle",t),De("toggle",t)),o.onScroll!=null&&De("scroll",t),o.onScrollEnd!=null&&De("scrollend",t),o.onClick!=null&&(t.onclick=gi),t=!0):t=!1,t||As(e)}function ch(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 3:case 27:ga=!0;return;case 5:case 13:ga=!1;return;default:Ct=Ct.return}}function xn(e){if(e!==Ct)return!1;if(!qe)return ch(e),qe=!0,!1;var t=!1,l;if((l=e.tag!==3&&e.tag!==27)&&((l=e.tag===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Jc(e.type,e.memoizedProps)),l=!l),l&&(t=!0),t&&yt&&As(e),ch(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(t===0){yt=ia(e.nextSibling);break e}t--}else l!=="$"&&l!=="$!"&&l!=="$?"||t++;e=e.nextSibling}yt=null}}else yt=Ct?ia(e.stateNode.nextSibling):null;return!0}function gn(){yt=Ct=null,qe=!1}function bn(e){na===null?na=[e]:na.push(e)}var yn=Error(i(460)),uh=Error(i(474)),Oo={then:function(){}};function dh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $l(){}function hh(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then($l,$l),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===yn?Error(i(483)):e;default:if(typeof t.status=="string")t.then($l,$l);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===yn?Error(i(483)):e}throw vn=t,yn}}var vn=null;function fh(){if(vn===null)throw Error(i(459));var e=vn;return vn=null,e}var fr=null,wn=0;function Pl(e){var t=wn;return wn+=1,fr===null&&(fr=[]),hh(fr,e,t)}function jn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Il(e,t){throw t.$$typeof===d?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function mh(e){var t=e._init;return t(e._payload)}function ph(e){function t(M,O){if(e){var L=M.deletions;L===null?(M.deletions=[O],M.flags|=16):L.push(O)}}function l(M,O){if(!e)return null;for(;O!==null;)t(M,O),O=O.sibling;return null}function o(M){for(var O=new Map;M!==null;)M.key!==null?O.set(M.key,M):O.set(M.index,M),M=M.sibling;return O}function u(M,O){return M=ls(M,O),M.index=0,M.sibling=null,M}function h(M,O,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<O?(M.flags|=33554434,O):L):(M.flags|=33554434,O)):(M.flags|=1048576,O)}function g(M){return e&&M.alternate===null&&(M.flags|=33554434),M}function y(M,O,L,G){return O===null||O.tag!==6?(O=Sc(L,M.mode,G),O.return=M,O):(O=u(O,L),O.return=M,O)}function k(M,O,L,G){var oe=L.type;return oe===m?H(M,O,L.props.children,G,L.key):O!==null&&(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===R&&mh(oe)===O.type)?(O=u(O,L.props),jn(O,L),O.return=M,O):(O=li(L.type,L.key,L.props,null,M.mode,G),jn(O,L),O.return=M,O)}function D(M,O,L,G){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=Ec(L,M.mode,G),O.return=M,O):(O=u(O,L.children||[]),O.return=M,O)}function H(M,O,L,G,oe){return O===null||O.tag!==7?(O=zs(L,M.mode,G,oe),O.return=M,O):(O=u(O,L),O.return=M,O)}function K(M,O,L){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Sc(""+O,M.mode,L),O.return=M,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case f:return L=li(O.type,O.key,O.props,null,M.mode,L),jn(L,O),L.return=M,L;case x:return O=Ec(O,M.mode,L),O.return=M,O;case R:var G=O._init;return O=G(O._payload),K(M,O,L)}if(ie(O)||te(O))return O=zs(O,M.mode,L,null),O.return=M,O;if(typeof O.then=="function")return K(M,Pl(O),L);if(O.$$typeof===_)return K(M,si(M,O),L);Il(M,O)}return null}function z(M,O,L,G){var oe=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return oe!==null?null:y(M,O,""+L,G);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case f:return L.key===oe?k(M,O,L,G):null;case x:return L.key===oe?D(M,O,L,G):null;case R:return oe=L._init,L=oe(L._payload),z(M,O,L,G)}if(ie(L)||te(L))return oe!==null?null:H(M,O,L,G,null);if(typeof L.then=="function")return z(M,O,Pl(L),G);if(L.$$typeof===_)return z(M,O,si(M,L),G);Il(M,L)}return null}function I(M,O,L,G,oe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return M=M.get(L)||null,y(O,M,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case f:return M=M.get(G.key===null?L:G.key)||null,k(O,M,G,oe);case x:return M=M.get(G.key===null?L:G.key)||null,D(O,M,G,oe);case R:var Te=G._init;return G=Te(G._payload),I(M,O,L,G,oe)}if(ie(G)||te(G))return M=M.get(L)||null,H(O,M,G,oe,null);if(typeof G.then=="function")return I(M,O,L,Pl(G),oe);if(G.$$typeof===_)return I(M,O,L,si(O,G),oe);Il(O,G)}return null}function ue(M,O,L,G){for(var oe=null,Te=null,he=O,we=O=0,xt=null;he!==null&&we<L.length;we++){he.index>we?(xt=he,he=null):xt=he.sibling;var Me=z(M,he,L[we],G);if(Me===null){he===null&&(he=xt);break}e&&he&&Me.alternate===null&&t(M,he),O=h(Me,O,we),Te===null?oe=Me:Te.sibling=Me,Te=Me,he=xt}if(we===L.length)return l(M,he),qe&&Es(M,we),oe;if(he===null){for(;we<L.length;we++)he=K(M,L[we],G),he!==null&&(O=h(he,O,we),Te===null?oe=he:Te.sibling=he,Te=he);return qe&&Es(M,we),oe}for(he=o(he);we<L.length;we++)xt=I(he,M,we,L[we],G),xt!==null&&(e&&xt.alternate!==null&&he.delete(xt.key===null?we:xt.key),O=h(xt,O,we),Te===null?oe=xt:Te.sibling=xt,Te=xt);return e&&he.forEach(function(fs){return t(M,fs)}),qe&&Es(M,we),oe}function Se(M,O,L,G){if(L==null)throw Error(i(151));for(var oe=null,Te=null,he=O,we=O=0,xt=null,Me=L.next();he!==null&&!Me.done;we++,Me=L.next()){he.index>we?(xt=he,he=null):xt=he.sibling;var fs=z(M,he,Me.value,G);if(fs===null){he===null&&(he=xt);break}e&&he&&fs.alternate===null&&t(M,he),O=h(fs,O,we),Te===null?oe=fs:Te.sibling=fs,Te=fs,he=xt}if(Me.done)return l(M,he),qe&&Es(M,we),oe;if(he===null){for(;!Me.done;we++,Me=L.next())Me=K(M,Me.value,G),Me!==null&&(O=h(Me,O,we),Te===null?oe=Me:Te.sibling=Me,Te=Me);return qe&&Es(M,we),oe}for(he=o(he);!Me.done;we++,Me=L.next())Me=I(he,M,we,Me.value,G),Me!==null&&(e&&Me.alternate!==null&&he.delete(Me.key===null?we:Me.key),O=h(Me,O,we),Te===null?oe=Me:Te.sibling=Me,Te=Me);return e&&he.forEach(function(ib){return t(M,ib)}),qe&&Es(M,we),oe}function Ze(M,O,L,G){if(typeof L=="object"&&L!==null&&L.type===m&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case f:e:{for(var oe=L.key;O!==null;){if(O.key===oe){if(oe=L.type,oe===m){if(O.tag===7){l(M,O.sibling),G=u(O,L.props.children),G.return=M,M=G;break e}}else if(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===R&&mh(oe)===O.type){l(M,O.sibling),G=u(O,L.props),jn(G,L),G.return=M,M=G;break e}l(M,O);break}else t(M,O);O=O.sibling}L.type===m?(G=zs(L.props.children,M.mode,G,L.key),G.return=M,M=G):(G=li(L.type,L.key,L.props,null,M.mode,G),jn(G,L),G.return=M,M=G)}return g(M);case x:e:{for(oe=L.key;O!==null;){if(O.key===oe)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){l(M,O.sibling),G=u(O,L.children||[]),G.return=M,M=G;break e}else{l(M,O);break}else t(M,O);O=O.sibling}G=Ec(L,M.mode,G),G.return=M,M=G}return g(M);case R:return oe=L._init,L=oe(L._payload),Ze(M,O,L,G)}if(ie(L))return ue(M,O,L,G);if(te(L)){if(oe=te(L),typeof oe!="function")throw Error(i(150));return L=oe.call(L),Se(M,O,L,G)}if(typeof L.then=="function")return Ze(M,O,Pl(L),G);if(L.$$typeof===_)return Ze(M,O,si(M,L),G);Il(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,O!==null&&O.tag===6?(l(M,O.sibling),G=u(O,L),G.return=M,M=G):(l(M,O),G=Sc(L,M.mode,G),G.return=M,M=G),g(M)):l(M,O)}return function(M,O,L,G){try{wn=0;var oe=Ze(M,O,L,G);return fr=null,oe}catch(he){if(he===yn)throw he;var Te=ea(29,he,null,M.mode);return Te.lanes=G,Te.return=M,Te}finally{}}}var Rs=ph(!0),xh=ph(!1),mr=J(null),Hl=J(0);function gh(e,t){e=La,be(Hl,e),be(mr,t),La=e|t.baseLanes}function Do(){be(Hl,La),be(mr,mr.current)}function Uo(){La=Hl.current,pe(mr),pe(Hl)}var Jt=J(null),ba=null;function Qa(e){var t=e.alternate;be(ot,ot.current&1),be(Jt,e),ba===null&&(t===null||mr.current!==null||t.memoizedState!==null)&&(ba=e)}function bh(e){if(e.tag===22){if(be(ot,ot.current),be(Jt,e),ba===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ba=e)}}else Fa()}function Fa(){be(ot,ot.current),be(Jt,Jt.current)}function Ea(e){pe(Jt),ba===e&&(ba=null),pe(ot)}var ot=J(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var X0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},Q0=s.unstable_scheduleCallback,F0=s.unstable_NormalPriority,ct={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qo(){return{controller:new X0,data:new Map,refCount:0}}function Nn(e){e.refCount--,e.refCount===0&&Q0(F0,function(){e.controller.abort()})}var _n=null,Mo=0,pr=0,xr=null;function J0(e,t){if(_n===null){var l=_n=[];Mo=0,pr=Ic(),xr={status:"pending",value:void 0,then:function(o){l.push(o)}}}return Mo++,t.then(yh,yh),t}function yh(){if(--Mo===0&&_n!==null){xr!==null&&(xr.status="fulfilled");var e=_n;_n=null,pr=0,xr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function W0(e,t){var l=[],o={status:"pending",value:null,reason:null,then:function(u){l.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<l.length;u++)(0,l[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<l.length;u++)(0,l[u])(void 0)}),o}var vh=q.S;q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&J0(e,t),vh!==null&&vh(e,t)};var Cs=J(null);function Lo(){var e=Cs.current;return e!==null?e:Ie.pooledCache}function Vl(e,t){t===null?be(Cs,Cs.current):be(Cs,t.pool)}function wh(){var e=Lo();return e===null?null:{parent:ct._currentValue,pool:e}}var Ja=0,Ce=null,Be=null,rt=null,Kl=!1,gr=!1,Ts=!1,Yl=0,kn=0,br=null,Z0=0;function st(){throw Error(i(321))}function zo(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!qt(e[l],t[l]))return!1;return!0}function Bo(e,t,l,o,u,h){return Ja=h,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?Os:Wa,Ts=!1,h=l(o,u),Ts=!1,gr&&(h=Nh(t,l,o,u)),jh(e),h}function jh(e){q.H=ya;var t=Be!==null&&Be.next!==null;if(Ja=0,rt=Be=Ce=null,Kl=!1,kn=0,br=null,t)throw Error(i(300));e===null||mt||(e=e.dependencies,e!==null&&ai(e)&&(mt=!0))}function Nh(e,t,l,o){Ce=e;var u=0;do{if(gr&&(br=null),kn=0,gr=!1,25<=u)throw Error(i(301));if(u+=1,rt=Be=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}q.H=Ds,h=t(l,o)}while(gr);return h}function eg(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Sn(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(Ce.flags|=1024),t}function $o(){var e=Yl!==0;return Yl=0,e}function Po(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Io(e){if(Kl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Kl=!1}Ja=0,rt=Be=Ce=null,gr=!1,kn=Yl=0,br=null}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ce.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if(Be===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=rt===null?Ce.memoizedState:rt.next;if(t!==null)rt=t,Be=e;else{if(e===null)throw Ce.alternate===null?Error(i(467)):Error(i(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},rt===null?Ce.memoizedState=rt=e:rt=rt.next=e}return rt}var Xl;Xl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Sn(e){var t=kn;return kn+=1,br===null&&(br=[]),e=hh(br,e,t),t=Ce,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Os:Wa),e}function Ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sn(e);if(e.$$typeof===_)return Et(e)}throw Error(i(438,String(e)))}function Ho(e){var t=null,l=Ce.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var o=Ce.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Xl(),Ce.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),o=0;o<e;o++)l[o]=$;return t.index++,l}function Aa(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=nt();return Go(t,Be,e)}function Go(e,t,l){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var u=e.baseQueue,h=o.pending;if(h!==null){if(u!==null){var g=u.next;u.next=h.next,h.next=g}t.baseQueue=u=h,o.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{t=u.next;var y=g=null,k=null,D=t,H=!1;do{var K=D.lane&-536870913;if(K!==D.lane?(Ue&K)===K:(Ja&K)===K){var z=D.revertLane;if(z===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),K===pr&&(H=!0);else if((Ja&z)===z){D=D.next,z===pr&&(H=!0);continue}else K={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},k===null?(y=k=K,g=h):k=k.next=K,Ce.lanes|=z,is|=z;K=D.action,Ts&&l(h,K),h=D.hasEagerState?D.eagerState:l(h,K)}else z={lane:K,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},k===null?(y=k=z,g=h):k=k.next=z,Ce.lanes|=K,is|=K;D=D.next}while(D!==null&&D!==t);if(k===null?g=h:k.next=y,!qt(h,e.memoizedState)&&(mt=!0,H&&(l=xr,l!==null)))throw l;e.memoizedState=h,e.baseState=g,e.baseQueue=k,o.lastRenderedState=h}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Vo(e){var t=nt(),l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=e;var o=l.dispatch,u=l.pending,h=t.memoizedState;if(u!==null){l.pending=null;var g=u=u.next;do h=e(h,g.action),g=g.next;while(g!==u);qt(h,t.memoizedState)||(mt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),l.lastRenderedState=h}return[h,o]}function _h(e,t,l){var o=Ce,u=nt(),h=qe;if(h){if(l===void 0)throw Error(i(407));l=l()}else l=t();var g=!qt((Be||u).memoizedState,l);if(g&&(u.memoizedState=l,mt=!0),u=u.queue,Xo(Eh.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,yr(9,Sh.bind(null,o,u,l,t),{destroy:void 0},null),Ie===null)throw Error(i(349));h||(Ja&60)!==0||kh(o,t,l)}return l}function kh(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Ce.updateQueue,t===null?(t=Xl(),Ce.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Sh(e,t,l,o){t.value=l,t.getSnapshot=o,Ah(t)&&Rh(e)}function Eh(e,t,l){return l(function(){Ah(t)&&Rh(e)})}function Ah(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!qt(e,l)}catch{return!0}}function Rh(e){var t=Xa(e,2);t!==null&&Tt(t,e,2)}function Ko(e){var t=Ut();if(typeof e=="function"){var l=e;if(e=l(),Ts){sa(!0);try{l()}finally{sa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t}function Ch(e,t,l,o){return e.baseState=l,Go(e,Be,typeof o=="function"?o:Aa)}function tg(e,t,l,o,u){if(Zl(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};q.T!==null?l(!0):h.isTransition=!1,o(h),l=t.pending,l===null?(h.next=t.pending=h,Th(t,h)):(h.next=l.next,t.pending=l.next=h)}}function Th(e,t){var l=t.action,o=t.payload,u=e.state;if(t.isTransition){var h=q.T,g={};q.T=g;try{var y=l(u,o),k=q.S;k!==null&&k(g,y),Oh(e,t,y)}catch(D){Yo(e,t,D)}finally{q.T=h}}else try{h=l(u,o),Oh(e,t,h)}catch(D){Yo(e,t,D)}}function Oh(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){Dh(e,t,o)},function(o){return Yo(e,t,o)}):Dh(e,t,l)}function Dh(e,t,l){t.status="fulfilled",t.value=l,Uh(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Th(e,l)))}function Yo(e,t,l){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=l,Uh(t),t=t.next;while(t!==o)}e.action=null}function Uh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qh(e,t){return t}function Mh(e,t){if(qe){var l=Ie.formState;if(l!==null){e:{var o=Ce;if(qe){if(yt){t:{for(var u=yt,h=ga;u.nodeType!==8;){if(!h){u=null;break t}if(u=ia(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){yt=ia(u.nextSibling),o=u.data==="F!";break e}}As(o)}o=!1}o&&(t=l[0])}}return l=Ut(),l.memoizedState=l.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:t},l.queue=o,l=ef.bind(null,Ce,o),o.dispatch=l,o=Ko(!1),h=Zo.bind(null,Ce,!1,o.queue),o=Ut(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,l=tg.bind(null,Ce,u,h,l),u.dispatch=l,o.memoizedState=e,[t,l,!1]}function Lh(e){var t=nt();return zh(t,Be,e)}function zh(e,t,l){t=Go(e,t,qh)[0],e=Fl(Aa)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Sn(t):t;var o=nt(),u=o.queue,h=u.dispatch;return l!==o.memoizedState&&(Ce.flags|=2048,yr(9,ag.bind(null,u,l),{destroy:void 0},null)),[t,h,e]}function ag(e,t){e.action=t}function Bh(e){var t=nt(),l=Be;if(l!==null)return zh(t,l,e);nt(),t=t.memoizedState,l=nt();var o=l.queue.dispatch;return l.memoizedState=e,[t,o,!1]}function yr(e,t,l,o){return e={tag:e,create:t,inst:l,deps:o,next:null},t=Ce.updateQueue,t===null&&(t=Xl(),Ce.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(o=l.next,l.next=e,e.next=o,t.lastEffect=e),e}function $h(){return nt().memoizedState}function Jl(e,t,l,o){var u=Ut();Ce.flags|=e,u.memoizedState=yr(1|t,l,{destroy:void 0},o===void 0?null:o)}function Wl(e,t,l,o){var u=nt();o=o===void 0?null:o;var h=u.memoizedState.inst;Be!==null&&o!==null&&zo(o,Be.memoizedState.deps)?u.memoizedState=yr(t,l,h,o):(Ce.flags|=e,u.memoizedState=yr(1|t,l,h,o))}function Ph(e,t){Jl(8390656,8,e,t)}function Xo(e,t){Wl(2048,8,e,t)}function Ih(e,t){return Wl(4,2,e,t)}function Hh(e,t){return Wl(4,4,e,t)}function Gh(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vh(e,t,l){l=l!=null?l.concat([e]):null,Wl(4,4,Gh.bind(null,t,e),l)}function Qo(){}function Kh(e,t){var l=nt();t=t===void 0?null:t;var o=l.memoizedState;return t!==null&&zo(t,o[1])?o[0]:(l.memoizedState=[e,t],e)}function Yh(e,t){var l=nt();t=t===void 0?null:t;var o=l.memoizedState;if(t!==null&&zo(t,o[1]))return o[0];if(o=e(),Ts){sa(!0);try{e()}finally{sa(!1)}}return l.memoizedState=[o,t],o}function Fo(e,t,l){return l===void 0||(Ja&1073741824)!==0?e.memoizedState=t:(e.memoizedState=l,e=Ff(),Ce.lanes|=e,is|=e,l)}function Xh(e,t,l,o){return qt(l,t)?l:mr.current!==null?(e=Fo(e,l,o),qt(e,t)||(mt=!0),e):(Ja&42)===0?(mt=!0,e.memoizedState=l):(e=Ff(),Ce.lanes|=e,is|=e,t)}function Qh(e,t,l,o,u){var h=se.p;se.p=h!==0&&8>h?h:8;var g=q.T,y={};q.T=y,Zo(e,!1,t,l);try{var k=u(),D=q.S;if(D!==null&&D(y,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var H=W0(k,o);En(e,t,H,Bt(e))}else En(e,t,o,Bt(e))}catch(K){En(e,t,{then:function(){},status:"rejected",reason:K},Bt())}finally{se.p=h,q.T=g}}function sg(){}function Jo(e,t,l,o){if(e.tag!==5)throw Error(i(476));var u=Fh(e).queue;Qh(e,u,t,ve,l===null?sg:function(){return Jh(e),l(o)})}function Fh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:ve},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Jh(e){var t=Fh(e).next.queue;En(e,t,{},Bt())}function Wo(){return Et(Yn)}function Wh(){return nt().memoizedState}function Zh(){return nt().memoizedState}function rg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Bt();e=ts(l);var o=as(t,e,l);o!==null&&(Tt(o,t,l),Cn(o,t,l)),t={cache:qo()},e.payload=t;return}t=t.return}}function ng(e,t,l){var o=Bt();l={lane:o,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Zl(e)?tf(t,l):(l=Ao(e,t,l,o),l!==null&&(Tt(l,e,o),af(l,t,o)))}function ef(e,t,l){var o=Bt();En(e,t,l,o)}function En(e,t,l,o){var u={lane:o,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))tf(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,y=h(g,l);if(u.hasEagerState=!0,u.eagerState=y,qt(y,g))return Ml(e,t,u,0),Ie===null&&ql(),!1}catch{}finally{}if(l=Ao(e,t,u,o),l!==null)return Tt(l,e,o),af(l,t,o),!0}return!1}function Zo(e,t,l,o){if(o={lane:2,revertLane:Ic(),action:o,hasEagerState:!1,eagerState:null,next:null},Zl(e)){if(t)throw Error(i(479))}else t=Ao(e,l,o,2),t!==null&&Tt(t,e,2)}function Zl(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function tf(e,t){gr=Kl=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function af(e,t,l){if((l&4194176)!==0){var o=t.lanes;o&=e.pendingLanes,l|=o,t.lanes=l,fd(e,l)}}var ya={readContext:Et,use:Ql,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st};ya.useCacheRefresh=st,ya.useMemoCache=st,ya.useHostTransitionStatus=st,ya.useFormState=st,ya.useActionState=st,ya.useOptimistic=st;var Os={readContext:Et,use:Ql,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:Ph,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Jl(4194308,4,Gh.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Jl(4194308,4,e,t)},useInsertionEffect:function(e,t){Jl(4,2,e,t)},useMemo:function(e,t){var l=Ut();t=t===void 0?null:t;var o=e();if(Ts){sa(!0);try{e()}finally{sa(!1)}}return l.memoizedState=[o,t],o},useReducer:function(e,t,l){var o=Ut();if(l!==void 0){var u=l(t);if(Ts){sa(!0);try{l(t)}finally{sa(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=ng.bind(null,Ce,e),[o.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:function(e){e=Ko(e);var t=e.queue,l=ef.bind(null,Ce,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Qo,useDeferredValue:function(e,t){var l=Ut();return Fo(l,e,t)},useTransition:function(){var e=Ko(!1);return e=Qh.bind(null,Ce,e.queue,!0,!1),Ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var o=Ce,u=Ut();if(qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=t(),Ie===null)throw Error(i(349));(Ue&60)!==0||kh(o,t,l)}u.memoizedState=l;var h={value:l,getSnapshot:t};return u.queue=h,Ph(Eh.bind(null,o,h,e),[e]),o.flags|=2048,yr(9,Sh.bind(null,o,h,l,t),{destroy:void 0},null),l},useId:function(){var e=Ut(),t=Ie.identifierPrefix;if(qe){var l=Sa,o=ka;l=(o&~(1<<32-kt(o)-1)).toString(32)+l,t=":"+t+"R"+l,l=Yl++,0<l&&(t+="H"+l.toString(32)),t+=":"}else l=Z0++,t=":"+t+"r"+l.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Ut().memoizedState=rg.bind(null,Ce)}};Os.useMemoCache=Ho,Os.useHostTransitionStatus=Wo,Os.useFormState=Mh,Os.useActionState=Mh,Os.useOptimistic=function(e){var t=Ut();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Zo.bind(null,Ce,!0,l),l.dispatch=t,[e,t]};var Wa={readContext:Et,use:Ql,useCallback:Kh,useContext:Et,useEffect:Xo,useImperativeHandle:Vh,useInsertionEffect:Ih,useLayoutEffect:Hh,useMemo:Yh,useReducer:Fl,useRef:$h,useState:function(){return Fl(Aa)},useDebugValue:Qo,useDeferredValue:function(e,t){var l=nt();return Xh(l,Be.memoizedState,e,t)},useTransition:function(){var e=Fl(Aa)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Sn(e),t]},useSyncExternalStore:_h,useId:Wh};Wa.useCacheRefresh=Zh,Wa.useMemoCache=Ho,Wa.useHostTransitionStatus=Wo,Wa.useFormState=Lh,Wa.useActionState=Lh,Wa.useOptimistic=function(e,t){var l=nt();return Ch(l,Be,e,t)};var Ds={readContext:Et,use:Ql,useCallback:Kh,useContext:Et,useEffect:Xo,useImperativeHandle:Vh,useInsertionEffect:Ih,useLayoutEffect:Hh,useMemo:Yh,useReducer:Vo,useRef:$h,useState:function(){return Vo(Aa)},useDebugValue:Qo,useDeferredValue:function(e,t){var l=nt();return Be===null?Fo(l,e,t):Xh(l,Be.memoizedState,e,t)},useTransition:function(){var e=Vo(Aa)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Sn(e),t]},useSyncExternalStore:_h,useId:Wh};Ds.useCacheRefresh=Zh,Ds.useMemoCache=Ho,Ds.useHostTransitionStatus=Wo,Ds.useFormState=Bh,Ds.useActionState=Bh,Ds.useOptimistic=function(e,t){var l=nt();return Be!==null?Ch(l,Be,e,t):(l.baseState=e,[e,l.queue.dispatch])};function ec(e,t,l,o){t=e.memoizedState,l=l(o,t),l=l==null?t:re({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var tc={isMounted:function(e){return(e=e._reactInternals)?le(e)===e:!1},enqueueSetState:function(e,t,l){e=e._reactInternals;var o=Bt(),u=ts(o);u.payload=t,l!=null&&(u.callback=l),t=as(e,u,o),t!==null&&(Tt(t,e,o),Cn(t,e,o))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var o=Bt(),u=ts(o);u.tag=1,u.payload=t,l!=null&&(u.callback=l),t=as(e,u,o),t!==null&&(Tt(t,e,o),Cn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Bt(),o=ts(l);o.tag=2,t!=null&&(o.callback=t),t=as(e,o,l),t!==null&&(Tt(t,e,l),Cn(t,e,l))}};function sf(e,t,l,o,u,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,g):t.prototype&&t.prototype.isPureReactComponent?!mn(l,o)||!mn(u,h):!0}function rf(e,t,l,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,o),t.state!==e&&tc.enqueueReplaceState(t,t.state,null)}function Us(e,t){var l=t;if("ref"in t){l={};for(var o in t)o!=="ref"&&(l[o]=t[o])}if(e=e.defaultProps){l===t&&(l=re({},l));for(var u in e)l[u]===void 0&&(l[u]=e[u])}return l}var ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function nf(e){ei(e)}function lf(e){console.error(e)}function of(e){ei(e)}function ti(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function cf(e,t,l){try{var o=e.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function ac(e,t,l){return l=ts(l),l.tag=3,l.payload={element:null},l.callback=function(){ti(e,t)},l}function uf(e){return e=ts(e),e.tag=3,e}function df(e,t,l,o){var u=l.type.getDerivedStateFromError;if(typeof u=="function"){var h=o.value;e.payload=function(){return u(h)},e.callback=function(){cf(t,l,o)}}var g=l.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){cf(t,l,o),typeof u!="function"&&(os===null?os=new Set([this]):os.add(this));var y=o.stack;this.componentDidCatch(o.value,{componentStack:y!==null?y:""})})}function lg(e,t,l,o,u){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=l.alternate,t!==null&&Rn(t,l,u,!0),l=Jt.current,l!==null){switch(l.tag){case 13:return ba===null?Lc():l.alternate===null&&We===0&&(We=3),l.flags&=-257,l.flags|=65536,l.lanes=u,o===Oo?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([o]):t.add(o),Bc(e,o,u)),!1;case 22:return l.flags|=65536,o===Oo?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([o]):l.add(o)),Bc(e,o,u)),!1}throw Error(i(435,l.tag))}return Bc(e,o,u),Lc(),!1}if(qe)return t=Jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==To&&(e=Error(i(422),{cause:o}),bn(Xt(e,l)))):(o!==To&&(t=Error(i(423),{cause:o}),bn(Xt(t,l))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=Xt(o,l),u=ac(e.stateNode,o,u),gc(e,u),We!==4&&(We=2)),!1;var h=Error(i(520),{cause:o});if(h=Xt(h,l),zn===null?zn=[h]:zn.push(h),We!==4&&(We=2),t===null)return!0;o=Xt(o,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=u&-u,l.lanes|=e,e=ac(l.stateNode,o,e),gc(l,e),!1;case 1:if(t=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(os===null||!os.has(h))))return l.flags|=65536,u&=-u,l.lanes|=u,u=uf(u),df(u,e,l,o),gc(l,u),!1}l=l.return}while(l!==null);return!1}var hf=Error(i(461)),mt=!1;function vt(e,t,l,o){t.child=e===null?xh(t,null,l,o):Rs(t,e.child,l,o)}function ff(e,t,l,o,u){l=l.render;var h=t.ref;if("ref"in o){var g={};for(var y in o)y!=="ref"&&(g[y]=o[y])}else g=o;return Ms(t),o=Bo(e,t,l,g,h,u),y=$o(),e!==null&&!mt?(Po(e,t,u),Ra(e,t,u)):(qe&&y&&Ro(t),t.flags|=1,vt(e,t,o,u),t.child)}function mf(e,t,l,o,u){if(e===null){var h=l.type;return typeof h=="function"&&!kc(h)&&h.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=h,pf(e,t,h,o,u)):(e=li(l.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!dc(e,u)){var g=h.memoizedProps;if(l=l.compare,l=l!==null?l:mn,l(g,o)&&e.ref===t.ref)return Ra(e,t,u)}return t.flags|=1,e=ls(h,o),e.ref=t.ref,e.return=t,t.child=e}function pf(e,t,l,o,u){if(e!==null){var h=e.memoizedProps;if(mn(h,o)&&e.ref===t.ref)if(mt=!1,t.pendingProps=o=h,dc(e,u))(e.flags&131072)!==0&&(mt=!0);else return t.lanes=e.lanes,Ra(e,t,u)}return sc(e,t,l,o,u)}function xf(e,t,l){var o=t.pendingProps,u=o.children,h=(t.stateNode._pendingVisibility&2)!==0,g=e!==null?e.memoizedState:null;if(An(e,t),o.mode==="hidden"||h){if((t.flags&128)!==0){if(o=g!==null?g.baseLanes|l:l,e!==null){for(u=t.child=e.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;t.childLanes=h&~o}else t.childLanes=0,t.child=null;return gf(e,t,o,l)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vl(t,g!==null?g.cachePool:null),g!==null?gh(t,g):Do(),bh(t);else return t.lanes=t.childLanes=536870912,gf(e,t,g!==null?g.baseLanes|l:l,l)}else g!==null?(Vl(t,g.cachePool),gh(t,g),Fa(),t.memoizedState=null):(e!==null&&Vl(t,null),Do(),Fa());return vt(e,t,u,l),t.child}function gf(e,t,l,o){var u=Lo();return u=u===null?null:{parent:ct._currentValue,pool:u},t.memoizedState={baseLanes:l,cachePool:u},e!==null&&Vl(t,null),Do(),bh(t),e!==null&&Rn(e,t,o,!0),null}function An(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(e===null||e.ref!==l)&&(t.flags|=2097664)}}function sc(e,t,l,o,u){return Ms(t),l=Bo(e,t,l,o,void 0,u),o=$o(),e!==null&&!mt?(Po(e,t,u),Ra(e,t,u)):(qe&&o&&Ro(t),t.flags|=1,vt(e,t,l,u),t.child)}function bf(e,t,l,o,u,h){return Ms(t),t.updateQueue=null,l=Nh(t,o,l,u),jh(e),o=$o(),e!==null&&!mt?(Po(e,t,h),Ra(e,t,h)):(qe&&o&&Ro(t),t.flags|=1,vt(e,t,l,h),t.child)}function yf(e,t,l,o,u){if(Ms(t),t.stateNode===null){var h=ur,g=l.contextType;typeof g=="object"&&g!==null&&(h=Et(g)),h=new l(o,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=tc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=o,h.state=t.memoizedState,h.refs={},pc(t),g=l.contextType,h.context=typeof g=="object"&&g!==null?Et(g):ur,h.state=t.memoizedState,g=l.getDerivedStateFromProps,typeof g=="function"&&(ec(t,l,g,o),h.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&tc.enqueueReplaceState(h,h.state,null),On(t,o,h,u),Tn(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){h=t.stateNode;var y=t.memoizedProps,k=Us(l,y);h.props=k;var D=h.context,H=l.contextType;g=ur,typeof H=="object"&&H!==null&&(g=Et(H));var K=l.getDerivedStateFromProps;H=typeof K=="function"||typeof h.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,H||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y||D!==g)&&rf(t,h,o,g),es=!1;var z=t.memoizedState;h.state=z,On(t,o,h,u),Tn(),D=t.memoizedState,y||z!==D||es?(typeof K=="function"&&(ec(t,l,K,o),D=t.memoizedState),(k=es||sf(t,l,k,o,z,D,g))?(H||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=D),h.props=o,h.state=D,h.context=g,o=k):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{h=t.stateNode,xc(e,t),g=t.memoizedProps,H=Us(l,g),h.props=H,K=t.pendingProps,z=h.context,D=l.contextType,k=ur,typeof D=="object"&&D!==null&&(k=Et(D)),y=l.getDerivedStateFromProps,(D=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==K||z!==k)&&rf(t,h,o,k),es=!1,z=t.memoizedState,h.state=z,On(t,o,h,u),Tn();var I=t.memoizedState;g!==K||z!==I||es||e!==null&&e.dependencies!==null&&ai(e.dependencies)?(typeof y=="function"&&(ec(t,l,y,o),I=t.memoizedState),(H=es||sf(t,l,H,o,z,I,k)||e!==null&&e.dependencies!==null&&ai(e.dependencies))?(D||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,I,k),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,I,k)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=I),h.props=o,h.state=I,h.context=k,o=H):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return h=o,An(e,t),o=(t.flags&128)!==0,h||o?(h=t.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&o?(t.child=Rs(t,e.child,null,u),t.child=Rs(t,null,l,u)):vt(e,t,l,u),t.memoizedState=h.state,e=t.child):e=Ra(e,t,u),e}function vf(e,t,l,o){return gn(),t.flags|=256,vt(e,t,l,o),t.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function nc(e){return{baseLanes:e,cachePool:wh()}}function lc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=ta),e}function wf(e,t,l){var o=t.pendingProps,u=!1,h=(t.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(u?Qa(t):Fa(),qe){var y=yt,k;if(k=y){e:{for(k=y,y=ga;k.nodeType!==8;){if(!y){y=null;break e}if(k=ia(k.nextSibling),k===null){y=null;break e}}y=k}y!==null?(t.memoizedState={dehydrated:y,treeContext:Ss!==null?{id:ka,overflow:Sa}:null,retryLane:536870912},k=ea(18,null,null,0),k.stateNode=y,k.return=t,t.child=k,Ct=t,yt=null,k=!0):k=!1}k||As(t)}if(y=t.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return y.data==="$!"?t.lanes=16:t.lanes=536870912,null;Ea(t)}return y=o.children,o=o.fallback,u?(Fa(),u=t.mode,y=oc({mode:"hidden",children:y},u),o=zs(o,u,l,null),y.return=t,o.return=t,y.sibling=o,t.child=y,u=t.child,u.memoizedState=nc(l),u.childLanes=lc(e,g,l),t.memoizedState=rc,o):(Qa(t),ic(t,y))}if(k=e.memoizedState,k!==null&&(y=k.dehydrated,y!==null)){if(h)t.flags&256?(Qa(t),t.flags&=-257,t=cc(e,t,l)):t.memoizedState!==null?(Fa(),t.child=e.child,t.flags|=128,t=null):(Fa(),u=o.fallback,y=t.mode,o=oc({mode:"visible",children:o.children},y),u=zs(u,y,l,null),u.flags|=2,o.return=t,u.return=t,o.sibling=u,t.child=o,Rs(t,e.child,null,l),o=t.child,o.memoizedState=nc(l),o.childLanes=lc(e,g,l),t.memoizedState=rc,t=u);else if(Qa(t),y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var D=g.dgst;g=D,o=Error(i(419)),o.stack="",o.digest=g,bn({value:o,source:null,stack:null}),t=cc(e,t,l)}else if(mt||Rn(e,t,l,!1),g=(l&e.childLanes)!==0,mt||g){if(g=Ie,g!==null){if(o=l&-l,(o&42)!==0)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=(o&(g.suspendedLanes|l))!==0?0:o,o!==0&&o!==k.retryLane)throw k.retryLane=o,Xa(e,o),Tt(g,e,o),hf}y.data==="$?"||Lc(),t=cc(e,t,l)}else y.data==="$?"?(t.flags|=128,t.child=e.child,t=wg.bind(null,e),y._reactRetry=t,t=null):(e=k.treeContext,yt=ia(y.nextSibling),Ct=t,qe=!0,na=null,ga=!1,e!==null&&(Qt[Ft++]=ka,Qt[Ft++]=Sa,Qt[Ft++]=Ss,ka=e.id,Sa=e.overflow,Ss=t),t=ic(t,o.children),t.flags|=4096);return t}return u?(Fa(),u=o.fallback,y=t.mode,k=e.child,D=k.sibling,o=ls(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&31457280,D!==null?u=ls(D,u):(u=zs(u,y,l,null),u.flags|=2),u.return=t,o.return=t,o.sibling=u,t.child=o,o=u,u=t.child,y=e.child.memoizedState,y===null?y=nc(l):(k=y.cachePool,k!==null?(D=ct._currentValue,k=k.parent!==D?{parent:D,pool:D}:k):k=wh(),y={baseLanes:y.baseLanes|l,cachePool:k}),u.memoizedState=y,u.childLanes=lc(e,g,l),t.memoizedState=rc,o):(Qa(t),l=e.child,e=l.sibling,l=ls(l,{mode:"visible",children:o.children}),l.return=t,l.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=l,t.memoizedState=null,l)}function ic(e,t){return t=oc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function oc(e,t){return Yf(e,t,0,null)}function cc(e,t,l){return Rs(t,e.child,null,l),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,l){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),fc(e.return,t,l)}function uc(e,t,l,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=l,h.tailMode=u)}function Nf(e,t,l){var o=t.pendingProps,u=o.revealOrder,h=o.tail;if(vt(e,t,o.children,l),o=ot.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,l,t);else if(e.tag===19)jf(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(be(ot,o),u){case"forwards":for(l=t.child,u=null;l!==null;)e=l.alternate,e!==null&&Gl(e)===null&&(u=l),l=l.sibling;l=u,l===null?(u=t.child,t.child=null):(u=l.sibling,l.sibling=null),uc(t,!1,u,l,h);break;case"backwards":for(l=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Gl(e)===null){t.child=u;break}e=u.sibling,u.sibling=l,l=u,u=e}uc(t,!0,l,null,h);break;case"together":uc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ra(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(Rn(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,l=ls(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=ls(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function dc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ai(e)))}function ig(e,t,l){switch(t.tag){case 3:F(t,t.stateNode.containerInfo),Za(t,ct,e.memoizedState.cache),gn();break;case 27:case 5:bt(t);break;case 4:F(t,t.stateNode.containerInfo);break;case 10:Za(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Qa(t),t.flags|=128,null):(l&t.child.childLanes)!==0?wf(e,t,l):(Qa(t),e=Ra(e,t,l),e!==null?e.sibling:null);Qa(t);break;case 19:var u=(e.flags&128)!==0;if(o=(l&t.childLanes)!==0,o||(Rn(e,t,l,!1),o=(l&t.childLanes)!==0),u){if(o)return Nf(e,t,l);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),be(ot,ot.current),o)break;return null;case 22:case 23:return t.lanes=0,xf(e,t,l);case 24:Za(t,ct,e.memoizedState.cache)}return Ra(e,t,l)}function _f(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)mt=!0;else{if(!dc(e,l)&&(t.flags&128)===0)return mt=!1,ig(e,t,l);mt=(e.flags&131072)!==0}else mt=!1,qe&&(t.flags&1048576)!==0&&ih(t,Bl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,u=o._init;if(o=u(o._payload),t.type=o,typeof o=="function")kc(o)?(e=Us(o,e),t.tag=1,t=yf(null,t,o,e,l)):(t.tag=0,t=sc(null,t,o,e,l));else{if(o!=null){if(u=o.$$typeof,u===S){t.tag=11,t=ff(null,t,o,e,l);break e}else if(u===U){t.tag=14,t=mf(null,t,o,e,l);break e}}throw t=V(o)||o,Error(i(306,t,""))}}return t;case 0:return sc(e,t,t.type,t.pendingProps,l);case 1:return o=t.type,u=Us(o,t.pendingProps),yf(e,t,o,u,l);case 3:e:{if(F(t,t.stateNode.containerInfo),e===null)throw Error(i(387));var h=t.pendingProps;u=t.memoizedState,o=u.element,xc(e,t),On(t,h,null,l);var g=t.memoizedState;if(h=g.cache,Za(t,ct,h),h!==u.cache&&mc(t,[ct],l,!0),Tn(),h=g.element,u.isDehydrated)if(u={element:h,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=vf(e,t,h,l);break e}else if(h!==o){o=Xt(Error(i(424)),t),bn(o),t=vf(e,t,h,l);break e}else for(yt=ia(t.stateNode.containerInfo.firstChild),Ct=t,qe=!0,na=null,ga=!0,l=xh(t,null,h,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gn(),h===o){t=Ra(e,t,l);break e}vt(e,t,h,l)}t=t.child}return t;case 26:return An(e,t),e===null?(l=Em(t.type,null,t.pendingProps,null))?t.memoizedState=l:qe||(l=t.type,e=t.pendingProps,o=bi(fe.current).createElement(l),o[St]=t,o[Ot]=e,wt(o,l,e),ft(o),t.stateNode=o):t.memoizedState=Em(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return bt(t),e===null&&qe&&(o=t.stateNode=_m(t.type,t.pendingProps,fe.current),Ct=t,ga=!0,yt=ia(o.firstChild)),o=t.pendingProps.children,e!==null||qe?vt(e,t,o,l):t.child=Rs(t,null,o,l),An(e,t),t.child;case 5:return e===null&&qe&&((u=o=yt)&&(o=Lg(o,t.type,t.pendingProps,ga),o!==null?(t.stateNode=o,Ct=t,yt=ia(o.firstChild),ga=!1,u=!0):u=!1),u||As(t)),bt(t),u=t.type,h=t.pendingProps,g=e!==null?e.memoizedProps:null,o=h.children,Jc(u,h)?o=null:g!==null&&Jc(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Bo(e,t,eg,null,null,l),Yn._currentValue=u),An(e,t),vt(e,t,o,l),t.child;case 6:return e===null&&qe&&((e=l=yt)&&(l=zg(l,t.pendingProps,ga),l!==null?(t.stateNode=l,Ct=t,yt=null,e=!0):e=!1),e||As(t)),null;case 13:return wf(e,t,l);case 4:return F(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Rs(t,null,o,l):vt(e,t,o,l),t.child;case 11:return ff(e,t,t.type,t.pendingProps,l);case 7:return vt(e,t,t.pendingProps,l),t.child;case 8:return vt(e,t,t.pendingProps.children,l),t.child;case 12:return vt(e,t,t.pendingProps.children,l),t.child;case 10:return o=t.pendingProps,Za(t,t.type,o.value),vt(e,t,o.children,l),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,Ms(t),u=Et(u),o=o(u),t.flags|=1,vt(e,t,o,l),t.child;case 14:return mf(e,t,t.type,t.pendingProps,l);case 15:return pf(e,t,t.type,t.pendingProps,l);case 19:return Nf(e,t,l);case 22:return xf(e,t,l);case 24:return Ms(t),o=Et(ct),e===null?(u=Lo(),u===null&&(u=Ie,h=qo(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=l),u=h),t.memoizedState={parent:o,cache:u},pc(t),Za(t,ct,u)):((e.lanes&l)!==0&&(xc(e,t),On(t,null,null,l),Tn()),u=e.memoizedState,h=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Za(t,ct,o)):(o=h.cache,Za(t,ct,o),o!==u.cache&&mc(t,[ct],l,!0))),vt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}var hc=J(null),qs=null,Ca=null;function Za(e,t,l){be(hc,t._currentValue),t._currentValue=l}function Ta(e){e._currentValue=hc.current,pe(hc)}function fc(e,t,l){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===l)break;e=e.return}}function mc(e,t,l,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var g=u.child;h=h.firstContext;e:for(;h!==null;){var y=h;h=u;for(var k=0;k<t.length;k++)if(y.context===t[k]){h.lanes|=l,y=h.alternate,y!==null&&(y.lanes|=l),fc(h.return,l,e),o||(g=null);break e}h=y.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(i(341));g.lanes|=l,h=g.alternate,h!==null&&(h.lanes|=l),fc(g,l,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Rn(e,t,l,o){e=null;for(var u=t,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var y=u.type;qt(u.pendingProps.value,g.value)||(e!==null?e.push(y):e=[y])}}else if(u===gt.current){if(g=u.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Yn):e=[Yn])}u=u.return}e!==null&&mc(t,e,l,o),t.flags|=262144}function ai(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ms(e){qs=e,Ca=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Et(e){return kf(qs,e)}function si(e,t){return qs===null&&Ms(e),kf(e,t)}function kf(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Ca===null){if(e===null)throw Error(i(308));Ca=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ca=Ca.next=t;return l}var es=!1;function pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ts(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function as(e,t,l){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xe&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=Ll(e),nh(e,null,l),t}return Ml(e,o,t,l),Ll(e)}function Cn(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194176)!==0)){var o=t.lanes;o&=e.pendingLanes,l|=o,t.lanes=l,fd(e,l)}}function gc(e,t){var l=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var u=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var g={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?u=h=g:h=h.next=g,l=l.next}while(l!==null);h===null?u=h=t:h=h.next=t}else u=h=t;l={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var bc=!1;function Tn(){if(bc){var e=xr;if(e!==null)throw e}}function On(e,t,l,o){bc=!1;var u=e.updateQueue;es=!1;var h=u.firstBaseUpdate,g=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var k=y,D=k.next;k.next=null,g===null?h=D:g.next=D,g=k;var H=e.alternate;H!==null&&(H=H.updateQueue,y=H.lastBaseUpdate,y!==g&&(y===null?H.firstBaseUpdate=D:y.next=D,H.lastBaseUpdate=k))}if(h!==null){var K=u.baseState;g=0,H=D=k=null,y=h;do{var z=y.lane&-536870913,I=z!==y.lane;if(I?(Ue&z)===z:(o&z)===z){z!==0&&z===pr&&(bc=!0),H!==null&&(H=H.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ue=e,Se=y;z=t;var Ze=l;switch(Se.tag){case 1:if(ue=Se.payload,typeof ue=="function"){K=ue.call(Ze,K,z);break e}K=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=Se.payload,z=typeof ue=="function"?ue.call(Ze,K,z):ue,z==null)break e;K=re({},K,z);break e;case 2:es=!0}}z=y.callback,z!==null&&(e.flags|=64,I&&(e.flags|=8192),I=u.callbacks,I===null?u.callbacks=[z]:I.push(z))}else I={lane:z,tag:y.tag,payload:y.payload,callback:y.callback,next:null},H===null?(D=H=I,k=K):H=H.next=I,g|=z;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;I=y,y=I.next,I.next=null,u.lastBaseUpdate=I,u.shared.pending=null}}while(!0);H===null&&(k=K),u.baseState=k,u.firstBaseUpdate=D,u.lastBaseUpdate=H,h===null&&(u.shared.lanes=0),is|=g,e.lanes=g,e.memoizedState=K}}function Sf(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ef(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Sf(l[e],t)}function Dn(e,t){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var u=o.next;l=u;do{if((l.tag&e)===e){o=void 0;var h=l.create,g=l.inst;o=h(),g.destroy=o}l=l.next}while(l!==u)}}catch(y){Pe(t,t.return,y)}}function ss(e,t,l){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&e)===e){var g=o.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,u=t;var k=l;try{y()}catch(D){Pe(u,k,D)}}}o=o.next}while(o!==h)}}catch(D){Pe(t,t.return,D)}}function Af(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{Ef(t,l)}catch(o){Pe(e,e.return,o)}}}function Rf(e,t,l){l.props=Us(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(o){Pe(e,t,o)}}function Ls(e,t){try{var l=e.ref;if(l!==null){var o=e.stateNode;switch(e.tag){case 26:case 27:case 5:var u=o;break;default:u=o}typeof l=="function"?e.refCleanup=l(u):l.current=u}}catch(h){Pe(e,t,h)}}function Mt(e,t){var l=e.ref,o=e.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(u){Pe(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(u){Pe(e,t,u)}else l.current=null}function Cf(e){var t=e.type,l=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(u){Pe(e,e.return,u)}}function Tf(e,t,l){try{var o=e.stateNode;Og(o,e.type,l,t),o[Ot]=t}catch(u){Pe(e,e.return,u)}}function Of(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vc(e,t,l){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?l.nodeType===8?l.parentNode.insertBefore(e,t):l.insertBefore(e,t):(l.nodeType===8?(t=l.parentNode,t.insertBefore(e,l)):(t=l,t.appendChild(e)),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=gi));else if(o!==4&&o!==27&&(e=e.child,e!==null))for(vc(e,t,l),e=e.sibling;e!==null;)vc(e,t,l),e=e.sibling}function ri(e,t,l){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(o!==4&&o!==27&&(e=e.child,e!==null))for(ri(e,t,l),e=e.sibling;e!==null;)ri(e,t,l),e=e.sibling}var Oa=!1,Je=!1,wc=!1,Df=typeof WeakSet=="function"?WeakSet:Set,pt=null,Uf=!1;function og(e,t){if(e=e.containerInfo,Qc=_i,e=Fd(e),No(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var u=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var g=0,y=-1,k=-1,D=0,H=0,K=e,z=null;t:for(;;){for(var I;K!==l||u!==0&&K.nodeType!==3||(y=g+u),K!==h||o!==0&&K.nodeType!==3||(k=g+o),K.nodeType===3&&(g+=K.nodeValue.length),(I=K.firstChild)!==null;)z=K,K=I;for(;;){if(K===e)break t;if(z===l&&++D===u&&(y=g),z===h&&++H===o&&(k=g),(I=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=I}l=y===-1||k===-1?null:{start:y,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fc={focusedElem:e,selectionRange:l},_i=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){switch(t=pt,h=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,l=t,u=h.memoizedProps,h=h.memoizedState,o=l.stateNode;try{var ue=Us(l.type,u,l.elementType===l.type);e=o.getSnapshotBeforeUpdate(ue,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Pe(l,l.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)eu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":eu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}return ue=Uf,Uf=!1,ue}function qf(e,t,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:Ua(e,l),o&4&&Dn(5,l);break;case 1:if(Ua(e,l),o&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(y){Pe(l,l.return,y)}else{var u=Us(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Pe(l,l.return,y)}}o&64&&Af(l),o&512&&Ls(l,l.return);break;case 3:if(Ua(e,l),o&64&&(o=l.updateQueue,o!==null)){if(e=null,l.child!==null)switch(l.child.tag){case 27:case 5:e=l.child.stateNode;break;case 1:e=l.child.stateNode}try{Ef(o,e)}catch(y){Pe(l,l.return,y)}}break;case 26:Ua(e,l),o&512&&Ls(l,l.return);break;case 27:case 5:Ua(e,l),t===null&&o&4&&Cf(l),o&512&&Ls(l,l.return);break;case 12:Ua(e,l);break;case 13:Ua(e,l),o&4&&zf(e,l);break;case 22:if(u=l.memoizedState!==null||Oa,!u){t=t!==null&&t.memoizedState!==null||Je;var h=Oa,g=Je;Oa=u,(Je=t)&&!g?rs(e,l,(l.subtreeFlags&8772)!==0):Ua(e,l),Oa=h,Je=g}o&512&&(l.memoizedProps.mode==="manual"?Ls(l,l.return):Mt(l,l.return));break;default:Ua(e,l)}}function Mf(e){var t=e.alternate;t!==null&&(e.alternate=null,Mf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&lo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,Lt=!1;function Da(e,t,l){for(l=l.child;l!==null;)Lf(e,t,l),l=l.sibling}function Lf(e,t,l){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ga,l)}catch{}switch(l.tag){case 26:Je||Mt(l,t),Da(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Je||Mt(l,t);var o=lt,u=Lt;for(lt=l.stateNode,Da(e,t,l),l=l.stateNode,t=l.attributes;t.length;)l.removeAttributeNode(t[0]);lo(l),lt=o,Lt=u;break;case 5:Je||Mt(l,t);case 6:u=lt;var h=Lt;if(lt=null,Da(e,t,l),lt=u,Lt=h,lt!==null)if(Lt)try{e=lt,o=l.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)}catch(g){Pe(l,t,g)}else try{lt.removeChild(l.stateNode)}catch(g){Pe(l,t,g)}break;case 18:lt!==null&&(Lt?(t=lt,l=l.stateNode,t.nodeType===8?Zc(t.parentNode,l):t.nodeType===1&&Zc(t,l),Jn(t)):Zc(lt,l.stateNode));break;case 4:o=lt,u=Lt,lt=l.stateNode.containerInfo,Lt=!0,Da(e,t,l),lt=o,Lt=u;break;case 0:case 11:case 14:case 15:Je||ss(2,l,t),Je||ss(4,l,t),Da(e,t,l);break;case 1:Je||(Mt(l,t),o=l.stateNode,typeof o.componentWillUnmount=="function"&&Rf(l,t,o)),Da(e,t,l);break;case 21:Da(e,t,l);break;case 22:Je||Mt(l,t),Je=(o=Je)||l.memoizedState!==null,Da(e,t,l),Je=o;break;default:Da(e,t,l)}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Jn(e)}catch(l){Pe(t,t.return,l)}}function cg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Df),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Df),t;default:throw Error(i(435,e.tag))}}function jc(e,t){var l=cg(e);t.forEach(function(o){var u=jg.bind(null,e,o);l.has(o)||(l.add(o),o.then(u,u))})}function Wt(e,t){var l=t.deletions;if(l!==null)for(var o=0;o<l.length;o++){var u=l[o],h=e,g=t,y=g;e:for(;y!==null;){switch(y.tag){case 27:case 5:lt=y.stateNode,Lt=!1;break e;case 3:lt=y.stateNode.containerInfo,Lt=!0;break e;case 4:lt=y.stateNode.containerInfo,Lt=!0;break e}y=y.return}if(lt===null)throw Error(i(160));Lf(h,g,u),lt=null,Lt=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Bf(t,e),t=t.sibling}var la=null;function Bf(e,t){var l=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wt(t,e),Zt(e),o&4&&(ss(3,e,e.return),Dn(3,e),ss(5,e,e.return));break;case 1:Wt(t,e),Zt(e),o&512&&(Je||l===null||Mt(l,l.return)),o&64&&Oa&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var u=la;if(Wt(t,e),Zt(e),o&512&&(Je||l===null||Mt(l,l.return)),o&4){var h=l!==null?l.memoizedState:null;if(o=e.memoizedState,l===null)if(o===null)if(e.stateNode===null){e:{o=e.type,l=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":h=u.getElementsByTagName("title")[0],(!h||h[rn]||h[St]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(o),u.head.insertBefore(h,u.querySelector("head > title"))),wt(h,o,l),h[St]=e,ft(h),o=h;break e;case"link":var g=Cm("link","href",u).get(o+(l.href||""));if(g){for(var y=0;y<g.length;y++)if(h=g[y],h.getAttribute("href")===(l.href==null?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){g.splice(y,1);break t}}h=u.createElement(o),wt(h,o,l),u.head.appendChild(h);break;case"meta":if(g=Cm("meta","content",u).get(o+(l.content||""))){for(y=0;y<g.length;y++)if(h=g[y],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){g.splice(y,1);break t}}h=u.createElement(o),wt(h,o,l),u.head.appendChild(h);break;default:throw Error(i(468,o))}h[St]=e,ft(h),o=h}e.stateNode=o}else Tm(u,e.type,e.stateNode);else e.stateNode=Rm(u,o,e.memoizedProps);else h!==o?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,o===null?Tm(u,e.type,e.stateNode):Rm(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Tf(e,e.memoizedProps,l.memoizedProps)}break;case 27:if(o&4&&e.alternate===null){u=e.stateNode,h=e.memoizedProps;try{for(var k=u.firstChild;k;){var D=k.nextSibling,H=k.nodeName;k[rn]||H==="HEAD"||H==="BODY"||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&k.rel.toLowerCase()==="stylesheet"||u.removeChild(k),k=D}for(var K=e.type,z=u.attributes;z.length;)u.removeAttributeNode(z[0]);wt(u,K,h),u[St]=e,u[Ot]=h}catch(ue){Pe(e,e.return,ue)}}case 5:if(Wt(t,e),Zt(e),o&512&&(Je||l===null||Mt(l,l.return)),e.flags&32){u=e.stateNode;try{sr(u,"")}catch(ue){Pe(e,e.return,ue)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,Tf(e,u,l!==null?l.memoizedProps:u)),o&1024&&(wc=!0);break;case 6:if(Wt(t,e),Zt(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,l=e.stateNode;try{l.nodeValue=o}catch(ue){Pe(e,e.return,ue)}}break;case 3:if(wi=null,u=la,la=yi(t.containerInfo),Wt(t,e),la=u,Zt(e),o&4&&l!==null&&l.memoizedState.isDehydrated)try{Jn(t.containerInfo)}catch(ue){Pe(e,e.return,ue)}wc&&(wc=!1,$f(e));break;case 4:o=la,la=yi(e.stateNode.containerInfo),Wt(t,e),Zt(e),la=o;break;case 12:Wt(t,e),Zt(e);break;case 13:Wt(t,e),Zt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Tc=Gt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,jc(e,o)));break;case 22:if(o&512&&(Je||l===null||Mt(l,l.return)),k=e.memoizedState!==null,D=l!==null&&l.memoizedState!==null,H=Oa,K=Je,Oa=H||k,Je=K||D,Wt(t,e),Je=K,Oa=H,Zt(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,o&8192&&(t._visibility=k?t._visibility&-2:t._visibility|1,k&&(t=Oa||Je,l===null||D||t||vr(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(l=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(l===null){D=l=t;try{if(u=D.stateNode,k)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{g=D.stateNode,y=D.memoizedProps.style;var I=y!=null&&y.hasOwnProperty("display")?y.display:null;g.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ue){Pe(D,D.return,ue)}}}else if(t.tag===6){if(l===null){D=t;try{D.stateNode.nodeValue=k?"":D.memoizedProps}catch(ue){Pe(D,D.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,jc(e,l))));break;case 19:Wt(t,e),Zt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,jc(e,o)));break;case 21:break;default:Wt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var l=e.return;l!==null;){if(Of(l)){var o=l;break e}l=l.return}throw Error(i(160))}switch(o.tag){case 27:var u=o.stateNode,h=yc(e);ri(e,h,u);break;case 5:var g=o.stateNode;o.flags&32&&(sr(g,""),o.flags&=-33);var y=yc(e);ri(e,y,g);break;case 3:case 4:var k=o.stateNode.containerInfo,D=yc(e);vc(e,D,k);break;default:throw Error(i(161))}}}catch(H){Pe(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $f(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$f(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)qf(e,t.alternate,t),t=t.sibling}function vr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ss(4,t,t.return),vr(t);break;case 1:Mt(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&Rf(t,t.return,l),vr(t);break;case 26:case 27:case 5:Mt(t,t.return),vr(t);break;case 22:Mt(t,t.return),t.memoizedState===null&&vr(t);break;default:vr(t)}e=e.sibling}}function rs(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,h=t,g=h.flags;switch(h.tag){case 0:case 11:case 15:rs(u,h,l),Dn(4,h);break;case 1:if(rs(u,h,l),o=h,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(D){Pe(o,o.return,D)}if(o=h,u=o.updateQueue,u!==null){var y=o.stateNode;try{var k=u.shared.hiddenCallbacks;if(k!==null)for(u.shared.hiddenCallbacks=null,u=0;u<k.length;u++)Sf(k[u],y)}catch(D){Pe(o,o.return,D)}}l&&g&64&&Af(h),Ls(h,h.return);break;case 26:case 27:case 5:rs(u,h,l),l&&o===null&&g&4&&Cf(h),Ls(h,h.return);break;case 12:rs(u,h,l);break;case 13:rs(u,h,l),l&&g&4&&zf(u,h);break;case 22:h.memoizedState===null&&rs(u,h,l),Ls(h,h.return);break;default:rs(u,h,l)}t=t.sibling}}function Nc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Nn(l))}function _c(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nn(e))}function ns(e,t,l,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pf(e,t,l,o),t=t.sibling}function Pf(e,t,l,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:ns(e,t,l,o),u&2048&&Dn(9,t);break;case 3:ns(e,t,l,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nn(e)));break;case 12:if(u&2048){ns(e,t,l,o),e=t.stateNode;try{var h=t.memoizedProps,g=h.id,y=h.onPostCommit;typeof y=="function"&&y(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Pe(t,t.return,k)}}else ns(e,t,l,o);break;case 23:break;case 22:h=t.stateNode,t.memoizedState!==null?h._visibility&4?ns(e,t,l,o):Un(e,t):h._visibility&4?ns(e,t,l,o):(h._visibility|=4,wr(e,t,l,o,(t.subtreeFlags&10256)!==0)),u&2048&&Nc(t.alternate,t);break;case 24:ns(e,t,l,o),u&2048&&_c(t.alternate,t);break;default:ns(e,t,l,o)}}function wr(e,t,l,o,u){for(u=u&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var h=e,g=t,y=l,k=o,D=g.flags;switch(g.tag){case 0:case 11:case 15:wr(h,g,y,k,u),Dn(8,g);break;case 23:break;case 22:var H=g.stateNode;g.memoizedState!==null?H._visibility&4?wr(h,g,y,k,u):Un(h,g):(H._visibility|=4,wr(h,g,y,k,u)),u&&D&2048&&Nc(g.alternate,g);break;case 24:wr(h,g,y,k,u),u&&D&2048&&_c(g.alternate,g);break;default:wr(h,g,y,k,u)}t=t.sibling}}function Un(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,o=t,u=o.flags;switch(o.tag){case 22:Un(l,o),u&2048&&Nc(o.alternate,o);break;case 24:Un(l,o),u&2048&&_c(o.alternate,o);break;default:Un(l,o)}t=t.sibling}}var qn=8192;function jr(e){if(e.subtreeFlags&qn)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 26:jr(e),e.flags&qn&&e.memoizedState!==null&&Jg(la,e.memoizedState,e.memoizedProps);break;case 5:jr(e);break;case 3:case 4:var t=la;la=yi(e.stateNode.containerInfo),jr(e),la=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=qn,qn=16777216,jr(e),qn=t):jr(e));break;default:jr(e)}}function Hf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Mn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var o=t[l];pt=o,Vf(o,e)}Hf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gf(e),e=e.sibling}function Gf(e){switch(e.tag){case 0:case 11:case 15:Mn(e),e.flags&2048&&ss(9,e,e.return);break;case 3:Mn(e);break;case 12:Mn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,ni(e)):Mn(e);break;default:Mn(e)}}function ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var o=t[l];pt=o,Vf(o,e)}Hf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ss(8,t,t.return),ni(t);break;case 22:l=t.stateNode,l._visibility&4&&(l._visibility&=-5,ni(t));break;default:ni(t)}e=e.sibling}}function Vf(e,t){for(;pt!==null;){var l=pt;switch(l.tag){case 0:case 11:case 15:ss(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Nn(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,pt=o;else e:for(l=e;pt!==null;){o=pt;var u=o.sibling,h=o.return;if(Mf(o),o===l){pt=null;break e}if(u!==null){u.return=h,pt=u;break e}pt=h}}}function ug(e,t,l,o){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(e,t,l,o){return new ug(e,t,l,o)}function kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ls(e,t){var l=e.alternate;return l===null?(l=ea(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&31457280,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Kf(e,t){e.flags&=31457282;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function li(e,t,l,o,u,h){var g=0;if(o=e,typeof e=="function")kc(e)&&(g=1);else if(typeof e=="string")g=Qg(e,l,at.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case m:return zs(l.children,u,h,t);case p:g=8,u|=24;break;case b:return e=ea(12,l,t,u|2),e.elementType=b,e.lanes=h,e;case E:return e=ea(13,l,t,u),e.elementType=E,e.lanes=h,e;case C:return e=ea(19,l,t,u),e.elementType=C,e.lanes=h,e;case A:return Yf(l,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case _:g=10;break e;case j:g=9;break e;case S:g=11;break e;case U:g=14;break e;case R:g=16,o=null;break e}g=29,l=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=ea(g,l,t,u),t.elementType=e,t.type=o,t.lanes=h,t}function zs(e,t,l,o){return e=ea(7,e,o,t),e.lanes=l,e}function Yf(e,t,l,o){e=ea(22,e,o,t),e.elementType=A,e.lanes=l;var u={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var h=u._current;if(h===null)throw Error(i(456));if((u._pendingVisibility&2)===0){var g=Xa(h,2);g!==null&&(u._pendingVisibility|=2,Tt(g,h,2))}},attach:function(){var h=u._current;if(h===null)throw Error(i(456));if((u._pendingVisibility&2)!==0){var g=Xa(h,2);g!==null&&(u._pendingVisibility&=-3,Tt(g,h,2))}}};return e.stateNode=u,e}function Sc(e,t,l){return e=ea(6,e,null,t),e.lanes=l,e}function Ec(e,t,l){return t=ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qa(e){e.flags|=4}function Xf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Om(t)){if(t=Jt.current,t!==null&&((Ue&4194176)===Ue?ba!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||t!==ba))throw vn=Oo,uh;e.flags|=8192}}function ii(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?dd():536870912,e.lanes|=t,_r|=t)}function Ln(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,o=0;if(t)for(var u=e.child;u!==null;)l|=u.lanes|u.childLanes,o|=u.subtreeFlags&31457280,o|=u.flags&31457280,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)l|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=l,t}function dg(e,t,l){var o=t.pendingProps;switch(Co(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return l=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Ta(ct),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(xn(t)?qa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,na!==null&&(qc(na),na=null))),Ye(t),null;case 26:return l=t.memoizedState,e===null?(qa(t),l!==null?(Ye(t),Xf(t,l)):(Ye(t),t.flags&=-16777217)):l?l!==e.memoizedState?(qa(t),Ye(t),Xf(t,l)):(Ye(t),t.flags&=-16777217):(e.memoizedProps!==o&&qa(t),Ye(t),t.flags&=-16777217),null;case 27:Le(t),l=fe.current;var u=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==o&&qa(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Ye(t),null}e=at.current,xn(t)?oh(t):(e=_m(u,o,l),t.stateNode=e,qa(t))}return Ye(t),null;case 5:if(Le(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&qa(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Ye(t),null}if(e=at.current,xn(t))oh(t);else{switch(u=bi(fe.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?u.createElement("select",{is:o.is}):u.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?u.createElement(l,{is:o.is}):u.createElement(l)}}e[St]=t,e[Ot]=o;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=e;e:switch(wt(e,l,o),l){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&qa(t)}}return Ye(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&qa(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=fe.current,xn(t)){if(e=t.stateNode,l=t.memoizedProps,o=null,u=Ct,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[St]=t,e=!!(e.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||bm(e.nodeValue,l)),e||As(t)}else e=bi(e).createTextNode(o),e[St]=t,t.stateNode=e}return Ye(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=xn(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(i(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[St]=t}else gn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),u=!1}else na!==null&&(qc(na),na=null),u=!0;if(!u)return t.flags&256?(Ea(t),t):(Ea(t),null)}if(Ea(t),(t.flags&128)!==0)return t.lanes=l,t;if(l=o!==null,e=e!==null&&e.memoizedState!==null,l){o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool);var h=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048)}return l!==e&&l&&(t.child.flags|=8192),ii(t,t.updateQueue),Ye(t),null;case 4:return _e(),e===null&&Kc(t.stateNode.containerInfo),Ye(t),null;case 10:return Ta(t.type),Ye(t),null;case 19:if(pe(ot),u=t.memoizedState,u===null)return Ye(t),null;if(o=(t.flags&128)!==0,h=u.rendering,h===null)if(o)Ln(u,!1);else{if(We!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Gl(e),h!==null){for(t.flags|=128,Ln(u,!1),e=h.updateQueue,t.updateQueue=e,ii(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Kf(l,e),l=l.sibling;return be(ot,ot.current&1|2),t.child}e=e.sibling}u.tail!==null&&Gt()>oi&&(t.flags|=128,o=!0,Ln(u,!1),t.lanes=4194304)}else{if(!o)if(e=Gl(h),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ii(t,e),Ln(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!qe)return Ye(t),null}else 2*Gt()-u.renderingStartTime>oi&&l!==536870912&&(t.flags|=128,o=!0,Ln(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(e=u.last,e!==null?e.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Gt(),t.sibling=null,e=ot.current,be(ot,o?e&1|2:e&1),t):(Ye(t),null);case 22:case 23:return Ea(t),Uo(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(l&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),l=t.updateQueue,l!==null&&ii(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==l&&(t.flags|=2048),e!==null&&pe(Cs),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ta(ct),Ye(t),null;case 25:return null}throw Error(i(156,t.tag))}function hg(e,t){switch(Co(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(ct),_e(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Le(t),null;case 13:if(Ea(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(ot),null;case 4:return _e(),null;case 10:return Ta(t.type),null;case 22:case 23:return Ea(t),Uo(),e!==null&&pe(Cs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ta(ct),null;case 25:return null;default:return null}}function Qf(e,t){switch(Co(t),t.tag){case 3:Ta(ct),_e();break;case 26:case 27:case 5:Le(t);break;case 4:_e();break;case 13:Ea(t);break;case 19:pe(ot);break;case 10:Ta(t.type);break;case 22:case 23:Ea(t),Uo(),e!==null&&pe(Cs);break;case 24:Ta(ct)}}var fg={getCacheForType:function(e){var t=Et(ct),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l}},mg=typeof WeakMap=="function"?WeakMap:Map,Xe=0,Ie=null,Oe=null,Ue=0,He=0,zt=null,Ma=!1,Nr=!1,Ac=!1,La=0,We=0,is=0,Bs=0,Rc=0,ta=0,_r=0,zn=null,va=null,Cc=!1,Tc=0,oi=1/0,ci=null,os=null,ui=!1,$s=null,Bn=0,Oc=0,Dc=null,$n=0,Uc=null;function Bt(){if((Xe&2)!==0&&Ue!==0)return Ue&-Ue;if(q.T!==null){var e=pr;return e!==0?e:Ic()}return pd()}function Ff(){ta===0&&(ta=(Ue&536870912)===0||qe?ud():536870912);var e=Jt.current;return e!==null&&(e.flags|=32),ta}function Tt(e,t,l){(e===Ie&&He===2||e.cancelPendingCommit!==null)&&(kr(e,0),za(e,Ue,ta,!1)),sn(e,l),((Xe&2)===0||e!==Ie)&&(e===Ie&&((Xe&2)===0&&(Bs|=l),We===4&&za(e,Ue,ta,!1)),wa(e))}function Jf(e,t,l){if((Xe&6)!==0)throw Error(i(327));var o=!l&&(t&60)===0&&(t&e.expiredLanes)===0||an(e,t),u=o?gg(e,t):zc(e,t,!0),h=o;do{if(u===0){Nr&&!o&&za(e,t,0,!1);break}else if(u===6)za(e,t,0,!Ma);else{if(l=e.current.alternate,h&&!pg(l)){u=zc(e,t,!1),h=!1;continue}if(u===2){if(h=t,e.errorRecoveryDisabledLanes&h)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var y=e;u=zn;var k=y.current.memoizedState.isDehydrated;if(k&&(kr(y,g).flags|=256),g=zc(y,g,!1),g!==2){if(Ac&&!k){y.errorRecoveryDisabledLanes|=h,Bs|=h,u=4;break e}h=va,va=u,h!==null&&qc(h)}u=g}if(h=!1,u!==2)continue}}if(u===1){kr(e,0),za(e,t,0,!0);break}e:{switch(o=e,u){case 0:case 1:throw Error(i(345));case 4:if((t&4194176)===t){za(o,t,ta,!Ma);break e}break;case 2:va=null;break;case 3:case 5:break;default:throw Error(i(329))}if(o.finishedWork=l,o.finishedLanes=t,(t&62914560)===t&&(h=Tc+300-Gt(),10<h)){if(za(o,t,ta,!Ma),Nl(o,0)!==0)break e;o.timeoutHandle=wm(Wf.bind(null,o,l,va,ci,Cc,t,ta,Bs,_r,Ma,2,-0,0),h);break e}Wf(o,l,va,ci,Cc,t,ta,Bs,_r,Ma,0,-0,0)}}break}while(!0);wa(e)}function qc(e){va===null?va=e:va.push.apply(va,e)}function Wf(e,t,l,o,u,h,g,y,k,D,H,K,z){var I=t.subtreeFlags;if((I&8192||(I&16785408)===16785408)&&(Kn={stylesheets:null,count:0,unsuspend:Fg},If(t),t=Wg(),t!==null)){e.cancelPendingCommit=t(nm.bind(null,e,l,o,u,g,y,k,1,K,z)),za(e,h,g,!D);return}nm(e,l,o,u,g,y,k,H,K,z)}function pg(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var u=l[o],h=u.getSnapshot;u=u.value;try{if(!qt(h(),u))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function za(e,t,l,o){t&=~Rc,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var h=31-kt(u),g=1<<h;o[h]=-1,u&=~g}l!==0&&hd(e,l,t)}function di(){return(Xe&6)===0?(Pn(0),!1):!0}function Mc(){if(Oe!==null){if(He===0)var e=Oe.return;else e=Oe,Ca=qs=null,Io(e),fr=null,wn=0,e=Oe;for(;e!==null;)Qf(e.alternate,e),e=e.return;Oe=null}}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Ug(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Mc(),Ie=e,Oe=l=ls(e.current,null),Ue=t,He=0,zt=null,Ma=!1,Nr=an(e,t),Ac=!1,_r=ta=Rc=Bs=is=We=0,va=zn=null,Cc=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-kt(o),h=1<<u;t|=e[u],o&=~h}return La=t,ql(),l}function Zf(e,t){Ce=null,q.H=ya,t===yn?(t=fh(),He=3):t===uh?(t=fh(),He=4):He=t===hf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zt=t,Oe===null&&(We=1,ti(e,Xt(t,e.current)))}function em(){var e=q.H;return q.H=ya,e===null?ya:e}function tm(){var e=q.A;return q.A=fg,e}function Lc(){We=4,Ma||(Ue&4194176)!==Ue&&Jt.current!==null||(Nr=!0),(is&134217727)===0&&(Bs&134217727)===0||Ie===null||za(Ie,Ue,ta,!1)}function zc(e,t,l){var o=Xe;Xe|=2;var u=em(),h=tm();(Ie!==e||Ue!==t)&&(ci=null,kr(e,t)),t=!1;var g=We;e:do try{if(He!==0&&Oe!==null){var y=Oe,k=zt;switch(He){case 8:Mc(),g=6;break e;case 3:case 2:case 6:Jt.current===null&&(t=!0);var D=He;if(He=0,zt=null,Sr(e,y,k,D),l&&Nr){g=0;break e}break;default:D=He,He=0,zt=null,Sr(e,y,k,D)}}xg(),g=We;break}catch(H){Zf(e,H)}while(!0);return t&&e.shellSuspendCounter++,Ca=qs=null,Xe=o,q.H=u,q.A=h,Oe===null&&(Ie=null,Ue=0,ql()),g}function xg(){for(;Oe!==null;)am(Oe)}function gg(e,t){var l=Xe;Xe|=2;var o=em(),u=tm();Ie!==e||Ue!==t?(ci=null,oi=Gt()+500,kr(e,t)):Nr=an(e,t);e:do try{if(He!==0&&Oe!==null){t=Oe;var h=zt;t:switch(He){case 1:He=0,zt=null,Sr(e,t,h,1);break;case 2:if(dh(h)){He=0,zt=null,sm(t);break}t=function(){He===2&&Ie===e&&(He=7),wa(e)},h.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:dh(h)?(He=0,zt=null,sm(t)):(He=0,zt=null,Sr(e,t,h,7));break;case 5:var g=null;switch(Oe.tag){case 26:g=Oe.memoizedState;case 5:case 27:var y=Oe;if(!g||Om(g)){He=0,zt=null;var k=y.sibling;if(k!==null)Oe=k;else{var D=y.return;D!==null?(Oe=D,hi(D)):Oe=null}break t}}He=0,zt=null,Sr(e,t,h,5);break;case 6:He=0,zt=null,Sr(e,t,h,6);break;case 8:Mc(),We=6;break e;default:throw Error(i(462))}}bg();break}catch(H){Zf(e,H)}while(!0);return Ca=qs=null,q.H=o,q.A=u,Xe=l,Oe!==null?0:(Ie=null,Ue=0,ql(),We)}function bg(){for(;Oe!==null&&!eo();)am(Oe)}function am(e){var t=_f(e.alternate,e,La);e.memoizedProps=e.pendingProps,t===null?hi(e):Oe=t}function sm(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=bf(l,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=bf(l,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:Io(t);default:Qf(l,t),t=Oe=Kf(t,La),t=_f(l,t,La)}e.memoizedProps=e.pendingProps,t===null?hi(e):Oe=t}function Sr(e,t,l,o){Ca=qs=null,Io(t),fr=null,wn=0;var u=t.return;try{if(lg(e,u,t,l,Ue)){We=1,ti(e,Xt(l,e.current)),Oe=null;return}}catch(h){if(u!==null)throw Oe=u,h;We=1,ti(e,Xt(l,e.current)),Oe=null;return}t.flags&32768?(qe||o===1?e=!0:Nr||(Ue&536870912)!==0?e=!1:(Ma=e=!0,(o===2||o===3||o===6)&&(o=Jt.current,o!==null&&o.tag===13&&(o.flags|=16384))),rm(t,e)):hi(t)}function hi(e){var t=e;do{if((t.flags&32768)!==0){rm(t,Ma);return}e=t.return;var l=dg(t.alternate,t,La);if(l!==null){Oe=l;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);We===0&&(We=5)}function rm(e,t){do{var l=hg(e.alternate,e);if(l!==null){l.flags&=32767,Oe=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=l}while(e!==null);We=6,Oe=null}function nm(e,t,l,o,u,h,g,y,k,D){var H=q.T,K=se.p;try{se.p=2,q.T=null,yg(e,t,l,o,K,u,h,g,y,k,D)}finally{q.T=H,se.p=K}}function yg(e,t,l,o,u,h,g,y){do Er();while($s!==null);if((Xe&6)!==0)throw Error(i(327));var k=e.finishedWork;if(o=e.finishedLanes,k===null)return null;if(e.finishedWork=null,e.finishedLanes=0,k===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var D=k.lanes|k.childLanes;if(D|=Eo,Jx(e,o,D,h,g,y),e===Ie&&(Oe=Ie=null,Ue=0),(k.subtreeFlags&10256)===0&&(k.flags&10256)===0||ui||(ui=!0,Oc=D,Dc=l,Ng(_t,function(){return Er(),null})),l=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||l?(l=q.T,q.T=null,h=se.p,se.p=2,g=Xe,Xe|=4,og(e,k),Bf(k,e),H0(Fc,e.containerInfo),_i=!!Qc,Fc=Qc=null,e.current=k,qf(e,k.alternate,k),to(),Xe=g,se.p=h,q.T=l):e.current=k,ui?(ui=!1,$s=e,Bn=o):lm(e,D),D=e.pendingLanes,D===0&&(os=null),Zr(k.stateNode),wa(e),t!==null)for(u=e.onRecoverableError,k=0;k<t.length;k++)D=t[k],u(D.value,{componentStack:D.stack});return(Bn&3)!==0&&Er(),D=e.pendingLanes,(o&4194218)!==0&&(D&42)!==0?e===Uc?$n++:($n=0,Uc=e):$n=0,Pn(0),null}function lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Nn(t)))}function Er(){if($s!==null){var e=$s,t=Oc;Oc=0;var l=md(Bn),o=q.T,u=se.p;try{if(se.p=32>l?32:l,q.T=null,$s===null)var h=!1;else{l=Dc,Dc=null;var g=$s,y=Bn;if($s=null,Bn=0,(Xe&6)!==0)throw Error(i(331));var k=Xe;if(Xe|=4,Gf(g.current),Pf(g,g.current,y,l),Xe=k,Pn(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ga,g)}catch{}h=!0}return h}finally{se.p=u,q.T=o,lm(e,t)}}return!1}function im(e,t,l){t=Xt(l,t),t=ac(e.stateNode,t,2),e=as(e,t,2),e!==null&&(sn(e,2),wa(e))}function Pe(e,t,l){if(e.tag===3)im(e,e,l);else for(;t!==null;){if(t.tag===3){im(t,e,l);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(os===null||!os.has(o))){e=Xt(l,e),l=uf(2),o=as(t,l,2),o!==null&&(df(l,o,t,e),sn(o,2),wa(o));break}}t=t.return}}function Bc(e,t,l){var o=e.pingCache;if(o===null){o=e.pingCache=new mg;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(l)||(Ac=!0,u.add(l),e=vg.bind(null,e,t,l),t.then(e,e))}function vg(e,t,l){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Ie===e&&(Ue&l)===l&&(We===4||We===3&&(Ue&62914560)===Ue&&300>Gt()-Tc?(Xe&2)===0&&kr(e,0):Rc|=l,_r===Ue&&(_r=0)),wa(e)}function om(e,t){t===0&&(t=dd()),e=Xa(e,t),e!==null&&(sn(e,t),wa(e))}function wg(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),om(e,l)}function jg(e,t){var l=0;switch(e.tag){case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(l=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),om(e,l)}function Ng(e,t){return ys(e,t)}var fi=null,Ar=null,$c=!1,mi=!1,Pc=!1,Ps=0;function wa(e){e!==Ar&&e.next===null&&(Ar===null?fi=Ar=e:Ar=Ar.next=e),mi=!0,$c||($c=!0,kg(_g))}function Pn(e,t){if(!Pc&&mi){Pc=!0;do for(var l=!1,o=fi;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var h=0;else{var g=o.suspendedLanes,y=o.pingedLanes;h=(1<<31-kt(42|e)+1)-1,h&=u&~(g&~y),h=h&201326677?h&201326677|1:h?h|2:0}h!==0&&(l=!0,dm(o,h))}else h=Ue,h=Nl(o,o===Ie?h:0),(h&3)===0||an(o,h)||(l=!0,dm(o,h));o=o.next}while(l);Pc=!1}}function _g(){mi=$c=!1;var e=0;Ps!==0&&(Dg()&&(e=Ps),Ps=0);for(var t=Gt(),l=null,o=fi;o!==null;){var u=o.next,h=cm(o,t);h===0?(o.next=null,l===null?fi=u:l.next=u,u===null&&(Ar=l)):(l=o,(e!==0||(h&3)!==0)&&(mi=!0)),o=u}Pn(e)}function cm(e,t){for(var l=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var g=31-kt(h),y=1<<g,k=u[g];k===-1?((y&l)===0||(y&o)!==0)&&(u[g]=Fx(y,t)):k<=t&&(e.expiredLanes|=y),h&=~y}if(t=Ie,l=Ue,l=Nl(e,e===t?l:0),o=e.callbackNode,l===0||e===t&&He===2||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Wr(o),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||an(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(o!==null&&Wr(o),md(l)){case 2:case 8:l=ze;break;case 32:l=_t;break;case 268435456:l=yl;break;default:l=_t}return o=um.bind(null,e),l=ys(l,o),e.callbackPriority=t,e.callbackNode=l,t}return o!==null&&o!==null&&Wr(o),e.callbackPriority=2,e.callbackNode=null,2}function um(e,t){var l=e.callbackNode;if(Er()&&e.callbackNode!==l)return null;var o=Ue;return o=Nl(e,e===Ie?o:0),o===0?null:(Jf(e,o,t),cm(e,Gt()),e.callbackNode!=null&&e.callbackNode===l?um.bind(null,e):null)}function dm(e,t){if(Er())return null;Jf(e,t,!0)}function kg(e){qg(function(){(Xe&6)!==0?ys(B,e):e()})}function Ic(){return Ps===0&&(Ps=ud()),Ps}function hm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Al(""+e)}function fm(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function Sg(e,t,l,o,u){if(t==="submit"&&l&&l.stateNode===u){var h=hm((u[Ot]||null).action),g=o.submitter;g&&(t=(t=g[Ot]||null)?hm(t.formAction):g.getAttribute("formAction"),t!==null&&(h=t,g=null));var y=new Ol("action","action",null,o,u);e.push({event:y,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ps!==0){var k=g?fm(u,g):new FormData(u);Jo(l,{pending:!0,data:k,method:u.method,action:h},null,k)}}else typeof h=="function"&&(y.preventDefault(),k=g?fm(u,g):new FormData(u),Jo(l,{pending:!0,data:k,method:u.method,action:h},h,k))},currentTarget:u}]})}}for(var Hc=0;Hc<rh.length;Hc++){var Gc=rh[Hc],Eg=Gc.toLowerCase(),Ag=Gc[0].toUpperCase()+Gc.slice(1);ra(Eg,"on"+Ag)}ra(Zd,"onAnimationEnd"),ra(eh,"onAnimationIteration"),ra(th,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(V0,"onTransitionRun"),ra(K0,"onTransitionStart"),ra(Y0,"onTransitionCancel"),ra(ah,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var In="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(In));function mm(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var o=e[l],u=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var g=o.length-1;0<=g;g--){var y=o[g],k=y.instance,D=y.currentTarget;if(y=y.listener,k!==h&&u.isPropagationStopped())break e;h=y,u.currentTarget=D;try{h(u)}catch(H){ei(H)}u.currentTarget=null,h=k}else for(g=0;g<o.length;g++){if(y=o[g],k=y.instance,D=y.currentTarget,y=y.listener,k!==h&&u.isPropagationStopped())break e;h=y,u.currentTarget=D;try{h(u)}catch(H){ei(H)}u.currentTarget=null,h=k}}}}function De(e,t){var l=t[no];l===void 0&&(l=t[no]=new Set);var o=e+"__bubble";l.has(o)||(pm(t,e,2,!1),l.add(o))}function Vc(e,t,l){var o=0;t&&(o|=4),pm(l,e,o,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function Kc(e){if(!e[pi]){e[pi]=!0,gd.forEach(function(l){l!=="selectionchange"&&(Rg.has(l)||Vc(l,!1,e),Vc(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,Vc("selectionchange",!1,t))}}function pm(e,t,l,o){switch(zm(t)){case 2:var u=tb;break;case 8:u=ab;break;default:u=nu}l=u.bind(null,t,l,e),u=void 0,!mo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,l,{capture:!0,passive:u}):e.addEventListener(t,l,!0):u!==void 0?e.addEventListener(t,l,{passive:u}):e.addEventListener(t,l,!1)}function Yc(e,t,l,o,u){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var y=o.stateNode.containerInfo;if(y===u||y.nodeType===8&&y.parentNode===u)break;if(g===4)for(g=o.return;g!==null;){var k=g.tag;if((k===3||k===4)&&(k=g.stateNode.containerInfo,k===u||k.nodeType===8&&k.parentNode===u))return;g=g.return}for(;y!==null;){if(g=ws(y),g===null)return;if(k=g.tag,k===5||k===6||k===26||k===27){o=h=g;continue e}y=y.parentNode}}o=o.return}Rd(function(){var D=h,H=ho(l),K=[];e:{var z=sh.get(e);if(z!==void 0){var I=Ol,ue=e;switch(e){case"keypress":if(Cl(l)===0)break e;case"keydown":case"keyup":I=j0;break;case"focusin":ue="focus",I=bo;break;case"focusout":ue="blur",I=bo;break;case"beforeblur":case"afterblur":I=bo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=u0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=k0;break;case Zd:case eh:case th:I=f0;break;case ah:I=E0;break;case"scroll":case"scrollend":I=o0;break;case"wheel":I=R0;break;case"copy":case"cut":case"paste":I=p0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Ud;break;case"toggle":case"beforetoggle":I=T0}var Se=(t&4)!==0,Ze=!Se&&(e==="scroll"||e==="scrollend"),M=Se?z!==null?z+"Capture":null:z;Se=[];for(var O=D,L;O!==null;){var G=O;if(L=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||L===null||M===null||(G=ln(O,M),G!=null&&Se.push(Hn(O,G,L))),Ze)break;O=O.return}0<Se.length&&(z=new I(z,ue,null,l,H),K.push({event:z,listeners:Se}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",z&&l!==uo&&(ue=l.relatedTarget||l.fromElement)&&(ws(ue)||ue[Ws]))break e;if((I||z)&&(z=H.window===H?H:(z=H.ownerDocument)?z.defaultView||z.parentWindow:window,I?(ue=l.relatedTarget||l.toElement,I=D,ue=ue?ws(ue):null,ue!==null&&(Ze=le(ue),Se=ue.tag,ue!==Ze||Se!==5&&Se!==27&&Se!==6)&&(ue=null)):(I=null,ue=D),I!==ue)){if(Se=Od,G="onMouseLeave",M="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Ud,G="onPointerLeave",M="onPointerEnter",O="pointer"),Ze=I==null?z:nn(I),L=ue==null?z:nn(ue),z=new Se(G,O+"leave",I,l,H),z.target=Ze,z.relatedTarget=L,G=null,ws(H)===D&&(Se=new Se(M,O+"enter",ue,l,H),Se.target=L,Se.relatedTarget=Ze,G=Se),Ze=G,I&&ue)t:{for(Se=I,M=ue,O=0,L=Se;L;L=Rr(L))O++;for(L=0,G=M;G;G=Rr(G))L++;for(;0<O-L;)Se=Rr(Se),O--;for(;0<L-O;)M=Rr(M),L--;for(;O--;){if(Se===M||M!==null&&Se===M.alternate)break t;Se=Rr(Se),M=Rr(M)}Se=null}else Se=null;I!==null&&xm(K,z,I,Se,!1),ue!==null&&Ze!==null&&xm(K,Ze,ue,Se,!0)}}e:{if(z=D?nn(D):window,I=z.nodeName&&z.nodeName.toLowerCase(),I==="select"||I==="input"&&z.type==="file")var oe=Id;else if($d(z))if(Hd)oe=P0;else{oe=B0;var Te=z0}else I=z.nodeName,!I||I.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?D&&co(D.elementType)&&(oe=Id):oe=$0;if(oe&&(oe=oe(e,D))){Pd(K,oe,l,H);break e}Te&&Te(e,z,D),e==="focusout"&&D&&z.type==="number"&&D.memoizedProps.value!=null&&oo(z,"number",z.value)}switch(Te=D?nn(D):window,e){case"focusin":($d(Te)||Te.contentEditable==="true")&&(ir=Te,_o=D,pn=null);break;case"focusout":pn=_o=ir=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Jd(K,l,H);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":Jd(K,l,H)}var he;if(vo)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else lr?zd(e,l)&&(we="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(qd&&l.locale!=="ko"&&(lr||we!=="onCompositionStart"?we==="onCompositionEnd"&&lr&&(he=Cd()):(Ya=H,po="value"in Ya?Ya.value:Ya.textContent,lr=!0)),Te=xi(D,we),0<Te.length&&(we=new Dd(we,e,null,l,H),K.push({event:we,listeners:Te}),he?we.data=he:(he=Bd(l),he!==null&&(we.data=he)))),(he=D0?U0(e,l):q0(e,l))&&(we=xi(D,"onBeforeInput"),0<we.length&&(Te=new Dd("onBeforeInput","beforeinput",null,l,H),K.push({event:Te,listeners:we}),Te.data=he)),Sg(K,e,D,l,H)}mm(K,t)})}function Hn(e,t,l){return{instance:e,listener:t,currentTarget:l}}function xi(e,t){for(var l=t+"Capture",o=[];e!==null;){var u=e,h=u.stateNode;u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=ln(e,l),u!=null&&o.unshift(Hn(e,u,h)),u=ln(e,t),u!=null&&o.push(Hn(e,u,h))),e=e.return}return o}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xm(e,t,l,o,u){for(var h=t._reactName,g=[];l!==null&&l!==o;){var y=l,k=y.alternate,D=y.stateNode;if(y=y.tag,k!==null&&k===o)break;y!==5&&y!==26&&y!==27||D===null||(k=D,u?(D=ln(l,h),D!=null&&g.unshift(Hn(l,D,k))):u||(D=ln(l,h),D!=null&&g.push(Hn(l,D,k)))),l=l.return}g.length!==0&&e.push({event:t,listeners:g})}var Cg=/\r\n?/g,Tg=/\u0000|\uFFFD/g;function gm(e){return(typeof e=="string"?e:""+e).replace(Cg,`
`).replace(Tg,"")}function bm(e,t){return t=gm(t),gm(e)===t}function gi(){}function $e(e,t,l,o,u,h){switch(l){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||sr(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&sr(e,""+o);break;case"className":kl(e,"class",o);break;case"tabIndex":kl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(e,l,o);break;case"style":Ed(e,o,h);break;case"data":if(t!=="object"){kl(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(l);break}o=Al(""+o),e.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(t!=="input"&&$e(e,t,"name",u.name,u,null),$e(e,t,"formEncType",u.formEncType,u,null),$e(e,t,"formMethod",u.formMethod,u,null),$e(e,t,"formTarget",u.formTarget,u,null)):($e(e,t,"encType",u.encType,u,null),$e(e,t,"method",u.method,u,null),$e(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(l);break}o=Al(""+o),e.setAttribute(l,o);break;case"onClick":o!=null&&(e.onclick=gi);break;case"onScroll":o!=null&&De("scroll",e);break;case"onScrollEnd":o!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=l}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}l=Al(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(l,""+o):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":o===!0?e.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(l,o):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(l,o):e.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(l):e.setAttribute(l,o);break;case"popover":De("beforetoggle",e),De("toggle",e),_l(e,"popover",o);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":_l(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=l0.get(l)||l,_l(e,l,o))}}function Xc(e,t,l,o,u,h){switch(l){case"style":Ed(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=l}}break;case"children":typeof o=="string"?sr(e,o):(typeof o=="number"||typeof o=="bigint")&&sr(e,""+o);break;case"onScroll":o!=null&&De("scroll",e);break;case"onScrollEnd":o!=null&&De("scrollend",e);break;case"onClick":o!=null&&(e.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(u=l.endsWith("Capture"),t=l.slice(2,u?l.length-7:void 0),h=e[Ot]||null,h=h!=null?h[l]:null,typeof h=="function"&&e.removeEventListener(t,h,u),typeof o=="function")){typeof h!="function"&&h!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,o,u);break e}l in e?e[l]=o:o===!0?e.setAttribute(l,""):_l(e,l,o)}}}function wt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var o=!1,u=!1,h;for(h in l)if(l.hasOwnProperty(h)){var g=l[h];if(g!=null)switch(h){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$e(e,t,h,g,l,null)}}u&&$e(e,t,"srcSet",l.srcSet,l,null),o&&$e(e,t,"src",l.src,l,null);return;case"input":De("invalid",e);var y=h=g=u=null,k=null,D=null;for(o in l)if(l.hasOwnProperty(o)){var H=l[o];if(H!=null)switch(o){case"name":u=H;break;case"type":g=H;break;case"checked":k=H;break;case"defaultChecked":D=H;break;case"value":h=H;break;case"defaultValue":y=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,t));break;default:$e(e,t,o,H,l,null)}}Nd(e,h,y,k,D,g,u,!1),Sl(e);return;case"select":De("invalid",e),o=g=h=null;for(u in l)if(l.hasOwnProperty(u)&&(y=l[u],y!=null))switch(u){case"value":h=y;break;case"defaultValue":g=y;break;case"multiple":o=y;default:$e(e,t,u,y,l,null)}t=h,l=g,e.multiple=!!o,t!=null?ar(e,!!o,t,!1):l!=null&&ar(e,!!o,l,!0);return;case"textarea":De("invalid",e),h=u=o=null;for(g in l)if(l.hasOwnProperty(g)&&(y=l[g],y!=null))switch(g){case"value":o=y;break;case"defaultValue":u=y;break;case"children":h=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:$e(e,t,g,y,l,null)}kd(e,o,u,h),Sl(e);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(o=l[k],o!=null))switch(k){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$e(e,t,k,o,l,null)}return;case"dialog":De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(o=0;o<In.length;o++)De(In[o],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in l)if(l.hasOwnProperty(D)&&(o=l[D],o!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$e(e,t,D,o,l,null)}return;default:if(co(t)){for(H in l)l.hasOwnProperty(H)&&(o=l[H],o!==void 0&&Xc(e,t,H,o,l,void 0));return}}for(y in l)l.hasOwnProperty(y)&&(o=l[y],o!=null&&$e(e,t,y,o,l,null))}function Og(e,t,l,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,g=null,y=null,k=null,D=null,H=null;for(I in l){var K=l[I];if(l.hasOwnProperty(I)&&K!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":k=K;default:o.hasOwnProperty(I)||$e(e,t,I,null,o,K)}}for(var z in o){var I=o[z];if(K=l[z],o.hasOwnProperty(z)&&(I!=null||K!=null))switch(z){case"type":h=I;break;case"name":u=I;break;case"checked":D=I;break;case"defaultChecked":H=I;break;case"value":g=I;break;case"defaultValue":y=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,t));break;default:I!==K&&$e(e,t,z,I,o,K)}}io(e,g,y,k,D,H,h,u);return;case"select":I=g=y=z=null;for(h in l)if(k=l[h],l.hasOwnProperty(h)&&k!=null)switch(h){case"value":break;case"multiple":I=k;default:o.hasOwnProperty(h)||$e(e,t,h,null,o,k)}for(u in o)if(h=o[u],k=l[u],o.hasOwnProperty(u)&&(h!=null||k!=null))switch(u){case"value":z=h;break;case"defaultValue":y=h;break;case"multiple":g=h;default:h!==k&&$e(e,t,u,h,o,k)}t=y,l=g,o=I,z!=null?ar(e,!!l,z,!1):!!o!=!!l&&(t!=null?ar(e,!!l,t,!0):ar(e,!!l,l?[]:"",!1));return;case"textarea":I=z=null;for(y in l)if(u=l[y],l.hasOwnProperty(y)&&u!=null&&!o.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:$e(e,t,y,null,o,u)}for(g in o)if(u=o[g],h=l[g],o.hasOwnProperty(g)&&(u!=null||h!=null))switch(g){case"value":z=u;break;case"defaultValue":I=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==h&&$e(e,t,g,u,o,h)}_d(e,z,I);return;case"option":for(var ue in l)if(z=l[ue],l.hasOwnProperty(ue)&&z!=null&&!o.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:$e(e,t,ue,null,o,z)}for(k in o)if(z=o[k],I=l[k],o.hasOwnProperty(k)&&z!==I&&(z!=null||I!=null))switch(k){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:$e(e,t,k,z,o,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)z=l[Se],l.hasOwnProperty(Se)&&z!=null&&!o.hasOwnProperty(Se)&&$e(e,t,Se,null,o,z);for(D in o)if(z=o[D],I=l[D],o.hasOwnProperty(D)&&z!==I&&(z!=null||I!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:$e(e,t,D,z,o,I)}return;default:if(co(t)){for(var Ze in l)z=l[Ze],l.hasOwnProperty(Ze)&&z!==void 0&&!o.hasOwnProperty(Ze)&&Xc(e,t,Ze,void 0,o,z);for(H in o)z=o[H],I=l[H],!o.hasOwnProperty(H)||z===I||z===void 0&&I===void 0||Xc(e,t,H,z,o,I);return}}for(var M in l)z=l[M],l.hasOwnProperty(M)&&z!=null&&!o.hasOwnProperty(M)&&$e(e,t,M,null,o,z);for(K in o)z=o[K],I=l[K],!o.hasOwnProperty(K)||z===I||z==null&&I==null||$e(e,t,K,z,o,I)}var Qc=null,Fc=null;function bi(e){return e.nodeType===9?e:e.ownerDocument}function ym(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wc=null;function Dg(){var e=window.event;return e&&e.type==="popstate"?e===Wc?!1:(Wc=e,!0):(Wc=null,!1)}var wm=typeof setTimeout=="function"?setTimeout:void 0,Ug=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,qg=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(e){return jm.resolve(null).then(e).catch(Mg)}:wm;function Mg(e){setTimeout(function(){throw e})}function Zc(e,t){var l=t,o=0;do{var u=l.nextSibling;if(e.removeChild(l),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(o===0){e.removeChild(u),Jn(t);return}o--}else l!=="$"&&l!=="$?"&&l!=="$!"||o++;l=u}while(l);Jn(t)}function eu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":eu(l),lo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Lg(e,t,l,o){for(;e.nodeType===1;){var u=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[rn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=ia(e.nextSibling),e===null)break}return null}function zg(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=ia(e.nextSibling),e===null))return null;return e}function ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function Nm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(t===0)return e;t--}else l==="/$"&&t++}e=e.previousSibling}return null}function _m(e,t,l){switch(t=bi(l),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}var aa=new Map,km=new Set;function yi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Ba=se.d;se.d={f:Bg,r:$g,D:Pg,C:Ig,L:Hg,m:Gg,X:Kg,S:Vg,M:Yg};function Bg(){var e=Ba.f(),t=di();return e||t}function $g(e){var t=Zs(e);t!==null&&t.tag===5&&t.type==="form"?Jh(t):Ba.r(e)}var Cr=typeof document>"u"?null:document;function Sm(e,t,l){var o=Cr;if(o&&typeof t=="string"&&t){var u=Kt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof l=="string"&&(u+='[crossorigin="'+l+'"]'),km.has(u)||(km.add(u),e={rel:e,crossOrigin:l,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),wt(t,"link",e),ft(t),o.head.appendChild(t)))}}function Pg(e){Ba.D(e),Sm("dns-prefetch",e,null)}function Ig(e,t){Ba.C(e,t),Sm("preconnect",e,t)}function Hg(e,t,l){Ba.L(e,t,l);var o=Cr;if(o&&e&&t){var u='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&l&&l.imageSrcSet?(u+='[imagesrcset="'+Kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(u+='[imagesizes="'+Kt(l.imageSizes)+'"]')):u+='[href="'+Kt(e)+'"]';var h=u;switch(t){case"style":h=Tr(e);break;case"script":h=Or(e)}aa.has(h)||(e=re({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),aa.set(h,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(Gn(h))||t==="script"&&o.querySelector(Vn(h))||(t=o.createElement("link"),wt(t,"link",e),ft(t),o.head.appendChild(t)))}}function Gg(e,t){Ba.m(e,t);var l=Cr;if(l&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Kt(o)+'"][href="'+Kt(e)+'"]',h=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Or(e)}if(!aa.has(h)&&(e=re({rel:"modulepreload",href:e},t),aa.set(h,e),l.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Vn(h)))return}o=l.createElement("link"),wt(o,"link",e),ft(o),l.head.appendChild(o)}}}function Vg(e,t,l){Ba.S(e,t,l);var o=Cr;if(o&&e){var u=er(o).hoistableStyles,h=Tr(e);t=t||"default";var g=u.get(h);if(!g){var y={loading:0,preload:null};if(g=o.querySelector(Gn(h)))y.loading=5;else{e=re({rel:"stylesheet",href:e,"data-precedence":t},l),(l=aa.get(h))&&tu(e,l);var k=g=o.createElement("link");ft(k),wt(k,"link",e),k._p=new Promise(function(D,H){k.onload=D,k.onerror=H}),k.addEventListener("load",function(){y.loading|=1}),k.addEventListener("error",function(){y.loading|=2}),y.loading|=4,vi(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:y},u.set(h,g)}}}function Kg(e,t){Ba.X(e,t);var l=Cr;if(l&&e){var o=er(l).hoistableScripts,u=Or(e),h=o.get(u);h||(h=l.querySelector(Vn(u)),h||(e=re({src:e,async:!0},t),(t=aa.get(u))&&au(e,t),h=l.createElement("script"),ft(h),wt(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(u,h))}}function Yg(e,t){Ba.M(e,t);var l=Cr;if(l&&e){var o=er(l).hoistableScripts,u=Or(e),h=o.get(u);h||(h=l.querySelector(Vn(u)),h||(e=re({src:e,async:!0,type:"module"},t),(t=aa.get(u))&&au(e,t),h=l.createElement("script"),ft(h),wt(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(u,h))}}function Em(e,t,l,o){var u=(u=fe.current)?yi(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Tr(l.href),l=er(u).hoistableStyles,o=l.get(t),o||(o={type:"style",instance:null,count:0,state:null},l.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Tr(l.href);var h=er(u).hoistableStyles,g=h.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,g),(h=u.querySelector(Gn(e)))&&!h._p&&(g.instance=h,g.state.loading=5),aa.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},aa.set(e,l),h||Xg(u,e,l,g.state))),t&&o===null)throw Error(i(528,""));return g}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Or(l),l=er(u).hoistableScripts,o=l.get(t),o||(o={type:"script",instance:null,count:0,state:null},l.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Tr(e){return'href="'+Kt(e)+'"'}function Gn(e){return'link[rel="stylesheet"]['+e+"]"}function Am(e){return re({},e,{"data-precedence":e.precedence,precedence:null})}function Xg(e,t,l,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),wt(t,"link",l),ft(t),e.head.appendChild(t))}function Or(e){return'[src="'+Kt(e)+'"]'}function Vn(e){return"script[async]"+e}function Rm(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Kt(l.href)+'"]');if(o)return t.instance=o,ft(o),o;var u=re({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ft(o),wt(o,"style",u),vi(o,l.precedence,e),t.instance=o;case"stylesheet":u=Tr(l.href);var h=e.querySelector(Gn(u));if(h)return t.state.loading|=4,t.instance=h,ft(h),h;o=Am(l),(u=aa.get(u))&&tu(o,u),h=(e.ownerDocument||e).createElement("link"),ft(h);var g=h;return g._p=new Promise(function(y,k){g.onload=y,g.onerror=k}),wt(h,"link",o),t.state.loading|=4,vi(h,l.precedence,e),t.instance=h;case"script":return h=Or(l.src),(u=e.querySelector(Vn(h)))?(t.instance=u,ft(u),u):(o=l,(u=aa.get(h))&&(o=re({},l),au(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),ft(u),wt(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,vi(o,l.precedence,e));return t.instance}function vi(e,t,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,h=u,g=0;g<o.length;g++){var y=o[g];if(y.dataset.precedence===t)h=y;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function au(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var wi=null;function Cm(e,t,l){if(wi===null){var o=new Map,u=wi=new Map;u.set(l,o)}else u=wi,o=u.get(l),o||(o=new Map,u.set(l,o));if(o.has(e))return o;for(o.set(e,null),l=l.getElementsByTagName(e),u=0;u<l.length;u++){var h=l[u];if(!(h[rn]||h[St]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(t)||"";g=e+g;var y=o.get(g);y?y.push(h):o.set(g,[h])}}return o}function Tm(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function Qg(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Om(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Kn=null;function Fg(){}function Jg(e,t,l){if(Kn===null)throw Error(i(475));var o=Kn;if(t.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var u=Tr(l.href),h=e.querySelector(Gn(u));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=ji.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=h,ft(h);return}h=e.ownerDocument||e,l=Am(l),(u=aa.get(u))&&tu(l,u),h=h.createElement("link"),ft(h);var g=h;g._p=new Promise(function(y,k){g.onload=y,g.onerror=k}),wt(h,"link",l),t.instance=h}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(o.count++,t=ji.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}function Wg(){if(Kn===null)throw Error(i(475));var e=Kn;return e.stylesheets&&e.count===0&&su(e,e.stylesheets),0<e.count?function(t){var l=setTimeout(function(){if(e.stylesheets&&su(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(l)}}:null}function ji(){if(this.count--,this.count===0){if(this.stylesheets)su(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ni=null;function su(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ni=new Map,t.forEach(Zg,e),Ni=null,ji.call(e))}function Zg(e,t){if(!(t.state.loading&4)){var l=Ni.get(e);if(l)var o=l.get(null);else{l=new Map,Ni.set(e,l);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var g=u[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(l.set(g.dataset.precedence,g),o=g)}o&&l.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),h=l.get(g)||o,h===o&&l.set(null,u),l.set(g,u),this.count++,o=ji.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var Yn={$$typeof:_,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function eb(e,t,l,o,u,h,g,y){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ro(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ro(0),this.hiddenUpdates=ro(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Dm(e,t,l,o,u,h,g,y,k,D,H,K){return e=new eb(e,t,l,g,y,k,D,K),t=1,h===!0&&(t|=24),h=ea(3,null,null,t),e.current=h,h.stateNode=e,t=qo(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:o,isDehydrated:l,cache:t},pc(h),e}function Um(e){return e?(e=ur,e):ur}function qm(e,t,l,o,u,h){u=Um(u),o.context===null?o.context=u:o.pendingContext=u,o=ts(t),o.payload={element:l},h=h===void 0?null:h,h!==null&&(o.callback=h),l=as(e,o,t),l!==null&&(Tt(l,e,t),Cn(l,e,t))}function Mm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function ru(e,t){Mm(e,t),(e=e.alternate)&&Mm(e,t)}function Lm(e){if(e.tag===13){var t=Xa(e,67108864);t!==null&&Tt(t,e,67108864),ru(e,67108864)}}var _i=!0;function tb(e,t,l,o){var u=q.T;q.T=null;var h=se.p;try{se.p=2,nu(e,t,l,o)}finally{se.p=h,q.T=u}}function ab(e,t,l,o){var u=q.T;q.T=null;var h=se.p;try{se.p=8,nu(e,t,l,o)}finally{se.p=h,q.T=u}}function nu(e,t,l,o){if(_i){var u=lu(o);if(u===null)Yc(e,t,o,ki,l),Bm(e,o);else if(rb(u,e,t,l,o))o.stopPropagation();else if(Bm(e,o),t&4&&-1<sb.indexOf(e)){for(;u!==null;){var h=Zs(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=vs(h.pendingLanes);if(g!==0){var y=h;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var k=1<<31-kt(g);y.entanglements[1]|=k,g&=~k}wa(h),(Xe&6)===0&&(oi=Gt()+500,Pn(0))}}break;case 13:y=Xa(h,2),y!==null&&Tt(y,h,2),di(),ru(h,2)}if(h=lu(o),h===null&&Yc(e,t,o,ki,l),h===u)break;u=h}u!==null&&o.stopPropagation()}else Yc(e,t,o,null,l)}}function lu(e){return e=ho(e),iu(e)}var ki=null;function iu(e){if(ki=null,e=ws(e),e!==null){var t=le(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=ye(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ki=e,null}function zm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ao()){case B:return 2;case ze:return 8;case _t:case bl:return 32;case yl:return 268435456;default:return 32}default:return 32}}var ou=!1,cs=null,us=null,ds=null,Xn=new Map,Qn=new Map,hs=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bm(e,t){switch(e){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Xn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(t.pointerId)}}function Fn(e,t,l,o,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:l,eventSystemFlags:o,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Zs(t),t!==null&&Lm(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function rb(e,t,l,o,u){switch(t){case"focusin":return cs=Fn(cs,e,t,l,o,u),!0;case"dragenter":return us=Fn(us,e,t,l,o,u),!0;case"mouseover":return ds=Fn(ds,e,t,l,o,u),!0;case"pointerover":var h=u.pointerId;return Xn.set(h,Fn(Xn.get(h)||null,e,t,l,o,u)),!0;case"gotpointercapture":return h=u.pointerId,Qn.set(h,Fn(Qn.get(h)||null,e,t,l,o,u)),!0}return!1}function $m(e){var t=ws(e.target);if(t!==null){var l=le(t);if(l!==null){if(t=l.tag,t===13){if(t=ye(l),t!==null){e.blockedOn=t,Wx(e.priority,function(){if(l.tag===13){var o=Bt(),u=Xa(l,o);u!==null&&Tt(u,l,o),ru(l,o)}});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=lu(e.nativeEvent);if(l===null){l=e.nativeEvent;var o=new l.constructor(l.type,l);uo=o,l.target.dispatchEvent(o),uo=null}else return t=Zs(l),t!==null&&Lm(t),e.blockedOn=l,!1;t.shift()}return!0}function Pm(e,t,l){Si(e)&&l.delete(t)}function nb(){ou=!1,cs!==null&&Si(cs)&&(cs=null),us!==null&&Si(us)&&(us=null),ds!==null&&Si(ds)&&(ds=null),Xn.forEach(Pm),Qn.forEach(Pm)}function Ei(e,t){e.blockedOn===t&&(e.blockedOn=null,ou||(ou=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nb)))}var Ai=null;function Im(e){Ai!==e&&(Ai=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ai===e&&(Ai=null);for(var t=0;t<e.length;t+=3){var l=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(iu(o||l)===null)continue;break}var h=Zs(l);h!==null&&(e.splice(t,3),t-=3,Jo(h,{pending:!0,data:u,method:l.method,action:o},o,u))}}))}function Jn(e){function t(k){return Ei(k,e)}cs!==null&&Ei(cs,e),us!==null&&Ei(us,e),ds!==null&&Ei(ds,e),Xn.forEach(t),Qn.forEach(t);for(var l=0;l<hs.length;l++){var o=hs[l];o.blockedOn===e&&(o.blockedOn=null)}for(;0<hs.length&&(l=hs[0],l.blockedOn===null);)$m(l),l.blockedOn===null&&hs.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var u=l[o],h=l[o+1],g=u[Ot]||null;if(typeof h=="function")g||Im(l);else if(g){var y=null;if(h&&h.hasAttribute("formAction")){if(u=h,g=h[Ot]||null)y=g.formAction;else if(iu(u)!==null)continue}else y=g.action;typeof y=="function"?l[o+1]=y:(l.splice(o,3),o-=3),Im(l)}}}function cu(e){this._internalRoot=e}Ri.prototype.render=cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var l=t.current,o=Bt();qm(l,o,e,t,null,null)},Ri.prototype.unmount=cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Er(),qm(e.current,2,null,e,null,null),di(),t[Ws]=null}};function Ri(e){this._internalRoot=e}Ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=pd();e={blockedOn:null,target:e,priority:t};for(var l=0;l<hs.length&&t!==0&&t<hs[l].priority;l++);hs.splice(l,0,e),l===0&&$m(e)}};var Hm=a.version;if(Hm!=="19.0.0")throw Error(i(527,Hm,"19.0.0"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=P(t),e=e!==null?ae(e):null,e=e===null?null:e.stateNode,e};var lb={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:q,findFiberByHostInstance:ws,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ci=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ci.isDisabled&&Ci.supportsFiber)try{Ga=Ci.inject(lb),ht=Ci}catch{}}return Zn.createRoot=function(e,t){if(!c(e))throw Error(i(299));var l=!1,o="",u=nf,h=lf,g=of,y=null;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(y=t.unstable_transitionCallbacks)),t=Dm(e,1,!1,null,null,l,o,u,h,g,y,null),e[Ws]=t.current,Kc(e.nodeType===8?e.parentNode:e),new cu(t)},Zn.hydrateRoot=function(e,t,l){if(!c(e))throw Error(i(299));var o=!1,u="",h=nf,g=lf,y=of,k=null,D=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(u=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(g=l.onCaughtError),l.onRecoverableError!==void 0&&(y=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(D=l.formState)),t=Dm(e,1,!0,t,l??null,o,u,h,g,y,k,D),t.context=Um(null),l=t.current,o=Bt(),u=ts(o),u.callback=null,as(l,u,o),t.current.lanes=o,sn(t,o),wa(t),e[Ws]=t.current,Kc(e),new Ri(t)},Zn.version="19.0.0",Zn}var Zm;function gb(){if(Zm)return hu.exports;Zm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),hu.exports=xb(),hu.exports}var bb=gb();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ep="popstate";function yb(s={}){function a(i,c){let{pathname:d,search:f,hash:x}=i.location;return Ou("",{pathname:d,search:f,hash:x},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:ll(c)}return wb(a,n,null,s)}function Ke(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function fa(s,a){if(!s){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function vb(){return Math.random().toString(36).substring(2,10)}function tp(s,a){return{usr:s.state,key:s.key,idx:a}}function Ou(s,a,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof a=="string"?Qr(a):a,state:n,key:a&&a.key||i||vb()}}function ll({pathname:s="/",search:a="",hash:n=""}){return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Qr(s){let a={};if(s){let n=s.indexOf("#");n>=0&&(a.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(a.search=s.substring(i),s=s.substring(0,i)),s&&(a.pathname=s)}return a}function wb(s,a,n,i={}){let{window:c=document.defaultView,v5Compat:d=!1}=i,f=c.history,x="POP",m=null,p=b();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function b(){return(f.state||{idx:null}).idx}function N(){x="POP";let C=b(),U=C==null?null:C-p;p=C,m&&m({action:x,location:E.location,delta:U})}function j(C,U){x="PUSH";let R=Ou(E.location,C,U);p=b()+1;let A=tp(R,p),$=E.createHref(R);try{f.pushState(A,"",$)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;c.location.assign($)}d&&m&&m({action:x,location:E.location,delta:1})}function _(C,U){x="REPLACE";let R=Ou(E.location,C,U);p=b();let A=tp(R,p),$=E.createHref(R);f.replaceState(A,"",$),d&&m&&m({action:x,location:E.location,delta:0})}function S(C){let U=c.location.origin!=="null"?c.location.origin:c.location.href,R=typeof C=="string"?C:ll(C);return R=R.replace(/ $/,"%20"),Ke(U,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,U)}let E={get action(){return x},get location(){return s(c,f)},listen(C){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(ep,N),m=C,()=>{c.removeEventListener(ep,N),m=null}},createHref(C){return a(c,C)},createURL:S,encodeLocation(C){let U=S(C);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:j,replace:_,go(C){return f.go(C)}};return E}function $p(s,a,n="/"){return jb(s,a,n,!1)}function jb(s,a,n,i){let c=typeof a=="string"?Qr(a):a,d=gs(c.pathname||"/",n);if(d==null)return null;let f=Pp(s);Nb(f);let x=null;for(let m=0;x==null&&m<f.length;++m){let p=Ub(d);x=Ob(f[m],p,i)}return x}function Pp(s,a=[],n=[],i=""){let c=(d,f,x)=>{let m={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};m.relativePath.startsWith("/")&&(Ke(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=Pa([i,m.relativePath]),b=n.concat(m);d.children&&d.children.length>0&&(Ke(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Pp(d.children,a,b,p)),!(d.path==null&&!d.index)&&a.push({path:p,score:Cb(p,d.index),routesMeta:b})};return s.forEach((d,f)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))c(d,f);else for(let m of Ip(d.path))c(d,f,m)}),a}function Ip(s){let a=s.split("/");if(a.length===0)return[];let[n,...i]=a,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let f=Ip(i.join("/")),x=[];return x.push(...f.map(m=>m===""?d:[d,m].join("/"))),c&&x.push(...f),x.map(m=>s.startsWith("/")&&m===""?"/":m)}function Nb(s){s.sort((a,n)=>a.score!==n.score?n.score-a.score:Tb(a.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var _b=/^:[\w-]+$/,kb=3,Sb=2,Eb=1,Ab=10,Rb=-2,ap=s=>s==="*";function Cb(s,a){let n=s.split("/"),i=n.length;return n.some(ap)&&(i+=Rb),a&&(i+=Sb),n.filter(c=>!ap(c)).reduce((c,d)=>c+(_b.test(d)?kb:d===""?Eb:Ab),i)}function Tb(s,a){return s.length===a.length&&s.slice(0,-1).every((i,c)=>i===a[c])?s[s.length-1]-a[a.length-1]:0}function Ob(s,a,n=!1){let{routesMeta:i}=s,c={},d="/",f=[];for(let x=0;x<i.length;++x){let m=i[x],p=x===i.length-1,b=d==="/"?a:a.slice(d.length)||"/",N=$i({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),j=m.route;if(!N&&p&&n&&!i[i.length-1].route.index&&(N=$i({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!N)return null;Object.assign(c,N.params),f.push({params:c,pathname:Pa([d,N.pathname]),pathnameBase:zb(Pa([d,N.pathnameBase])),route:j}),N.pathnameBase!=="/"&&(d=Pa([d,N.pathnameBase]))}return f}function $i(s,a){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=Db(s.path,s.caseSensitive,s.end),c=a.match(n);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),x=c.slice(1);return{params:i.reduce((p,{paramName:b,isOptional:N},j)=>{if(b==="*"){let S=x[j]||"";f=d.slice(0,d.length-S.length).replace(/(.)\/+$/,"$1")}const _=x[j];return N&&!_?p[b]=void 0:p[b]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:s}}function Db(s,a=!1,n=!0){fa(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],c="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,x,m)=>(i.push({paramName:x,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),c+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":s!==""&&s!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Ub(s){try{return s.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return fa(!1,`The URL path "${s}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),s}}function gs(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let n=a.endsWith("/")?a.length-1:a.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function qb(s,a="/"){let{pathname:n,search:i="",hash:c=""}=typeof s=="string"?Qr(s):s;return{pathname:n?n.startsWith("/")?n:Mb(n,a):a,search:Bb(i),hash:$b(c)}}function Mb(s,a){let n=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function xu(s,a,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lb(s){return s.filter((a,n)=>n===0||a.route.path&&a.route.path.length>0)}function Fu(s){let a=Lb(s);return a.map((n,i)=>i===a.length-1?n.pathname:n.pathnameBase)}function Ju(s,a,n,i=!1){let c;typeof s=="string"?c=Qr(s):(c={...s},Ke(!c.pathname||!c.pathname.includes("?"),xu("?","pathname","search",c)),Ke(!c.pathname||!c.pathname.includes("#"),xu("#","pathname","hash",c)),Ke(!c.search||!c.search.includes("#"),xu("#","search","hash",c)));let d=s===""||c.pathname==="",f=d?"/":c.pathname,x;if(f==null)x=n;else{let N=a.length-1;if(!i&&f.startsWith("..")){let j=f.split("/");for(;j[0]==="..";)j.shift(),N-=1;c.pathname=j.join("/")}x=N>=0?a[N]:"/"}let m=qb(c,x),p=f&&f!=="/"&&f.endsWith("/"),b=(d||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}var Pa=s=>s.join("/").replace(/\/\/+/g,"/"),zb=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Bb=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,$b=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Pb(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Hp=["POST","PUT","PATCH","DELETE"];new Set(Hp);var Ib=["GET",...Hp];new Set(Ib);var Fr=v.createContext(null);Fr.displayName="DataRouter";var Vi=v.createContext(null);Vi.displayName="DataRouterState";var Gp=v.createContext({isTransitioning:!1});Gp.displayName="ViewTransition";var Hb=v.createContext(new Map);Hb.displayName="Fetchers";var Gb=v.createContext(null);Gb.displayName="Await";var ma=v.createContext(null);ma.displayName="Navigation";var fl=v.createContext(null);fl.displayName="Location";var pa=v.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var Wu=v.createContext(null);Wu.displayName="RouteError";function Vb(s,{relative:a}={}){Ke(Jr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=v.useContext(ma),{hash:c,pathname:d,search:f}=pl(s,{relative:a}),x=d;return n!=="/"&&(x=d==="/"?n:Pa([n,d])),i.createHref({pathname:x,search:f,hash:c})}function Jr(){return v.useContext(fl)!=null}function Ia(){return Ke(Jr(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(fl).location}var Vp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kp(s){v.useContext(ma).static||v.useLayoutEffect(s)}function ml(){let{isDataRoute:s}=v.useContext(pa);return s?ry():Kb()}function Kb(){Ke(Jr(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(Fr),{basename:a,navigator:n}=v.useContext(ma),{matches:i}=v.useContext(pa),{pathname:c}=Ia(),d=JSON.stringify(Fu(i)),f=v.useRef(!1);return Kp(()=>{f.current=!0}),v.useCallback((m,p={})=>{if(fa(f.current,Vp),!f.current)return;if(typeof m=="number"){n.go(m);return}let b=Ju(m,JSON.parse(d),c,p.relative==="path");s==null&&a!=="/"&&(b.pathname=b.pathname==="/"?a:Pa([a,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[a,n,d,c,s])}v.createContext(null);function Yp(){let{matches:s}=v.useContext(pa),a=s[s.length-1];return a?a.params:{}}function pl(s,{relative:a}={}){let{matches:n}=v.useContext(pa),{pathname:i}=Ia(),c=JSON.stringify(Fu(n));return v.useMemo(()=>Ju(s,JSON.parse(c),i,a==="path"),[s,c,i,a])}function Yb(s,a){return Xp(s,a)}function Xp(s,a,n,i){var U;Ke(Jr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=v.useContext(ma),{matches:d}=v.useContext(pa),f=d[d.length-1],x=f?f.params:{},m=f?f.pathname:"/",p=f?f.pathnameBase:"/",b=f&&f.route;{let R=b&&b.path||"";Qp(m,!b||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let N=Ia(),j;if(a){let R=typeof a=="string"?Qr(a):a;Ke(p==="/"||((U=R.pathname)==null?void 0:U.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),j=R}else j=N;let _=j.pathname||"/",S=_;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=$p(s,{pathname:S});fa(b||E!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),fa(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Wb(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},x,R.params),pathname:Pa([p,c.encodeLocation?c.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Pa([p,c.encodeLocation?c.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,n,i);return a&&C?v.createElement(fl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},C):C}function Xb(){let s=sy(),a=Pb(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",s),f=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:d},"ErrorBoundary")," or"," ",v.createElement("code",{style:d},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},a),n?v.createElement("pre",{style:c},n):null,f)}var Qb=v.createElement(Xb,null),Fb=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?v.createElement(pa.Provider,{value:this.props.routeContext},v.createElement(Wu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jb({routeContext:s,match:a,children:n}){let i=v.useContext(Fr);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),v.createElement(pa.Provider,{value:s},n)}function Wb(s,a=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(a.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,d=n==null?void 0:n.errors;if(d!=null){let m=c.findIndex(p=>p.route.id&&(d==null?void 0:d[p.route.id])!==void 0);Ke(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,m+1))}let f=!1,x=-1;if(n)for(let m=0;m<c.length;m++){let p=c[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(x=m),p.route.id){let{loaderData:b,errors:N}=n,j=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!N||N[p.route.id]===void 0);if(p.route.lazy||j){f=!0,x>=0?c=c.slice(0,x+1):c=[c[0]];break}}}return c.reduceRight((m,p,b)=>{let N,j=!1,_=null,S=null;n&&(N=d&&p.route.id?d[p.route.id]:void 0,_=p.route.errorElement||Qb,f&&(x<0&&b===0?(Qp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,S=null):x===b&&(j=!0,S=p.route.hydrateFallbackElement||null)));let E=a.concat(c.slice(0,b+1)),C=()=>{let U;return N?U=_:j?U=S:p.route.Component?U=v.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=m,v.createElement(Jb,{match:p,routeContext:{outlet:m,matches:E,isDataRoute:n!=null},children:U})};return n&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?v.createElement(Fb,{location:n.location,revalidation:n.revalidation,component:_,error:N,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}function Zu(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zb(s){let a=v.useContext(Fr);return Ke(a,Zu(s)),a}function ey(s){let a=v.useContext(Vi);return Ke(a,Zu(s)),a}function ty(s){let a=v.useContext(pa);return Ke(a,Zu(s)),a}function ed(s){let a=ty(s),n=a.matches[a.matches.length-1];return Ke(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function ay(){return ed("useRouteId")}function sy(){var i;let s=v.useContext(Wu),a=ey("useRouteError"),n=ed("useRouteError");return s!==void 0?s:(i=a.errors)==null?void 0:i[n]}function ry(){let{router:s}=Zb("useNavigate"),a=ed("useNavigate"),n=v.useRef(!1);return Kp(()=>{n.current=!0}),v.useCallback(async(c,d={})=>{fa(n.current,Vp),n.current&&(typeof c=="number"?s.navigate(c):await s.navigate(c,{fromRouteId:a,...d}))},[s,a])}var sp={};function Qp(s,a,n){!a&&!sp[s]&&(sp[s]=!0,fa(!1,n))}v.memo(ny);function ny({routes:s,future:a,state:n}){return Xp(s,void 0,n,a)}function et({to:s,replace:a,state:n,relative:i}){Ke(Jr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=v.useContext(ma);fa(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=v.useContext(pa),{pathname:f}=Ia(),x=ml(),m=Ju(s,Fu(d),f,i==="path"),p=JSON.stringify(m);return v.useEffect(()=>{x(JSON.parse(p),{replace:a,state:n,relative:i})},[x,p,i,a,n]),null}function Qe(s){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ly({basename:s="/",children:a=null,location:n,navigationType:i="POP",navigator:c,static:d=!1}){Ke(!Jr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),x=v.useMemo(()=>({basename:f,navigator:c,static:d,future:{}}),[f,c,d]);typeof n=="string"&&(n=Qr(n));let{pathname:m="/",search:p="",hash:b="",state:N=null,key:j="default"}=n,_=v.useMemo(()=>{let S=gs(m,f);return S==null?null:{location:{pathname:S,search:p,hash:b,state:N,key:j},navigationType:i}},[f,m,p,b,N,j,i]);return fa(_!=null,`<Router basename="${f}"> is not able to match the URL "${m}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:v.createElement(ma.Provider,{value:x},v.createElement(fl.Provider,{children:a,value:_}))}function iy({children:s,location:a}){return Yb(Du(s),a)}function Du(s,a=[]){let n=[];return v.Children.forEach(s,(i,c)=>{if(!v.isValidElement(i))return;let d=[...a,c];if(i.type===v.Fragment){n.push.apply(n,Du(i.props.children,d));return}Ke(i.type===Qe,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Du(i.props.children,d)),n.push(f)}),n}var Li="get",zi="application/x-www-form-urlencoded";function Ki(s){return s!=null&&typeof s.tagName=="string"}function oy(s){return Ki(s)&&s.tagName.toLowerCase()==="button"}function cy(s){return Ki(s)&&s.tagName.toLowerCase()==="form"}function uy(s){return Ki(s)&&s.tagName.toLowerCase()==="input"}function dy(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function hy(s,a){return s.button===0&&(!a||a==="_self")&&!dy(s)}var Ti=null;function fy(){if(Ti===null)try{new FormData(document.createElement("form"),0),Ti=!1}catch{Ti=!0}return Ti}var my=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gu(s){return s!=null&&!my.has(s)?(fa(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zi}"`),null):s}function py(s,a){let n,i,c,d,f;if(cy(s)){let x=s.getAttribute("action");i=x?gs(x,a):null,n=s.getAttribute("method")||Li,c=gu(s.getAttribute("enctype"))||zi,d=new FormData(s)}else if(oy(s)||uy(s)&&(s.type==="submit"||s.type==="image")){let x=s.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||x.getAttribute("action");if(i=m?gs(m,a):null,n=s.getAttribute("formmethod")||x.getAttribute("method")||Li,c=gu(s.getAttribute("formenctype"))||gu(x.getAttribute("enctype"))||zi,d=new FormData(x,s),!fy()){let{name:p,type:b,value:N}=s;if(b==="image"){let j=p?`${p}.`:"";d.append(`${j}x`,"0"),d.append(`${j}y`,"0")}else p&&d.append(p,N)}}else{if(Ki(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Li,i=null,c=zi,f=s}return d&&c==="text/plain"&&(f=d,d=void 0),{action:i,method:n.toLowerCase(),encType:c,formData:d,body:f}}function td(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}async function xy(s,a){if(s.id in a)return a[s.id];try{let n=await import(s.module);return a[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gy(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function by(s,a,n){let i=await Promise.all(s.map(async c=>{let d=a.routes[c.route.id];if(d){let f=await xy(d,n);return f.links?f.links():[]}return[]}));return jy(i.flat(1).filter(gy).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function rp(s,a,n,i,c,d){let f=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,x=(m,p)=>{var b;return n[p].pathname!==m.pathname||((b=n[p].route.path)==null?void 0:b.endsWith("*"))&&n[p].params["*"]!==m.params["*"]};return d==="assets"?a.filter((m,p)=>f(m,p)||x(m,p)):d==="data"?a.filter((m,p)=>{var N;let b=i.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(f(m,p)||x(m,p))return!0;if(m.route.shouldRevalidate){let j=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((N=n[0])==null?void 0:N.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function yy(s,a){return vy(s.map(n=>{let i=a.routes[n.route.id];if(!i)return[];let c=[i.module];return i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function vy(s){return[...new Set(s)]}function wy(s){let a={},n=Object.keys(s).sort();for(let i of n)a[i]=s[i];return a}function jy(s,a){let n=new Set;return new Set(a),s.reduce((i,c)=>{let d=JSON.stringify(wy(c));return n.has(d)||(n.add(d),i.push({key:d,link:c})),i},[])}function Ny(s){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname="_root.data":a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function _y(){let s=v.useContext(Fr);return td(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function ky(){let s=v.useContext(Vi);return td(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ad=v.createContext(void 0);ad.displayName="FrameworkContext";function Fp(){let s=v.useContext(ad);return td(s,"You must render this element inside a <HydratedRouter> element"),s}function Sy(s,a){let n=v.useContext(ad),[i,c]=v.useState(!1),[d,f]=v.useState(!1),{onFocus:x,onBlur:m,onMouseEnter:p,onMouseLeave:b,onTouchStart:N}=a,j=v.useRef(null);v.useEffect(()=>{if(s==="render"&&f(!0),s==="viewport"){let E=U=>{U.forEach(R=>{f(R.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return j.current&&C.observe(j.current),()=>{C.disconnect()}}},[s]),v.useEffect(()=>{if(i){let E=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(E)}}},[i]);let _=()=>{c(!0)},S=()=>{c(!1),f(!1)};return n?s!=="intent"?[d,j,{}]:[d,j,{onFocus:el(x,_),onBlur:el(m,S),onMouseEnter:el(p,_),onMouseLeave:el(b,S),onTouchStart:el(N,_)}]:[!1,j,{}]}function el(s,a){return n=>{s&&s(n),n.defaultPrevented||a(n)}}function Ey({page:s,...a}){let{router:n}=_y(),i=v.useMemo(()=>$p(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?v.createElement(Ry,{page:s,matches:i,...a}):null}function Ay(s){let{manifest:a,routeModules:n}=Fp(),[i,c]=v.useState([]);return v.useEffect(()=>{let d=!1;return by(s,a,n).then(f=>{d||c(f)}),()=>{d=!0}},[s,a,n]),i}function Ry({page:s,matches:a,...n}){let i=Ia(),{manifest:c,routeModules:d}=Fp(),{loaderData:f,matches:x}=ky(),m=v.useMemo(()=>rp(s,a,x,c,i,"data"),[s,a,x,c,i]),p=v.useMemo(()=>rp(s,a,x,c,i,"assets"),[s,a,x,c,i]),b=v.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let _=new Set,S=!1;if(a.forEach(C=>{var R;let U=c.routes[C.route.id];!U||!U.hasLoader||(!m.some(A=>A.route.id===C.route.id)&&C.route.id in f&&((R=d[C.route.id])!=null&&R.shouldRevalidate)||U.hasClientLoader?S=!0:_.add(C.route.id))}),_.size===0)return[];let E=Ny(s);return S&&_.size>0&&E.searchParams.set("_routes",a.filter(C=>_.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[f,i,c,m,a,s,d]),N=v.useMemo(()=>yy(p,c),[p,c]),j=Ay(p);return v.createElement(v.Fragment,null,b.map(_=>v.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),N.map(_=>v.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),j.map(({key:_,link:S})=>v.createElement("link",{key:_,...S})))}function Cy(...s){return a=>{s.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}var Jp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jp&&(window.__reactRouterVersion="7.1.1")}catch{}function Ty({basename:s,children:a,window:n}){let i=v.useRef();i.current==null&&(i.current=yb({window:n,v5Compat:!0}));let c=i.current,[d,f]=v.useState({action:c.action,location:c.location}),x=v.useCallback(m=>{v.startTransition(()=>f(m))},[f]);return v.useLayoutEffect(()=>c.listen(x),[c,x]),v.createElement(ly,{basename:s,children:a,location:d.location,navigationType:d.action,navigator:c})}var Wp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Js=v.forwardRef(function({onClick:a,discover:n="render",prefetch:i="none",relative:c,reloadDocument:d,replace:f,state:x,target:m,to:p,preventScrollReset:b,viewTransition:N,...j},_){let{basename:S}=v.useContext(ma),E=typeof p=="string"&&Wp.test(p),C,U=!1;if(typeof p=="string"&&E&&(C=p,Jp))try{let q=new URL(window.location.href),re=p.startsWith("//")?new URL(q.protocol+p):new URL(p),me=gs(re.pathname,S);re.origin===q.origin&&me!=null?p=me+re.search+re.hash:U=!0}catch{fa(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=Vb(p,{relative:c}),[A,$,Y]=Sy(i,j),te=qy(p,{replace:f,state:x,target:m,preventScrollReset:b,relative:c,viewTransition:N});function T(q){a&&a(q),q.defaultPrevented||te(q)}let V=v.createElement("a",{...j,...Y,href:C||R,onClick:U||d?a:T,ref:Cy(_,$),target:m,"data-discover":!E&&n==="render"?"true":void 0});return A&&!E?v.createElement(v.Fragment,null,V,v.createElement(Ey,{page:R})):V});Js.displayName="Link";var Oy=v.forwardRef(function({"aria-current":a="page",caseSensitive:n=!1,className:i="",end:c=!1,style:d,to:f,viewTransition:x,children:m,...p},b){let N=pl(f,{relative:p.relative}),j=Ia(),_=v.useContext(Vi),{navigator:S,basename:E}=v.useContext(ma),C=_!=null&&$y(N)&&x===!0,U=S.encodeLocation?S.encodeLocation(N).pathname:N.pathname,R=j.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(R=R.toLowerCase(),A=A?A.toLowerCase():null,U=U.toLowerCase()),A&&E&&(A=gs(A,E)||A);const $=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Y=R===U||!c&&R.startsWith(U)&&R.charAt($)==="/",te=A!=null&&(A===U||!c&&A.startsWith(U)&&A.charAt(U.length)==="/"),T={isActive:Y,isPending:te,isTransitioning:C},V=Y?a:void 0,q;typeof i=="function"?q=i(T):q=[i,Y?"active":null,te?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let re=typeof d=="function"?d(T):d;return v.createElement(Js,{...p,"aria-current":V,className:q,ref:b,style:re,to:f,viewTransition:x},typeof m=="function"?m(T):m)});Oy.displayName="NavLink";var Dy=v.forwardRef(({discover:s="render",fetcherKey:a,navigate:n,reloadDocument:i,replace:c,state:d,method:f=Li,action:x,onSubmit:m,relative:p,preventScrollReset:b,viewTransition:N,...j},_)=>{let S=zy(),E=By(x,{relative:p}),C=f.toLowerCase()==="get"?"get":"post",U=typeof x=="string"&&Wp.test(x),R=A=>{if(m&&m(A),A.defaultPrevented)return;A.preventDefault();let $=A.nativeEvent.submitter,Y=($==null?void 0:$.getAttribute("formmethod"))||f;S($||A.currentTarget,{fetcherKey:a,method:Y,navigate:n,replace:c,state:d,relative:p,preventScrollReset:b,viewTransition:N})};return v.createElement("form",{ref:_,method:C,action:E,onSubmit:i?m:R,...j,"data-discover":!U&&s==="render"?"true":void 0})});Dy.displayName="Form";function Uy(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zp(s){let a=v.useContext(Fr);return Ke(a,Uy(s)),a}function qy(s,{target:a,replace:n,state:i,preventScrollReset:c,relative:d,viewTransition:f}={}){let x=ml(),m=Ia(),p=pl(s,{relative:d});return v.useCallback(b=>{if(hy(b,a)){b.preventDefault();let N=n!==void 0?n:ll(m)===ll(p);x(s,{replace:N,state:i,preventScrollReset:c,relative:d,viewTransition:f})}},[m,x,p,n,i,a,s,c,d,f])}var My=0,Ly=()=>`__${String(++My)}__`;function zy(){let{router:s}=Zp("useSubmit"),{basename:a}=v.useContext(ma),n=ay();return v.useCallback(async(i,c={})=>{let{action:d,method:f,encType:x,formData:m,body:p}=py(i,a);if(c.navigate===!1){let b=c.fetcherKey||Ly();await s.fetch(b,n,c.action||d,{preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||f,formEncType:c.encType||x,flushSync:c.flushSync})}else await s.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||f,formEncType:c.encType||x,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,a,n])}function By(s,{relative:a}={}){let{basename:n}=v.useContext(ma),i=v.useContext(pa);Ke(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),d={...pl(s||".",{relative:a})},f=Ia();if(s==null){d.search=f.search;let x=new URLSearchParams(d.search),m=x.getAll("index");if(m.some(b=>b==="")){x.delete("index"),m.filter(N=>N).forEach(N=>x.append("index",N));let b=x.toString();d.search=b?`?${b}`:""}}return(!s||s===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:Pa([n,d.pathname])),ll(d)}function $y(s,a={}){let n=v.useContext(Gp);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Zp("useViewTransitionState"),c=pl(s,{relative:a.relative});if(!n.isTransitioning)return!1;let d=gs(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=gs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return $i(c.pathname,f)!=null||$i(c.pathname,d)!=null}new TextEncoder;var xe=(s=>(s.ADMIN="ADMIN",s.SELLER="SELLER",s.WAREHOUSE="WAREHOUSE",s.WAREHOUSE_SUB="WAREHOUSE_SUB",s.FINANCE="FINANCE",s))(xe||{});const tl={id:"4829",name:"Juan Prez",email:"juan.perez@pintamax.com",role:xe.SELLER,avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuCqzqjE92fmheEpEczxTqJWluCopR0gTexAmLRJ-zcyKONanzYxVAfuhPPDkakFqCAT_CWP8lcsFbtdZR21CtzlPCoBnetqdCx9NA9PrQDJNTHMdgesw62auo9qcE56oBP8ZrLiLfqf7ztwkjj53jRfsMxsruqk_ywr-smJjlS_JYjocwRg_uc9NukGBqKEnxpGnXA5wkuzQ8BfE_OMkYln8hoTVeinp7pjIpie-4blhF8pMOxgb2DW2noHIoF1C8o1iK7jLTpLQS0",branchId:"BR-CENTRO"};xe.WAREHOUSE;xe.FINANCE;const Py=({onLogin:s})=>{const[a,n]=v.useState(""),[i,c]=v.useState(""),[d,f]=v.useState(!1),x=m=>{m.preventDefault(),a.includes("admin")?s({...tl,role:xe.ADMIN,name:"Administrador"}):a.includes("bodega")?s({...tl,role:xe.WAREHOUSE,name:"Encargado Bodega",branchId:"BR-MAIN",id:"WH-001"}):a.includes("subencargado")?s({...tl,role:xe.WAREHOUSE_SUB,name:"Subencargado Prueba",branchId:"BR-MAIN",id:"SUB-001"}):a.includes("contador")?s({...tl,role:xe.FINANCE,name:"Contador de Pruebas",branchId:"BR-MAIN",id:"ACC-001"}):s(tl)};return r.jsxs("div",{className:"relative flex min-h-screen w-full flex-col lg:flex-row bg-background-light dark:bg-background-dark",children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-slate-900 flex-col justify-end overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60 transition-transform duration-700 hover:scale-105",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuCrMMO43Jn3wJiUKsEM4ff3HyKxBGoUJByS882uUdCgnF5IxUfPwkeJiql99P1vJW2ff4GDByADO4-mH8OoOp3a1z_MwsJkAwa536QhdK6sbrDCn3assu6UbPriyfq-F9zHD8RDyYDB4OKx23KOgkLBQzEKS-eXFNuQbQnZSHYABiz3w59G6bqWq0oU2t2wa5-HuCAAhzr_arzyxzziKW_C3DKzFlb-7m20-83Gm8HQLYo5F3vt0AACsdadRr7yZ8cnbGzoING5ARQ')"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"}),r.jsxs("div",{className:"relative z-10 p-16 pb-20 max-w-2xl",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"bg-primary p-3 rounded-2xl shadow-xl shadow-primary/20",children:r.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"format_paint"})}),r.jsx("h2",{className:"text-4xl font-black text-white tracking-tighter uppercase",children:"Pintamax"})]}),r.jsx("h3",{className:"text-3xl font-black text-white mb-4 leading-tight",children:"Control Total de Pintureras"}),r.jsx("p",{className:"text-lg text-slate-300 font-medium leading-relaxed",children:"Gestin inteligente de inventario, ventas y sucursales en un solo lugar."})]})]}),r.jsx("div",{className:"flex flex-1 flex-col items-center justify-center p-8 bg-white dark:bg-slate-900",children:r.jsxs("div",{className:"w-full max-w-[420px] space-y-10",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-900 dark:text-white",children:"Acceso al Sistema"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Por favor ingrese sus datos de acceso."})]}),r.jsxs("form",{className:"space-y-6",onSubmit:x,children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400 tracking-widest",children:"Correo Electrnico"}),r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",children:"mail"}),r.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-slate-50 dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl outline-none focus:border-primary transition-all font-bold",placeholder:"usuario@pintamax.com",type:"email",value:a,onChange:m=>n(m.target.value),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400 tracking-widest",children:"Contrasea"}),r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",children:"lock"}),r.jsx("input",{className:"w-full pl-12 pr-14 py-4 bg-slate-50 dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl outline-none focus:border-primary transition-all font-bold",placeholder:"",type:d?"text":"password",value:i,onChange:m=>c(m.target.value),required:!0}),r.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:d?"visibility_off":"visibility"})})]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-primary text-white py-4 rounded-2xl font-black text-sm shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-3",children:["INGRESAR AL PANEL",r.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]})]}),r.jsx("p",{className:"text-center text-xs font-bold text-slate-400 uppercase tracking-tighter pt-8",children:" 2025 Pintamax S.A. de C.V.  Terminal de Gestin"})]})})]})},dt=({user:s,onLogout:a})=>{const[n,i]=ja.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);ja.useEffect(()=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]);const[c,d]=ja.useState(!1),f=Ia(),x=s.role===xe.ADMIN,m=s.role===xe.WAREHOUSE||s.role===xe.WAREHOUSE_SUB,p=s.role===xe.FINANCE,b=[{label:x?"Panel de Control":m?"Panel Bodega":p?"Contabilidad":"Punto de Venta",path:"/",icon:x?"dashboard":m?"warehouse":p?"payments":"point_of_sale"},...s.role!==xe.SELLER&&!p?[{label:m?"Ventas / TPV":"Punto de Venta",path:"/pos",icon:"point_of_sale"}]:[],{label:"Cotizador",path:"/quotations",icon:"request_quote"},{label:"Inventario",path:"/inventory",icon:"inventory_2"},{label:"Devoluciones",path:"/returns",icon:"keyboard_return"},...x||m?[{label:"Suministros",path:"/supplies",icon:"dry_cleaning"},{label:"Envasado",path:"/packaging",icon:"colors"}]:[],{label:"Historial Ventas",path:"/sales-history",icon:"receipt_long"},{label:"Clientes",path:"/clients",icon:"group"},...x?[{label:"Contabilidad",path:"/finance",icon:"payments"}]:[],...x?[{label:"Sucursales",path:"/branches",icon:"location_on"},{label:"Usuarios y Roles",path:"/users",icon:"manage_accounts"}]:[],...x||m?[{label:"Ventas Mayoreo",path:"/wholesale-pos",icon:"groups"},{label:"Historial Mayoreo",path:"/wholesale-history",icon:"history_edu"}]:[],...x||p?[{label:"Finanzas",path:"/finance-dashboard",icon:"account_balance"},{label:"Proveedores",path:"/suppliers",icon:"local_shipping"},{label:"Cuentas por Pagar",path:"/accounts-payable",icon:"request_quote"},{label:"Arrendamientos",path:"/leases",icon:"apartment"}]:[]];return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed top-5 left-6 z-[60] bg-white dark:bg-slate-800 p-2.5 rounded-xl shadow-lg border dark:border-slate-700 text-primary",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:c?"close":"menu"})}),c&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[45]",onClick:()=>d(!1)}),r.jsxs("aside",{className:`
        fixed lg:static top-0 left-0 h-screen w-64 bg-white dark:bg-[#0f172a] border-r border-slate-200 dark:border-slate-800 
        flex flex-col flex-shrink-0 transition-all duration-300 z-50 print:hidden
        ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[r.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-slate-100 dark:border-slate-800",children:[r.jsx("div",{className:"bg-primary/10 p-2.5 rounded-xl",children:r.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"format_paint"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-xl font-black tracking-tighter",children:"Pintamax"}),r.jsx("p",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest leading-none mt-1",children:x?"ADMINISTRADOR":"COMERCIAL"})]})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto py-8 px-4 space-y-1 custom-scrollbar",children:b.map(N=>r.jsxs(Js,{to:N.path,onClick:()=>d(!1),className:`flex items-center gap-4 px-4 py-3 rounded-xl transition-all group ${f.pathname===N.path?"bg-primary text-white shadow-lg shadow-primary/20":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 hover:text-primary"}`,children:[r.jsx("span",{className:"material-symbols-outlined",children:N.icon}),r.jsx("span",{className:`text-sm tracking-tight ${f.pathname===N.path?"font-black":"font-bold"}`,children:N.label})]},N.path))}),r.jsx("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"size-10 rounded-xl bg-slate-200 dark:bg-slate-700 bg-center bg-cover border-2 border-white dark:border-slate-800 shadow-sm shrink-0",style:{backgroundImage:`url(${s.avatar})`}}),r.jsxs("div",{className:"flex flex-col overflow-hidden mr-auto",children:[r.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white truncate leading-none",children:s.name}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter mt-1",children:s.role})]}),r.jsx("button",{onClick:()=>i(!n),className:"text-slate-400 hover:text-primary transition-colors p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",title:n?"Modo Claro":"Modo Oscuro",children:r.jsx("span",{className:"material-symbols-outlined text-xl",children:n?"light_mode":"dark_mode"})}),r.jsx("button",{onClick:a,className:"text-slate-400 hover:text-red-500 transition-colors p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:"Cerrar Sesin",children:r.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"})})]})})]})]})};function Yi(s,a){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(s);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(s,i[c])&&(n[i[c]]=s[i[c]]);return n}function Iy(s,a,n,i){function c(d){return d instanceof n?d:new n(function(f){f(d)})}return new(n||(n=Promise))(function(d,f){function x(b){try{p(i.next(b))}catch(N){f(N)}}function m(b){try{p(i.throw(b))}catch(N){f(N)}}function p(b){b.done?d(b.value):c(b.value).then(x,m)}p((i=i.apply(s,a||[])).next())})}const Hy=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class sd extends Error{constructor(a,n="FunctionsError",i){super(a),this.name=n,this.context=i}}class Gy extends sd{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class np extends sd{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class lp extends sd{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Uu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Uu||(Uu={}));class Vy{constructor(a,{headers:n={},customFetch:i,region:c=Uu.Any}={}){this.url=a,this.headers=n,this.region=c,this.fetch=Hy(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Iy(this,arguments,void 0,function*(n,i={}){var c;let d,f;try{const{headers:x,method:m,body:p,signal:b,timeout:N}=i;let j={},{region:_}=i;_||(_=this.region);const S=new URL(`${this.url}/${n}`);_&&_!=="any"&&(j["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let E;p&&(x&&!Object.prototype.hasOwnProperty.call(x,"Content-Type")||!x)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",E=p):typeof p=="string"?(j["Content-Type"]="text/plain",E=p):typeof FormData<"u"&&p instanceof FormData?E=p:(j["Content-Type"]="application/json",E=JSON.stringify(p)):E=p;let C=b;N&&(f=new AbortController,d=setTimeout(()=>f.abort(),N),b?(C=f.signal,b.addEventListener("abort",()=>f.abort())):C=f.signal);const U=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),x),body:E,signal:C}).catch(Y=>{throw new Gy(Y)}),R=U.headers.get("x-relay-error");if(R&&R==="true")throw new np(U);if(!U.ok)throw new lp(U);let A=((c=U.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),$;return A==="application/json"?$=yield U.json():A==="application/octet-stream"||A==="application/pdf"?$=yield U.blob():A==="text/event-stream"?$=U:A==="multipart/form-data"?$=yield U.formData():$=yield U.text(),{data:$,error:null,response:U}}catch(x){return{data:null,error:x,response:x instanceof lp||x instanceof np?x.context:void 0}}finally{d&&clearTimeout(d)}})}}var Ky=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Yy=class{constructor(s){var a,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(n=s.isMaybeSingle)!==null&&n!==void 0?n:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let c=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,x=null,m=null,p=d.status,b=d.statusText;if(d.ok){var N,j;if(n.method!=="HEAD"){var _;const U=await d.text();U===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((_=n.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?x=U:x=JSON.parse(U))}const E=(N=n.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),C=(j=d.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");E&&C&&C.length>1&&(m=parseInt(C[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(x)&&(x.length>1?(f={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,m=null,p=406,b="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{var S;const E=await d.text();try{f=JSON.parse(E),Array.isArray(f)&&d.status===404&&(x=[],f=null,p=200,b="OK")}catch{d.status===404&&E===""?(p=204,b="No Content"):f={message:E}}if(f&&n.isMaybeSingle&&(!(f==null||(S=f.details)===null||S===void 0)&&S.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&n.shouldThrowOnError)throw new Ky(f)}return{error:f,data:x,count:m,status:p,statusText:b}});return this.shouldThrowOnError||(c=c.catch(d=>{var f;let x="";const m=d==null?void 0:d.cause;if(m){var p,b,N,j;const S=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",E=(b=m==null?void 0:m.code)!==null&&b!==void 0?b:"";x=`${(N=d==null?void 0:d.name)!==null&&N!==void 0?N:"FetchError"}: ${d==null?void 0:d.message}`,x+=`

Caused by: ${(j=m==null?void 0:m.name)!==null&&j!==void 0?j:"Error"}: ${S}`,E&&(x+=` (${E})`),m!=null&&m.stack&&(x+=`
${m.stack}`)}else{var _;x=(_=d==null?void 0:d.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(f=d==null?void 0:d.name)!==null&&f!==void 0?f:"FetchError"}: ${d==null?void 0:d.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,a)}returns(){return this}overrideTypes(){return this}},Xy=class extends Yy{select(s){let a=!1;const n=(s??"*").split("").map(i=>/\s/.test(i)&&!a?"":(i==='"'&&(a=!a),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:n,foreignTable:i,referencedTable:c=i}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${s}`),this}range(s,a,{foreignTable:n,referencedTable:i=n}={}){const c=typeof i>"u"?"offset":`${i}.offset`,d=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:n=!1,buffers:i=!1,wal:c=!1,format:d="text"}={}){var f;const x=[s?"analyze":null,a?"verbose":null,n?"settings":null,i?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${m}"; options=${x};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const ip=new RegExp("[,()]");var Br=class extends Xy{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const n=Array.from(new Set(a)).map(i=>typeof i=="string"&&ip.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`in.(${n})`),this}notIn(s,a){const n=Array.from(new Set(a)).map(i=>typeof i=="string"&&ip.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`not.in.(${n})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:n,type:i}={}){let c="";i==="plain"?c="pl":i==="phrase"?c="ph":i==="websearch"&&(c="w");const d=n===void 0?"":`(${n})`;return this.url.searchParams.append(s,`${c}fts${d}.${a}`),this}match(s){return Object.entries(s).forEach(([a,n])=>{this.url.searchParams.append(a,`eq.${n}`)}),this}not(s,a,n){return this.url.searchParams.append(s,`not.${a}.${n}`),this}or(s,{foreignTable:a,referencedTable:n=a}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${s})`),this}filter(s,a,n){return this.url.searchParams.append(s,`${a}.${n}`),this}},Qy=class{constructor(s,{headers:a={},schema:n,fetch:i}){this.url=s,this.headers=new Headers(a),this.schema=n,this.fetch=i}select(s,a){const{head:n=!1,count:i}=a??{},c=n?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(x=>/\s/.test(x)&&!d?"":(x==='"'&&(d=!d),x)).join("");return this.url.searchParams.set("select",f),i&&this.headers.append("Prefer",`count=${i}`),new Br({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:n=!0}={}){var i;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((f,x)=>f.concat(Object.keys(x)),[]);if(d.length>0){const f=[...new Set(d)].map(x=>`"${x}"`);this.url.searchParams.set("columns",f.join(","))}}return new Br({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:n=!1,count:i,defaultToNull:c=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),i&&this.headers.append("Prefer",`count=${i}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const x=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(x.length>0){const m=[...new Set(x)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new Br({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(s,{count:a}={}){var n;const i="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new Br({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:s}={}){var a;const n="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new Br({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},Fy=class ex{constructor(a,{headers:n={},schema:i,fetch:c}={}){this.url=a,this.headers=new Headers(n),this.schemaName=i,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Qy(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new ex(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,n={},{head:i=!1,get:c=!1,count:d}={}){var f;let x;const m=new URL(`${this.url}/rpc/${a}`);let p;i||c?(x=i?"HEAD":"GET",Object.entries(n).filter(([N,j])=>j!==void 0).map(([N,j])=>[N,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([N,j])=>{m.searchParams.append(N,j)})):(x="POST",p=n);const b=new Headers(this.headers);return d&&b.set("Prefer",`count=${d}`),new Br({method:x,url:m,headers:b,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Jy{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let n=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(n+=`

Suggested solution: ${a.workaround}`),new Error(n)}static createWebSocket(a,n){const i=this.getWebSocketConstructor();return new i(a,n)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Wy="2.89.0",Zy=`realtime-js/${Wy}`,tx="1.0.0",ev="2.0.0",op=tx,qu=1e4,tv=1e3,av=100;var ms;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ms||(ms={}));var ut;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ut||(ut={}));var ua;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ua||(ua={}));var Mu;(function(s){s.websocket="websocket"})(Mu||(Mu={}));var Vs;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Vs||(Vs={}));class sv{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,n){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(a));let i=[a.join_ref,a.ref,a.topic,a.event,a.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(a){var n;return this._isArrayBuffer((n=a.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var n,i;const c=(i=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(a){var n,i;const c=(i=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,n,i){var c,d;const f=a.topic,x=(c=a.ref)!==null&&c!==void 0?c:"",m=(d=a.join_ref)!==null&&d!==void 0?d:"",p=a.payload.event,b=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},N=Object.keys(b).length===0?"":JSON.stringify(b);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`ref length ${x.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+x.length+f.length+p.length+N.length,_=new ArrayBuffer(this.HEADER_LENGTH+j);let S=new DataView(_),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,m.length),S.setUint8(E++,x.length),S.setUint8(E++,f.length),S.setUint8(E++,p.length),S.setUint8(E++,N.length),S.setUint8(E++,n),Array.from(m,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(x,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(f,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(p,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(N,U=>S.setUint8(E++,U.charCodeAt(0)));var C=new Uint8Array(_.byteLength+i.byteLength);return C.set(new Uint8Array(_),0),C.set(new Uint8Array(i),_.byteLength),C.buffer}decode(a,n){if(this._isArrayBuffer(a)){let i=this._binaryDecode(a);return n(i)}if(typeof a=="string"){const i=JSON.parse(a),[c,d,f,x,m]=i;return n({join_ref:c,ref:d,topic:f,event:x,payload:m})}return n({})}_binaryDecode(a){const n=new DataView(a),i=n.getUint8(0),c=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,n,c)}}_decodeUserBroadcast(a,n,i){const c=n.getUint8(1),d=n.getUint8(2),f=n.getUint8(3),x=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(a.slice(m,m+c));m=m+c;const b=i.decode(a.slice(m,m+d));m=m+d;const N=i.decode(a.slice(m,m+f));m=m+f;const j=a.slice(m,a.byteLength),_=x===this.JSON_ENCODING?JSON.parse(i.decode(j)):j,S={type:this.BROADCAST_EVENT,event:b,payload:_};return f>0&&(S.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(a){var n;return a instanceof ArrayBuffer||((n=a==null?void 0:a.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(a,n){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([i])=>n.includes(i)))}}class ax{constructor(a,n){this.callback=a,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ge||(Ge={}));const cp=(s,a,n={})=>{var i;const c=(i=n.skipTypes)!==null&&i!==void 0?i:[];return a?Object.keys(a).reduce((d,f)=>(d[f]=rv(f,s,a,c),d),{}):{}},rv=(s,a,n,i)=>{const c=a.find(x=>x.name===s),d=c==null?void 0:c.type,f=n[s];return d&&!i.includes(d)?sx(d,f):Lu(f)},sx=(s,a)=>{if(s.charAt(0)==="_"){const n=s.slice(1,s.length);return ov(a,n)}switch(s){case Ge.bool:return nv(a);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return lv(a);case Ge.json:case Ge.jsonb:return iv(a);case Ge.timestamp:return cv(a);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return Lu(a);default:return Lu(a)}},Lu=s=>s,nv=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},lv=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},iv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},ov=(s,a)=>{if(typeof s!="string")return s;const n=s.length-1,i=s[n];if(s[0]==="{"&&i==="}"){let d;const f=s.slice(1,n);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(x=>sx(a,x))}return s},cv=s=>typeof s=="string"?s.replace(" ","T"):s,rx=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class bu{constructor(a,n,i={},c=qu){this.channel=a,this.event=n,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,n){var i;return this._hasReceived(a)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:n}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(n))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var up;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(up||(up={}));class sl{constructor(a,n){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:d,onLeave:f,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sl.syncState(this.state,c,d,f),this.pendingDiffs.forEach(m=>{this.state=sl.syncDiff(this.state,m,d,f)}),this.pendingDiffs=[],x()}),this.channel._on(i.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=sl.syncDiff(this.state,c,d,f),x())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,n,i,c){const d=this.cloneDeep(a),f=this.transformState(n),x={},m={};return this.map(d,(p,b)=>{f[p]||(m[p]=b)}),this.map(f,(p,b)=>{const N=d[p];if(N){const j=b.map(C=>C.presence_ref),_=N.map(C=>C.presence_ref),S=b.filter(C=>_.indexOf(C.presence_ref)<0),E=N.filter(C=>j.indexOf(C.presence_ref)<0);S.length>0&&(x[p]=S),E.length>0&&(m[p]=E)}else x[p]=b}),this.syncDiff(d,{joins:x,leaves:m},i,c)}static syncDiff(a,n,i,c){const{joins:d,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(d,(x,m)=>{var p;const b=(p=a[x])!==null&&p!==void 0?p:[];if(a[x]=this.cloneDeep(m),b.length>0){const N=a[x].map(_=>_.presence_ref),j=b.filter(_=>N.indexOf(_.presence_ref)<0);a[x].unshift(...j)}i(x,b,m)}),this.map(f,(x,m)=>{let p=a[x];if(!p)return;const b=m.map(N=>N.presence_ref);p=p.filter(N=>b.indexOf(N.presence_ref)<0),a[x]=p,c(x,p,m),p.length===0&&delete a[x]}),a}static map(a,n){return Object.getOwnPropertyNames(a).map(i=>n(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((n,i)=>{const c=a[i];return"metas"in c?n[i]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[i]=c,n},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dp;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(dp||(dp={}));var rl;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(rl||(rl={}));var $a;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})($a||($a={}));class Hr{constructor(a,n={config:{}},i){var c,d;if(this.topic=a,this.params=n,this.socket=i,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bu(this,ua.join,this.params,this.timeout),this.rejoinTimer=new ax(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ua.reply,{},(f,x)=>{this._trigger(this._replyEventName(x),f)}),this.presence=new sl(this),this.broadcastEndpointURL=rx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,n=this.timeout){var i,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:f,presence:x,private:m}}=this.params,p=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[rl.PRESENCE]&&this.bindings[rl.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,N={},j={broadcast:f,presence:Object.assign(Object.assign({},x),{enabled:b}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(_=>a==null?void 0:a($a.CHANNEL_ERROR,_)),this._onClose(()=>a==null?void 0:a($a.CLOSED)),this.updateJoinPayload(Object.assign({config:j},N)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){a==null||a($a.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(S=E==null?void 0:E.length)!==null&&S!==void 0?S:0,U=[];for(let R=0;R<C;R++){const A=E[R],{filter:{event:$,schema:Y,table:te,filter:T}}=A,V=_&&_[R];if(V&&V.event===$&&Hr.isFilterValueEqual(V.schema,Y)&&Hr.isFilterValueEqual(V.table,te)&&Hr.isFilterValueEqual(V.filter,T))U.push(Object.assign(Object.assign({},A),{id:V.id}));else{this.unsubscribe(),this.state=ut.errored,a==null||a($a.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,a&&a($a.SUBSCRIBED);return}}).receive("error",_=>{this.state=ut.errored,a==null||a($a.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{a==null||a($a.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,n={}){return await this.send({type:"presence",event:"track",payload:a},n.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,n,i){return this.state===ut.joined&&a===rl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,n,i)}async httpSend(a,n,i={}){var c;if(n==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:n,private:this.private}]})},x=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=i.timeout)!==null&&c!==void 0?c:this.timeout);if(x.status===202)return{success:!0};let m=x.statusText;try{const p=await x.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(a,n={}){var i,c;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=a,x={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(x.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:x,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=p.body)===null||c===void 0?void 0:c.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,x,m;const p=this._push(a.type,a,n.timeout||this.timeout);a.type==="broadcast"&&!(!((m=(x=(f=this.params)===null||f===void 0?void 0:f.config)===null||x===void 0?void 0:x.broadcast)===null||m===void 0)&&m.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ua.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new bu(this,ua.leave,{},a),i.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(a,n,i){const c=new AbortController,d=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(a,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(d),f}_push(a,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new bu(this,a,n,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>av){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(a,n,i){return n}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,n,i){var c,d;const f=a.toLocaleLowerCase(),{close:x,error:m,leave:p,join:b}=ua;if(i&&[x,m,p,b].indexOf(f)>=0&&i!==this._joinRef())return;let j=this._onMessage(f,n,i);if(n&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(_=>{var S,E,C;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(E=_.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===f}).map(_=>_.callback(j,i)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var S,E,C,U,R,A;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const $=_.id,Y=(S=_.filter)===null||S===void 0?void 0:S.event;return $&&((E=n.ids)===null||E===void 0?void 0:E.includes($))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const $=(R=(U=_==null?void 0:_.filter)===null||U===void 0?void 0:U.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return $==="*"||$===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof j=="object"&&"ids"in j){const S=j.data,{schema:E,table:C,commit_timestamp:U,type:R,errors:A}=S;j=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:U,eventType:R,new:{},old:{},errors:A}),this._getPayloadRecords(S))}_.callback(j,i)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,n,i){const c=a.toLocaleLowerCase(),d={type:c,filter:n,callback:i};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(a,n){const i=a.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&Hr.isEqual(c.filter,n))})),this}static isEqual(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const i in a)if(a[i]!==n[i])return!1;return!0}static isFilterValueEqual(a,n){return(a??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(ua.close,{},a)}_onError(a){this._on(ua.error,{},n=>a(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const n={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(n.new=cp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(n.old=cp(a.columns,a.old_record)),n}}const yu=()=>{},Oi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uv=[1e3,2e3,5e3,1e4],dv=1e4,hv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fv{constructor(a,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qu,this.transport=null,this.heartbeatIntervalMs=Oi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yu,this.ref=0,this.reconnectTimer=null,this.vsn=op,this.logger=yu,this.conn=null,this.sendBuffer=[],this.serializer=new sv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${a}/${Mu.websocket}`,this.httpEndpoint=rx(a),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jy.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const n=a.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const n=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const a=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,n,i){this.logger(a,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return Vs.Connecting;case ms.open:return Vs.Open;case ms.closing:return Vs.Closing;default:return Vs.Closed}}isConnected(){return this.connectionState()===Vs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,n={config:{}}){const i=`realtime:${a}`,c=this.getChannels().find(d=>d.topic===i);if(c)return c;{const d=new Hr(`realtime:${a}`,n,this);return this.channels.push(d),d}}push(a){const{topic:n,event:i,payload:c,ref:d}=a,f=()=>{this.encode(a,x=>{var m;(m=this.conn)===null||m===void 0||m.send(x)})};this.log("push",`${n} ${i} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(tv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Oi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let n=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${a}"`),n.unsubscribe())}_remove(a){this.channels=this.channels.filter(n=>n.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:d,ref:f}=n,x=f?`(${f})`:"",m=d.status||"";this.log("receive",`${m} ${i} ${c} ${x}`.trim(),d),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(c,d,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(a){var n;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ms.open||this.conn.readyState===ms.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var n;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(ua.error))}_appendParams(a,n){if(Object.keys(n).length===0)return a;const i=a.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${a}${i}${c}`}_workerObjectUrl(a){let n;if(a)n=a;else{const i=new Blob([hv],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(a,n=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(a=null){let n,i=!1;if(a)n=a,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const d={access_token:n,version:Zy};n&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(ua.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${a}`,n)})}_triggerStateCallbacks(a,n){try{this.stateChangeCallbacks[a].forEach(i=>{try{i(n)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(i){this.log("error",`error triggering ${a} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new ax(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var n,i,c,d,f,x,m,p,b,N,j,_;switch(this.transport=(n=a==null?void 0:a.transport)!==null&&n!==void 0?n:null,this.timeout=(i=a==null?void 0:a.timeout)!==null&&i!==void 0?i:qu,this.heartbeatIntervalMs=(c=a==null?void 0:a.heartbeatIntervalMs)!==null&&c!==void 0?c:Oi.HEARTBEAT_INTERVAL,this.worker=(d=a==null?void 0:a.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(x=a==null?void 0:a.heartbeatCallback)!==null&&x!==void 0?x:yu,this.vsn=(m=a==null?void 0:a.vsn)!==null&&m!==void 0?m:op,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a==null?void 0:a.reconnectAfterMs)!==null&&p!==void 0?p:(S=>uv[S-1]||dv),this.vsn){case tx:this.encode=(b=a==null?void 0:a.encode)!==null&&b!==void 0?b:((S,E)=>E(JSON.stringify(S))),this.decode=(N=a==null?void 0:a.decode)!==null&&N!==void 0?N:((S,E)=>E(JSON.parse(S)));break;case ev:this.encode=(j=a==null?void 0:a.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(_=a==null?void 0:a.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}var il=class extends Error{constructor(s,a){var n;super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&((n=a.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mv(s,a,n){const i=new URL(a,s);if(n)for(const[c,d]of Object.entries(n))d!==void 0&&i.searchParams.set(c,d);return i.toString()}async function pv(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function xv(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:c,body:d,headers:f}){const x=mv(s.baseUrl,i,c),m=await pv(s.auth),p=await a(x,{method:n,headers:{...d?{"Content-Type":"application/json"}:{},...m,...f},body:d?JSON.stringify(d):void 0}),b=await p.text(),N=(p.headers.get("content-type")||"").includes("application/json"),j=N&&b?JSON.parse(b):b;if(!p.ok){const _=N?j:void 0,S=_==null?void 0:_.error;throw new il((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:p.status,headers:p.headers,data:j}}}}function Di(s){return s.join("")}var gv=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:Di(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(s,a){const n={namespace:s.namespace,properties:a==null?void 0:a.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Di(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Di(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Di(s.namespace)}`}),!0}catch(a){if(a instanceof il&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(n){if(n instanceof il&&n.status===409)return;throw n}}};function Dr(s){return s.join("")}var bv=class{constructor(s,a="",n){this.client=s,this.prefix=a,this.accessDelegation=n}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables`,body:a,headers:n})).data.metadata}async updateTable(s,a){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((a==null?void 0:a.purge)??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dr(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(n){if(n instanceof il&&n.status===404)return!1;throw n}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(n){if(n instanceof il&&n.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw n}}},yv=class{constructor(s){var i;let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const n=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=xv({baseUrl:n,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(i=s.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new gv(this.client,a),this.tableOps=new bv(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},Xi=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Fe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var vv=class extends Xi{constructor(s,a,n){super(s),this.name="StorageApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zu=class extends Xi{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}};const rd=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),wv=()=>Response,Bu=s=>{if(Array.isArray(s))return s.map(n=>Bu(n));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([n,i])=>{const c=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));a[c]=Bu(i)}),a},jv=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Nv=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function ol(s){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ol(s)}function _v(s,a){if(ol(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,a);if(ol(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function kv(s){var a=_v(s,"string");return ol(a)=="symbol"?a:a+""}function Sv(s,a,n){return(a=kv(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function hp(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,i)}return n}function Ne(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?hp(Object(n),!0).forEach(function(i){Sv(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}const vu=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},Ev=async(s,a,n)=>{s instanceof await wv()&&!(n!=null&&n.noResolveJson)?s.json().then(i=>{const c=s.status||500,d=(i==null?void 0:i.statusCode)||c+"";a(new vv(vu(i),c,d))}).catch(i=>{a(new zu(vu(i),i))}):a(new zu(vu(s),s))},Av=(s,a,n,i)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return s==="GET"||!i?c:(jv(i)?(c.headers=Ne({"Content-Type":"application/json"},a==null?void 0:a.headers),c.body=JSON.stringify(i)):c.body=i,a!=null&&a.duplex&&(c.duplex=a.duplex),Ne(Ne({},c),n))};async function xl(s,a,n,i,c,d){return new Promise((f,x)=>{s(n,Av(a,i,c,d)).then(m=>{if(!m.ok)throw m;return i!=null&&i.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>Ev(m,x,i))})}async function cl(s,a,n,i){return xl(s,"GET",a,n,i)}async function ca(s,a,n,i,c){return xl(s,"POST",a,i,c,n)}async function $u(s,a,n,i,c){return xl(s,"PUT",a,i,c,n)}async function Rv(s,a,n,i){return xl(s,"HEAD",a,Ne(Ne({},n),{},{noResolveJson:!0}),i)}async function nd(s,a,n,i,c){return xl(s,"DELETE",a,i,c,n)}var Cv=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}};let nx;nx=Symbol.toStringTag;var Tv=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[nx]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cv(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}};const Ov={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Dv=class{constructor(s,a={},n,i){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.bucketId=n,this.fetch=rd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,a,n,i){var c=this;try{let d;const f=Ne(Ne({},fp),i);let x=Ne(Ne({},c.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),m&&d.append("metadata",c.encodeMetadata(m)),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),m&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(m))):(d=n,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType,m&&(x["x-metadata"]=c.toBase64(c.encodeMetadata(m))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),i!=null&&i.headers&&(x=Ne(Ne({},x),i.headers));const p=c._removeEmptyFolders(a),b=c._getFinalPath(p),N=await(s=="PUT"?$u:ca)(c.fetch,`${c.url}/object/${b}`,d,Ne({headers:x},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:N.Id,fullPath:N.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Fe(d))return{data:null,error:d};throw d}}async upload(s,a,n){return this.uploadOrUpdate("POST",s,a,n)}async uploadToSignedUrl(s,a,n,i){var c=this;const d=c._removeEmptyFolders(s),f=c._getFinalPath(d),x=new URL(c.url+`/object/upload/sign/${f}`);x.searchParams.set("token",a);try{let m;const p=Ne({upsert:fp.upsert},i),b=Ne(Ne({},c.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",p.cacheControl)):(m=n,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{data:{path:d,fullPath:(await $u(c.fetch,x.toString(),m,{headers:b})).Key},error:null}}catch(m){if(c.shouldThrowOnError)throw m;if(Fe(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(s,a){var n=this;try{let i=n._getFinalPath(s);const c=Ne({},n.headers);a!=null&&a.upsert&&(c["x-upsert"]="true");const d=await ca(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(n.url+d.url),x=f.searchParams.get("token");if(!x)throw new Xi("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:x},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async update(s,a,n){return this.uploadOrUpdate("PUT",s,a,n)}async move(s,a,n){var i=this;try{return{data:await ca(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:s,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async copy(s,a,n){var i=this;try{return{data:{path:(await ca(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:s,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async createSignedUrl(s,a,n){var i=this;try{let c=i._getFinalPath(s),d=await ca(i.fetch,`${i.url}/object/sign/${c}`,Ne({expiresIn:a},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const f=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return d={signedUrl:encodeURI(`${i.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async createSignedUrls(s,a,n){var i=this;try{const c=await ca(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:a,paths:s},{headers:i.headers}),d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:c.map(f=>Ne(Ne({},f),{},{signedUrl:f.signedURL?encodeURI(`${i.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}download(s,a){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),c=i?`?${i}`:"",d=this._getFinalPath(s),f=()=>cl(this.fetch,`${this.url}/${n}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new Tv(f,this.shouldThrowOnError)}async info(s){var a=this;const n=a._getFinalPath(s);try{return{data:Bu(await cl(a.fetch,`${a.url}/object/info/${n}`,{headers:a.headers})),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async exists(s){var a=this;const n=a._getFinalPath(s);try{return await Rv(a.fetch,`${a.url}/object/${n}`,{headers:a.headers}),{data:!0,error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i)&&i instanceof zu){const c=i.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:i}}throw i}}getPublicUrl(s,a){const n=this._getFinalPath(s),i=[],c=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&i.push(c);const d=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});f!==""&&i.push(f);let x=i.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${x}`)}}}async remove(s){var a=this;try{return{data:await nd(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async list(s,a,n){var i=this;try{const c=Ne(Ne(Ne({},Ov),a),{},{prefix:s||""});return{data:await ca(i.fetch,`${i.url}/object/list/${i.bucketId}`,c,{headers:i.headers},n),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async listV2(s,a){var n=this;try{const i=Ne({},s);return{data:await ca(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},a),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const lx="2.89.0",ix={"X-Client-Info":`storage-js/${lx}`};var Uv=class{constructor(s,a={},n,i){this.shouldThrowOnError=!1;const c=new URL(s);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Ne(Ne({},ix),a),this.fetch=rd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var a=this;try{const n=a.listBucketOptionsToQueryString(s);return{data:await cl(a.fetch,`${a.url}/bucket${n}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async getBucket(s){var a=this;try{return{data:await cl(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async createBucket(s,a={public:!1}){var n=this;try{return{data:await ca(n.fetch,`${n.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async updateBucket(s,a){var n=this;try{return{data:await $u(n.fetch,`${n.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async emptyBucket(s){var a=this;try{return{data:await ca(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await nd(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},qv=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ne(Ne({},ix),a),this.fetch=rd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await ca(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async listBuckets(s){var a=this;try{const n=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&n.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&n.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&n.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&n.set("sortOrder",s.sortOrder),s!=null&&s.search&&n.set("search",s.search);const i=n.toString(),c=i?`${a.url}/bucket?${i}`:`${a.url}/bucket`;return{data:await cl(a.fetch,c,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await nd(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}from(s){var a=this;if(!Nv(s))throw new Xi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new yv({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(c,d){const f=c[d];return typeof f!="function"?f:async(...x)=>{try{return{data:await f.apply(c,x),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}};const ld={"X-Client-Info":`storage-js/${lx}`,"Content-Type":"application/json"};var ox=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Pt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var wu=class extends ox{constructor(s,a,n){super(s),this.name="StorageVectorsApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Mv=class extends ox{constructor(s,a){super(s),this.name="StorageVectorsUnknownError",this.originalError=a}};const id=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),Lv=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},mp=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zv=async(s,a,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(n!=null&&n.noResolveJson)){const i=s.status||500,c=s;if(typeof c.json=="function")c.json().then(d=>{const f=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||i+"";a(new wu(mp(d),i,f))}).catch(()=>{const d=i+"";a(new wu(c.statusText||`HTTP ${i} error`,i,d))});else{const d=i+"";a(new wu(c.statusText||`HTTP ${i} error`,i,d))}}else a(new Mv(mp(s),s))},Bv=(s,a,n,i)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return i?(Lv(i)?(c.headers=Ne({"Content-Type":"application/json"},a==null?void 0:a.headers),c.body=JSON.stringify(i)):c.body=i,Ne(Ne({},c),n)):c};async function $v(s,a,n,i,c,d){return new Promise((f,x)=>{s(n,Bv(a,i,c,d)).then(m=>{if(!m.ok)throw m;if(i!=null&&i.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>f(m)).catch(m=>zv(m,x,i))})}async function It(s,a,n,i,c){return $v(s,"POST",a,i,c,n)}var Pv=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ne(Ne({},ld),a),this.fetch=id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async getIndex(s,a){var n=this;try{return{data:await It(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}}async listIndexes(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async deleteIndex(s,a){var n=this;try{return{data:await It(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}}},Iv=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ne(Ne({},ld),a),this.fetch=id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var a=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await It(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async getVectors(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async listVectors(s){var a=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await It(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async queryVectors(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async deleteVectors(s){var a=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await It(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}},Hv=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ne(Ne({},ld),a),this.fetch=id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async getBucket(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async listBuckets(s={}){var a=this;try{return{data:await It(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await It(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}}},Gv=class extends Hv{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new Vv(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,n=this;return a().call(n,s)}async getBucket(s){var a=()=>super.getBucket,n=this;return a().call(n,s)}async listBuckets(s={}){var a=()=>super.listBuckets,n=this;return a().call(n,s)}async deleteBucket(s){var a=()=>super.deleteBucket,n=this;return a().call(n,s)}},Vv=class extends Pv{constructor(s,a,n,i){super(s,a,i),this.vectorBucketName=n}async createIndex(s){var a=()=>super.createIndex,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,n=this;return a().call(n,n.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,n=this;return a().call(n,n.vectorBucketName,s)}index(s){return new Kv(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},Kv=class extends Iv{constructor(s,a,n,i,c){super(s,a,c),this.vectorBucketName=n,this.indexName=i}async putVectors(s){var a=()=>super.putVectors,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(s){var a=()=>super.getVectors,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,n=this;return a().call(n,Ne(Ne({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Yv=class extends Uv{constructor(s,a={},n,i){super(s,a,n,i)}from(s){return new Dv(this.url,this.headers,s,this.fetch)}get vectors(){return new Gv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qv(this.url+"/iceberg",this.headers,this.fetch)}};const cx="2.89.0",$r=30*1e3,Pu=3,ju=Pu*$r,Xv="http://localhost:9999",Qv="supabase.auth.token",Fv={"X-Client-Info":`gotrue-js/${cx}`},Iu="X-Supabase-Api-Version",ux={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wv=600*1e3;class ul extends Error{constructor(a,n,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function de(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Zv extends ul{constructor(a,n,i){super(a,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function ew(s){return de(s)&&s.name==="AuthApiError"}class Ks extends ul{constructor(a,n){super(a),this.name="AuthUnknownError",this.originalError=n}}class Ha extends ul{constructor(a,n,i,c){super(a,i,c),this.name=n,this.status=i}}class $t extends Ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tw(s){return de(s)&&s.name==="AuthSessionMissingError"}class Ur extends Ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ui extends Ha{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class qi extends Ha{constructor(a,n=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aw(s){return de(s)&&s.name==="AuthImplicitGrantRedirectError"}class pp extends Ha{constructor(a,n=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sw extends Ha{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Hu extends Ha{constructor(a,n){super(a,"AuthRetryableFetchError",n,void 0)}}function Nu(s){return de(s)&&s.name==="AuthRetryableFetchError"}class xp extends Ha{constructor(a,n,i){super(a,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Gu extends Ha{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gp=` 	
\r=`.split(""),rw=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<gp.length;a+=1)s[gp[a].charCodeAt(0)]=-2;for(let a=0;a<Pi.length;a+=1)s[Pi[a].charCodeAt(0)]=a;return s})();function bp(s,a,n){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;n(Pi[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;n(Pi[i]),a.queuedBits-=6}}function dx(s,a,n){const i=rw[s];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)n(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function yp(s){const a=[],n=f=>{a.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{iw(f,i,n)};for(let f=0;f<s.length;f+=1)dx(s.charCodeAt(f),c,d);return a.join("")}function nw(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function lw(s,a){for(let n=0;n<s.length;n+=1){let i=s.charCodeAt(n);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(s.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}nw(i,a)}}function iw(s,a,n){if(a.utf8seq===0){if(s<=127){n(s);return}for(let i=1;i<6;i+=1)if((s>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&n(a.codepoint)}}function Kr(s){const a=[],n={queue:0,queuedBits:0},i=c=>{a.push(c)};for(let c=0;c<s.length;c+=1)dx(s.charCodeAt(c),n,i);return new Uint8Array(a)}function ow(s){const a=[];return lw(s,n=>a.push(n)),new Uint8Array(a)}function Ys(s){const a=[],n={queue:0,queuedBits:0},i=c=>{a.push(c)};return s.forEach(c=>bp(c,n,i)),bp(null,n,i),a.join("")}function cw(s){return Math.round(Date.now()/1e3)+s}function uw(){return Symbol("auth-callback")}const Nt=()=>typeof window<"u"&&typeof document<"u",Is={tested:!1,writable:!1},hx=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Is.tested)return Is.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Is.tested=!0,Is.writable=!0}catch{Is.tested=!0,Is.writable=!1}return Is.writable};function dw(s){const a={},n=new URL(s);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,d)=>{a[d]=c})}catch{}return n.searchParams.forEach((i,c)=>{a[c]=i}),a}const fx=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),hw=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Pr=async(s,a,n)=>{await s.setItem(a,JSON.stringify(n))},Hs=async(s,a)=>{const n=await s.getItem(a);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jt=async(s,a)=>{await s.removeItem(a)};class Qi{constructor(){this.promise=new Qi.promiseConstructor((a,n)=>{this.resolve=a,this.reject=n})}}Qi.promiseConstructor=Promise;function _u(s){const a=s.split(".");if(a.length!==3)throw new Gu("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!Jv.test(a[i]))throw new Gu("JWT not in base64url format");return{header:JSON.parse(yp(a[0])),payload:JSON.parse(yp(a[1])),signature:Kr(a[2]),raw:{header:a[0],payload:a[1]}}}async function fw(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function mw(s,a){return new Promise((i,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await s(d);if(!a(d,null,f)){i(f);return}}catch(f){if(!a(d,f)){c(f);return}}})()})}function pw(s){return("0"+s.toString(16)).substr(-2)}function xw(){const a=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let c="";for(let d=0;d<56;d++)c+=n.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(a),Array.from(a,pw).join("")}async function gw(s){const n=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(i);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function bw(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const n=await gw(s);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qr(s,a,n=!1){const i=xw();let c=i;n&&(c+="/PASSWORD_RECOVERY"),await Pr(s,`${a}-code-verifier`,c);const d=await bw(i);return[d,i===d?"plain":"s256"]}const yw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vw(s){const a=s.headers.get(Iu);if(!a||!a.match(yw))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function ww(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function jw(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mr(s){if(!Nw.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ku(){const s={};return new Proxy(s,{get:(a,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _w(s,a){return new Proxy(s,{get:(n,i,c)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const d=i.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,c)}return!a.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(n,i,c)}})}function vp(s){return JSON.parse(JSON.stringify(s))}const Gs=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),kw=[502,503,504];async function wp(s){var a;if(!hw(s))throw new Hu(Gs(s),0);if(kw.includes(s.status))throw new Hu(Gs(s),s.status);let n;try{n=await s.json()}catch(d){throw new Ks(Gs(d),d)}let i;const c=vw(s);if(c&&c.getTime()>=ux["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new xp(Gs(n),s.status,((a=n.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new $t}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new xp(Gs(n),s.status,n.weak_password.reasons);throw new Zv(Gs(n),s.status||500,i)}const Sw=(s,a,n,i)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),n))};async function je(s,a,n,i){var c;const d=Object.assign({},i==null?void 0:i.headers);d[Iu]||(d[Iu]=ux["2024-01-01"].name),i!=null&&i.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(c=i==null?void 0:i.query)!==null&&c!==void 0?c:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const x=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await Ew(s,a,n+x,{headers:d,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function Ew(s,a,n,i,c,d){const f=Sw(a,i,c,d);let x;try{x=await s(n,Object.assign({},f))}catch(m){throw console.error(m),new Hu(Gs(m),0)}if(x.ok||await wp(x),i!=null&&i.noResolveJson)return x;try{return await x.json()}catch(m){await wp(m)}}function oa(s){var a;let n=null;Cw(s)&&(n=Object.assign({},s),s.expires_at||(n.expires_at=cw(s.expires_in)));const i=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:n,user:i},error:null}}function jp(s){const a=oa(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(a.data.weak_password=s.weak_password),a}function ps(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function Aw(s){return{data:s,error:null}}function Rw(s){const{action_link:a,email_otp:n,hashed_token:i,redirect_to:c,verification_type:d}=s,f=Yi(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:a,email_otp:n,hashed_token:i,redirect_to:c,verification_type:d},m=Object.assign({},f);return{data:{properties:x,user:m},error:null}}function Np(s){return s}function Cw(s){return s.access_token&&s.refresh_token&&s.expires_in}const Su=["global","local","others"];class Tw{constructor({url:a="",headers:n={},fetch:i}){this.url=a,this.headers=n,this.fetch=fx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,n=Su[0]){if(Su.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Su.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,n={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ps})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:n}=a,i=Yi(a,["options"]),c=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(c.new_email=i==null?void 0:i.newEmail,delete c.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Rw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(a){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ps})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(a){var n,i,c,d,f,x,m;try{const p={nextPage:null,lastPage:0,total:0},b=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=a==null?void 0:a.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Np});if(b.error)throw b.error;const N=await b.json(),j=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(m=(x=b.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);p[`${C}Page`]=E}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},N),p),error:null}}catch(p){if(de(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){Mr(a);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ps})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(a,n){Mr(a);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:n,headers:this.headers,xform:ps})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,n=!1){Mr(a);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:n},xform:ps})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){Mr(a.userId);try{const{data:n,error:i}=await je(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:i}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(a){Mr(a.userId),Mr(a.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(a){var n,i,c,d,f,x,m;try{const p={nextPage:null,lastPage:0,total:0},b=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=a==null?void 0:a.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Np});if(b.error)throw b.error;const N=await b.json(),j=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(m=(x=b.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);p[`${C}Page`]=E}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},N),p),error:null}}catch(p){if(de(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(a){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _updateOAuthClient(a,n){try{return await je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(de(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(a){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(a){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function _p(s={}){return{getItem:a=>s[a]||null,setItem:(a,n)=>{s[a]=n},removeItem:a=>{delete s[a]}}}const Lr={debug:!!(globalThis&&hx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mx extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Ow extends mx{}async function Dw(s,a,n){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await n()}finally{Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(a===0)throw Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Ow(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Lr.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Uw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function px(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function qw(s){return parseInt(s,16)}function Mw(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,i=>i.toString(16).padStart(2,"0")).join("")}function Lw(s){var a;const{chainId:n,domain:i,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:x,requestId:m,resources:p,scheme:b,uri:N,version:j}=s;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const _=px(s.address),S=b?`${b}://${i}`:i,E=s.statement?`${s.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${_}

${E}`;let U=`URI: ${N}
Version: ${j}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(U+=`
Expiration Time: ${c.toISOString()}`),x&&(U+=`
Not Before: ${x.toISOString()}`),m&&(U+=`
Request ID: ${m}`),p){let R=`
Resources:`;for(const A of p){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);R+=`
- ${A}`}U+=R}return`${C}
${U}`}class it extends Error{constructor({message:a,code:n,cause:i,name:c}){var d;super(a,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=c??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class Ii extends it{constructor(a,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:a}),this.name="WebAuthnUnknownError",this.originalError=n}}function zw({error:s,options:a}){var n,i,c;const{publicKey:d}=a;if(!d)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new it({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new it({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new it({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new it({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new it({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new it({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return d.pubKeyCredParams.filter(x=>x.type==="public-key").length===0?new it({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new it({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(xx(f)){if(d.rp.id!==f)return new it({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new it({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Bw({error:s,options:a}){const{publicKey:n}=a;if(!n)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new it({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new it({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(xx(i)){if(n.rpId!==i)return new it({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class $w{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Pw=new $w;function Iw(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:n,excludeCredentials:i}=s,c=Yi(s,["challenge","user","excludeCredentials"]),d=Kr(a).buffer,f=Object.assign(Object.assign({},n),{id:Kr(n.id).buffer}),x=Object.assign(Object.assign({},c),{challenge:d,user:f});if(i&&i.length>0){x.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];x.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:Kr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return x}function Hw(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:n}=s,i=Yi(s,["challenge","allowCredentials"]),c=Kr(a).buffer,d=Object.assign(Object.assign({},i),{challenge:c});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const x=n[f];d.allowCredentials[f]=Object.assign(Object.assign({},x),{id:Kr(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return d}function Gw(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s;return{id:s.id,rawId:s.id,response:{attestationObject:Ys(new Uint8Array(s.response.attestationObject)),clientDataJSON:Ys(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Vw(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s,i=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Ys(new Uint8Array(c.authenticatorData)),clientDataJSON:Ys(new Uint8Array(c.clientDataJSON)),signature:Ys(new Uint8Array(c.signature)),userHandle:c.userHandle?Ys(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function xx(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function kp(){var s,a;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function Kw(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",a)}:{data:null,error:new Ii("Empty credential response",a)}}catch(a){return{data:null,error:zw({error:a,options:s})}}}async function Yw(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",a)}:{data:null,error:new Ii("Empty credential response",a)}}catch(a){return{data:null,error:Bw({error:a,options:s})}}}const Xw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Qw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hi(...s){const a=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of s)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(n(f))i[d]=f;else if(a(f)){const x=i[d];a(x)?i[d]=Hi(x,f):i[d]=Hi(f)}else i[d]=f}return i}function Fw(s,a){return Hi(Xw,s,a||{})}function Jw(s,a){return Hi(Qw,s,a||{})}class Ww{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:n,friendlyName:i,signal:c},d){try{const{data:f,error:x}=await this.client.mfa.challenge({factorId:a,webauthn:n});if(!f)return{data:null,error:x};const m=c??Pw.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=Fw(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:N}=await Kw({publicKey:p,signal:m});return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:N}}case"request":{const p=Jw(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:N}=await Yw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:m}));return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:N}}}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ks("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:a,webauthn:i})}async _authenticate({factorId:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn authentication")};try{if(!kp())return{data:null,error:new Ks("Browser does not support WebAuthn",null)};const{data:f,error:x}=await this.challenge({factorId:a,webauthn:{rpId:n,rpOrigins:i},signal:c},{request:d});if(!f)return{data:null,error:x};const{webauthn:m}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ks("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn registration")};try{if(!kp())return{data:null,error:new Ks("Browser does not support WebAuthn",null)};const{data:f,error:x}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var N;return(N=b.data)===null||N===void 0?void 0:N.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===a&&j.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:x};const{data:m,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:c},{create:d});return m?this._verify({factorId:f.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ks("Unexpected error in register",f)}}}}Uw();const Zw={url:Xv,storageKey:Qv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Sp(s,a,n){return await n()}const zr={};class dl{get jwks(){var a,n;return(n=(a=zr[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(a){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,n;return(n=(a=zr[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:a})}constructor(a){var n,i,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},Zw),a);if(this.storageKey=d.storageKey,this.instanceID=(n=dl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,dl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Nt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new Tw({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=fx(d.fetch),this.lock=d.lock||Sp,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:this.persistSession&&Nt()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Dw:this.lock=Sp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ww(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:hx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_p(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=_p(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cx}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let n={},i="none";if(Nt()&&(n=dw(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Nt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:d}=await this._getSessionFromURL(n,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),aw(d)){const m=(a=d.details)===null||a===void 0?void 0:a.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:x}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",x),await this._saveSession(f),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?this._returnResult({error:n}):this._returnResult({error:new Ks("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var n,i,c;try{const d=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=a==null?void 0:a.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=a==null?void 0:a.options)===null||c===void 0?void 0:c.captchaToken}},xform:oa}),{data:f,error:x}=d;if(x||!f)return this._returnResult({data:{user:null,session:null},error:x});const m=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(d){if(de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(a){var n,i,c;try{let d;if("email"in a){const{email:b,password:N,options:j}=a;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await qr(this.storage,this.storageKey)),d=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:b,password:N,data:(n=j==null?void 0:j.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:_,code_challenge_method:S},xform:oa})}else if("phone"in a){const{phone:b,password:N,options:j}=a;d=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:N,data:(i=j==null?void 0:j.data)!==null&&i!==void 0?i:{},channel:(c=j==null?void 0:j.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:oa})}else throw new Ui("You must provide either an email or phone number and a password");const{data:f,error:x}=d;if(x||!f)return await jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:x});const m=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(d){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(a){try{let n;if("email"in a){const{email:d,password:f,options:x}=a;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:jp})}else if("phone"in a){const{phone:d,password:f,options:x}=a;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:jp})}else throw new Ui("You must provide either an email or phone number and a password");const{data:i,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!i||!i.session||!i.user){const d=new Ur;return this._returnResult({data:{user:null,session:null},error:d})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(a){var n,i,c,d;return await this._handleProviderSignIn(a.provider,{redirectTo:(n=a.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=a.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:n}=a;switch(n){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(a){var n,i,c,d,f,x,m,p,b,N,j;let _,S;if("message"in a)_=a.message,S=a.signature;else{const{chain:E,wallet:C,statement:U,options:R}=a;let A;if(Nt())if(typeof C=="object")A=C;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")A=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const $=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),Y=await A.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const te=px(Y[0]);let T=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!T){const q=await A.request({method:"eth_chainId"});T=qw(q)}const V={domain:$.host,address:te,statement:U,uri:$.href,version:"1",chainId:T,nonce:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(x=R==null?void 0:R.signInWithEthereum)===null||x===void 0?void 0:x.expirationTime,notBefore:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=R==null?void 0:R.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=Lw(V),S=await A.request({method:"personal_sign",params:[Mw(_),te]})}try{const{data:E,error:C}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((N=a.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:oa});if(C)throw C;if(!E||!E.session||!E.user){const U=new Ur;return this._returnResult({data:{user:null,session:null},error:U})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(a){var n,i,c,d,f,x,m,p,b,N,j,_;let S,E;if("message"in a)S=a.message,E=a.signature;else{const{chain:C,wallet:U,statement:R,options:A}=a;let $;if(Nt())if(typeof U=="object")$=U;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))$=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=U}const Y=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in $&&$.signIn){const te=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),R?{statement:R}:null));let T;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")T=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)T=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)S=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),E=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${Y.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(c=(i=A==null?void 0:A.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((x=A==null?void 0:A.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A==null?void 0:A.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((N=(b=A==null?void 0:A.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||N===void 0)&&N.length?["Resources",...A.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const te=await $.signMessage(new TextEncoder().encode(S),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=te}}try{const{data:C,error:U}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ys(E)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:oa});if(U)throw U;if(!C||!C.session||!C.user){const R=new Ur;return this._returnResult({data:{user:null,session:null},error:R})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:U})}catch(C){if(de(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(a){const n=await Hs(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new sw;const{data:d,error:f}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:oa});if(await jt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const x=new Ur;return this._returnResult({data:{user:null,session:null,redirectType:null},error:x})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(a){try{const{options:n,provider:i,token:c,access_token:d,nonce:f}=a,x=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:oa}),{data:m,error:p}=x;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const b=new Ur;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(a){var n,i,c,d,f;try{if("email"in a){const{email:x,options:m}=a;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await qr(this.storage,this.storageKey));const{error:N}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in a){const{phone:x,options:m}=a,{data:p,error:b}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(c=m==null?void 0:m.data)!==null&&c!==void 0?c:{},create_user:(d=m==null?void 0:m.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(f=m==null?void 0:m.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Ui("You must provide either an email or phone number.")}catch(x){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async verifyOtp(a){var n,i;try{let c,d;"options"in a&&(c=(n=a.options)===null||n===void 0?void 0:n.redirectTo,d=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:x}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:oa});if(x)throw x;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,p=f.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(a){var n,i,c,d,f;try{let x=null,m=null;this.flowType==="pkce"&&([x,m]=await qr(this.storage,this.storageKey));const p=await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(n=a.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=a==null?void 0:a.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:x,code_challenge_method:m}),headers:this.headers,xform:Aw});return!((d=p.data)===null||d===void 0)&&d.url&&Nt()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(x){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(x))return this._returnResult({data:null,error:x});throw x}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)throw i;if(!n)throw new $t;const{error:c}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const n=`${this.url}/resend`;if("email"in a){const{email:i,type:c,options:d}=a,{error:f}=await je(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:i,type:c,options:d}=a,{data:f,error:x}=await je(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x})}throw new Ui("You must provide either an email or phone number and a type")}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(a,n){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await a(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const n=await Hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?a=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<ju:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const f=await Hs(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=ku()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=_w(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:c,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(a){try{return a?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ps}):await this._useSession(async n=>{var i,c,d;const{data:f,error:x}=n;if(x)throw x;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:ps})})}catch(n){if(de(n))return tw(n)&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(a,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,n))}async _updateUser(a,n={}){try{return await this._useSession(async i=>{const{data:c,error:d}=i;if(d)throw d;if(!c.session)throw new $t;const f=c.session;let x=null,m=null;this.flowType==="pkce"&&a.email!=null&&([x,m]=await qr(this.storage,this.storageKey));const{data:p,error:b}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:x,code_challenge_method:m}),jwt:f.access_token,xform:ps});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(i){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new $t;const n=Date.now()/1e3;let i=n,c=!0,d=null;const{payload:f}=_u(a.access_token);if(f.exp&&(i=f.exp,c=i<=n),c){const{data:x,error:m}=await this._callRefreshToken(a.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!x)return{data:{user:null,session:null},error:null};d=x}else{const{data:x,error:m}=await this._getUser(a.access_token);if(m)throw m;d={access_token:a.access_token,refresh_token:a.refresh_token,user:x.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if(de(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async n=>{var i;if(!a){const{data:f,error:x}=n;if(x)throw x;a=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(a!=null&&a.refresh_token))throw new $t;const{data:c,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(a,n){try{if(!Nt())throw new qi("No browser detected.");if(a.error||a.error_description||a.error_code)throw new qi(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new pp("No code detected.");const{data:R,error:A}=await this._exchangeCodeForSession(a.code);if(A)throw A;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:x,expires_at:m,token_type:p}=a;if(!d||!x||!f||!p)throw new qi("No session defined in URL");const b=Math.round(Date.now()/1e3),N=parseInt(x);let j=b+N;m&&(j=parseInt(m));const _=j-b;_*1e3<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${N}s`);const S=j-N;b-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,j,b):b-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,j,b);const{data:E,error:C}=await this._getUser(d);if(C)throw C;const U={provider_token:i,provider_refresh_token:c,access_token:d,expires_in:N,expires_at:j,refresh_token:f,token_type:p,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:a.type},error:null})}catch(i){if(de(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const n=await Hs(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&n)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:c,error:d}=n;if(d)return this._returnResult({error:d});const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:x}=await this.admin.signOut(f,a);if(x&&!(ew(x)&&(x.status===404||x.status===401||x.status===403)))return this._returnResult({error:x})}return a!=="others"&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const n=uw(),i={id:n,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async n=>{var i,c;try{const{data:{session:d},error:f}=n;if(f)throw f;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",d),console.error(d)}})}async resetPasswordForEmail(a,n={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await qr(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var a;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(a=n.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var n;try{const{data:i,error:c}=await this._useSession(async d=>{var f,x,m,p,b;const{data:N,error:j}=d;if(j)throw j;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(x=a.options)===null||x===void 0?void 0:x.scopes,queryParams:(m=a.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(p=N.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return Nt()&&!(!((n=a.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:a.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(de(i))return this._returnResult({data:{provider:a.provider,url:null},error:i});throw i}}async linkIdentityIdToken(a){return await this._useSession(async n=>{var i;try{const{error:c,data:{session:d}}=n;if(c)throw c;const{options:f,provider:x,token:m,access_token:p,nonce:b}=a,N=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d==null?void 0:d.access_token)!==null&&i!==void 0?i:void 0,body:{provider:x,id_token:m,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:oa}),{data:j,error:_}=N;return _?this._returnResult({data:{user:null,session:null},error:_}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new Ur}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:_}))}catch(c){if(await jt(this.storage,`${this.storageKey}-code-verifier`),de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(a){try{return await this._useSession(async n=>{var i,c;const{data:d,error:f}=n;if(f)throw f;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(a){const n=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await mw(async c=>(c>0&&await fw(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:oa})),(c,d)=>{const f=200*Math.pow(2,c);return d&&Nu(d)&&Date.now()+f-i<$r})}catch(i){if(this._debug(n,"error",i),de(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",n,"url",i),Nt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Hs(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Pr(this.userStorage,this.storageKey+"-user",f)),c.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:ku()}else if(c&&!c.user&&!c.user){const f=await Hs(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await jt(this.storage,this.storageKey+"-user"),await Pr(this.storage,this.storageKey,c)):c.user=ku()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const d=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ju;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${ju}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Nu(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:x}=await this._getUser(c.access_token);!x&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var n,i;if(!a)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Qi;const{data:d,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!d.session)throw new $t;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const x={data:d.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(d){if(this._debug(c,"error",d),de(d)){const f={data:null,error:d};return Nu(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,n,i=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:n});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(a,n)}catch(m){d.push(m)}});if(await Promise.all(f),d.length>0){for(let x=0;x<d.length;x+=1)console.error(d[x]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await jt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},a),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Pr(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const d=vp(c);await Pr(this.storage,this.storageKey,d)}else{const c=vp(n);await Pr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await jt(this.storage,this.storageKey),await jt(this.storage,this.storageKey+"-code-verifier"),await jt(this.storage,this.storageKey+"-user"),this.userStorage&&await jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),$r);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-a)/$r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${$r}ms, refresh threshold is ${Pu} ticks`),c<=Pu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof mx)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const n=`#_onVisibilityChanged(${a})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,n,i){const c=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await qr(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(x.toString())}if(i!=null&&i.queryParams){const d=new URLSearchParams(i.queryParams);c.push(d.toString())}return i!=null&&i.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async n=>{var i;const{data:c,error:d}=n;return d?this._returnResult({data:null,error:d}):await je(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(a){try{return await this._useSession(async n=>{var i,c;const{data:d,error:f}=n;if(f)return this._returnResult({data:null,error:f});const x=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:m,error:p}=await je(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&m.type==="totp"&&(!((c=m==null?void 0:m.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Gw(a.webauthn.credential_response):Vw(a.webauthn.credential_response)})}:{code:a.code}),{data:x,error:m}=await je(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),this._returnResult({data:x,error:m}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=await je(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:x}=f;if(x.type!=="webauthn")return{data:x,error:null};switch(x.webauthn.type){case"create":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:Iw(x.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:Hw(x.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(a){const{data:n,error:i}=await this._challenge({factorId:a.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:a.factorId,challengeId:n.id,code:a.code})}async _listFactors(){var a;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(a=n==null?void 0:n.factors)!==null&&a!==void 0?a:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var a,n;const{data:{session:i},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=_u(i.access_token);let f=null;d.aal&&(f=d.aal);let x=f;((n=(a=i.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const p=d.amr||[];return{data:{currentLevel:f,nextLevel:x,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async n=>{const{data:{session:i},error:c}=n;return c?this._returnResult({data:null,error:c}):i?await je(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new $t})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(a,n){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new $t});const f=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:x=>({data:x,error:null})});return f.data&&f.data.redirect_url&&Nt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(a,n){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new $t});const f=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:x=>({data:x,error:null})});return f.data&&f.data.redirect_url&&Nt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;return i?this._returnResult({data:null,error:i}):n?await je(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new $t})})}catch(a){if(de(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async n=>{const{data:{session:i},error:c}=n;return c?this._returnResult({data:null,error:c}):i?(await je(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $t})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(a,n={keys:[]}){let i=n.keys.find(x=>x.kid===a);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(x=>x.kid===a),i&&this.jwks_cached_at+Wv>c)return i;const{data:d,error:f}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,i=d.keys.find(x=>x.kid===a),!i)?null:i}async getClaims(a,n={}){try{let i=a;if(!i){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});i=_.session.access_token}const{header:c,payload:d,signature:f,raw:{header:x,payload:m}}=_u(i);n!=null&&n.allowExpired||ww(d.exp);const p=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:d,header:c,signature:f},error:null}}const b=jw(c.alg),N=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,N,f,ow(`${x}.${m}`)))throw new Gu("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}}dl.nextInstanceID={};const ej=dl,tj="2.89.0";let al="";typeof Deno<"u"?al="deno":typeof document<"u"?al="web":typeof navigator<"u"&&navigator.product==="ReactNative"?al="react-native":al="node";const aj={"X-Client-Info":`supabase-js-${al}/${tj}`},sj={headers:aj},rj={schema:"public"},nj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lj={};function hl(s){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},hl(s)}function ij(s,a){if(hl(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,a);if(hl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function oj(s){var a=ij(s,"string");return hl(a)=="symbol"?a:a+""}function cj(s,a,n){return(a=oj(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function Ep(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,i)}return n}function tt(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Ep(Object(n),!0).forEach(function(i){cj(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}const uj=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),dj=()=>Headers,hj=(s,a,n)=>{const i=uj(n),c=dj();return async(d,f)=>{var x;const m=(x=await a())!==null&&x!==void 0?x:s;let p=new c(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),i(d,tt(tt({},f),{},{headers:p}))}};function fj(s){return s.endsWith("/")?s:s+"/"}function mj(s,a){var n,i;const{db:c,auth:d,realtime:f,global:x}=s,{db:m,auth:p,realtime:b,global:N}=a,j={db:tt(tt({},m),c),auth:tt(tt({},p),d),realtime:tt(tt({},b),f),storage:{},global:tt(tt(tt({},N),x),{},{headers:tt(tt({},(n=N==null?void 0:N.headers)!==null&&n!==void 0?n:{}),(i=x==null?void 0:x.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return s.accessToken?j.accessToken=s.accessToken:delete j.accessToken,j}function pj(s){const a=s==null?void 0:s.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fj(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var xj=class extends ej{constructor(s){super(s)}},gj=class{constructor(s,a,n){var i,c;this.supabaseUrl=s,this.supabaseKey=a;const d=pj(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,x={db:rj,realtime:lj,auth:tt(tt({},nj),{},{storageKey:f}),global:sj},m=mj(n??{},x);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(c=m.global.headers)!==null&&c!==void 0?c:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(b,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=hj(a,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new Fy(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Yv(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Vy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,n)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,n;if(s.accessToken)return await s.accessToken();const{data:i}=await s.auth.getSession();return(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:n,storage:i,userStorage:c,storageKey:d,flowType:f,lock:x,debug:m,throwOnError:p},b,N){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xj({url:this.authUrl.href,headers:tt(tt({},j),b),storageKey:d,autoRefreshToken:s,persistSession:a,detectSessionInUrl:n,storage:i,userStorage:c,flowType:f,lock:x,debug:m,throwOnError:p,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new fv(this.realtimeUrl.href,tt(tt({},s),{},{params:tt(tt({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(s,a,n){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const bj=(s,a,n)=>new gj(s,a,n);function yj(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const a=s.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}yj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vj="https://rqrumtpqutzdbwtqjaoh.supabase.co",wj="sb_publishable_rTrOdDmjiGGzl-jYeEcbeQ_pJMTSMgf",ee=bj(vj,wj),Eu=s=>{var a,n,i,c,d,f,x,m,p,b,N,j,_,S,E,C,U;return{id:s.product_id||s.id,sku:s.sku||((a=s.products)==null?void 0:a.sku)||"",name:s.name||((n=s.products)==null?void 0:n.name)||"Producto sin nombre",category:s.category||((i=s.products)==null?void 0:i.category)||"Sin categora",brand:s.brand||((c=s.products)==null?void 0:c.brand),description:s.description||((d=s.products)==null?void 0:d.description)||"",price:parseFloat(s.price||((f=s.products)==null?void 0:f.price)||"0"),image:s.image||((x=s.products)==null?void 0:x.image)||"",status:s.status||((m=s.products)==null?void 0:m.status)||"out",stock:s.stock||0,wholesalePrice:parseFloat(s.wholesale_price||((p=s.products)==null?void 0:p.wholesale_price)||"0"),wholesaleMinQty:parseInt(s.wholesale_min_qty||((b=s.products)==null?void 0:b.wholesale_min_qty)||"12"),costPrice:parseFloat(s.cost_price||((N=s.products)==null?void 0:N.cost_price)||"0"),packageType:s.package_type||((j=s.products)==null?void 0:j.package_type),min_stock:s.min_stock||((_=s.products)==null?void 0:_.min_stock)||10,max_stock:s.max_stock||((S=s.products)==null?void 0:S.max_stock)||100,location:s.location||((E=s.products)==null?void 0:E.location)||"",unit_measure:s.unit_measure||((C=s.products)==null?void 0:C.unit_measure)||"pza",supplier_id:s.supplier_id||((U=s.products)==null?void 0:U.supplier_id),inventory:{}}},ke={async getProducts(){const{data:s,error:a}=await ee.from("products").select("*");if(a)throw a;const{data:n}=await ee.from("inventory").select("*");return(s||[]).map(i=>{const c=(n||[]).filter(x=>x.product_id===i.id)||[],d={};return c.forEach(x=>d[x.branch_id]=x.stock),{...Eu(i),stock:c.reduce((x,m)=>x+m.stock,0),inventory:d}})},async getProductsByBranch(s){if(s==="ALL")return this.getProducts();const{data:a,error:n}=await ee.from("inventory").select(`
            stock,
            branch_id,
            products (*)
        `).eq("branch_id",s);if(n)throw n;return(a||[]).map(i=>({...Eu(i.products),stock:i.stock,inventory:{[s]:i.stock}}))},async createProduct(s){const{data:a,error:n}=await ee.from("products").insert([{sku:s.sku,name:s.name,category:s.category,brand:s.brand,description:s.description,price:s.price,image:s.image,status:s.status,wholesale_price:s.wholesalePrice||0,wholesale_min_qty:s.wholesaleMinQty||12,package_type:s.packageType,min_stock:s.min_stock,max_stock:s.max_stock,location:s.location,cost_price:s.costPrice,unit_measure:s.unit_measure,supplier_id:s.supplier_id}]).select().single();if(n)throw n;const{data:i}=await ee.from("branches").select("id");if(i){const c=i.map(d=>({product_id:a.id,branch_id:d.id,stock:0}));await ee.from("inventory").insert(c)}return a},async updateProduct(s,a){const{error:n}=await ee.from("products").update({sku:a.sku,name:a.name,category:a.category,brand:a.brand,description:a.description,price:a.price,image:a.image,status:a.status,wholesale_price:a.wholesalePrice,wholesale_min_qty:a.wholesaleMinQty,package_type:a.packageType,min_stock:a.min_stock,max_stock:a.max_stock,location:a.location,cost_price:a.costPrice,unit_measure:a.unit_measure,supplier_id:a.supplier_id}).eq("id",s);if(n)throw n},async deleteProduct(s){const{error:a}=await ee.from("products").delete().eq("id",s);if(a)throw a},async updateStock(s,a,n){const{error:i}=await ee.from("inventory").upsert({product_id:s,branch_id:a,stock:n},{onConflict:"product_id,branch_id"});if(i)throw i},async getBranches(){const{data:s,error:a}=await ee.from("branches").select("*");if(a)throw a;return s},async createBranch(s){const{error:a}=await ee.from("branches").insert(s);if(a)throw a},async updateBranch(s){const{error:a}=await ee.from("branches").update(s).eq("id",s.id);if(a)throw a},async bulkCreateProducts(s){const a=s.map(x=>({sku:x.sku,name:x.name,category:x.category,description:x.description,price:x.price,image:x.image,status:x.status,wholesale_price:x.wholesalePrice||0,wholesale_min_qty:x.wholesaleMinQty||12})),{data:n,error:i}=await ee.from("products").upsert(a,{onConflict:"sku"}).select();if(i)throw i;if(!n)return;const{data:c}=await ee.from("branches").select("id");if(!c)return;const d=[];for(const x of n)for(const m of c)d.push({product_id:x.id,branch_id:m.id,stock:0});const{error:f}=await ee.from("inventory").upsert(d,{onConflict:"product_id,branch_id"});if(f)throw f},async getRestockRequests(s,a){let n=ee.from("restock_requests").select(`
                *,
                products (name, sku, image),
                branches (name)
            `).order("created_at",{ascending:!1});s&&(n=n.eq("branch_id",s)),a&&(Array.isArray(a)?n=n.in("status",a):n=n.eq("status",a));const{data:i,error:c}=await n;if(c)throw c;return(i||[]).map(d=>{var f,x,m;return{id:d.id,branchId:d.branch_id,branchName:(f=d.branches)==null?void 0:f.name,productId:d.product_id,productName:(x=d.products)==null?void 0:x.name,productImage:(m=d.products)==null?void 0:m.image,quantity:d.quantity,status:d.status,createdAt:d.created_at,shippedAt:d.shipped_at}})},async getRestockRequestById(s){var i,c,d;const{data:a,error:n}=await ee.from("restock_requests").select(`
                *,
                products (name, sku, image),
                branches (name)
            `).eq("id",s).single();if(n)throw n;return{id:a.id,branchId:a.branch_id,branchName:(i=a.branches)==null?void 0:i.name,productId:a.product_id,productName:(c=a.products)==null?void 0:c.name,productImage:(d=a.products)==null?void 0:d.image,quantity:a.quantity,status:a.status,createdAt:a.created_at}},async createRestockRequest(s,a,n){const{error:i}=await ee.from("restock_requests").insert({branch_id:s,product_id:a,quantity:n,status:"pending_admin"});if(i)throw i},async updateRestockStatus(s,a){const n={status:a};a==="approved_warehouse"&&(n.approved_at=new Date().toISOString()),a==="shipped"&&(n.shipped_at=new Date().toISOString());const{error:i}=await ee.from("restock_requests").update(n).eq("id",s);if(i)throw i},async confirmRestockArrival(s){const{error:a}=await ee.rpc("confirm_restock_arrival",{p_request_id:s});if(a)throw a},async recordInternalConsumption(s,a,n,i,c){const{error:d}=await ee.rpc("process_internal_consumption",{p_product_id:s,p_branch_id:a,p_user_id:n,p_quantity:i,p_reason:c});if(d)throw d},async getInternalConsumptionHistory(s){let a=ee.from("internal_consumption").select(`
                *,
                products (name, sku, image),
                branches (name)
            `).order("created_at",{ascending:!1});s&&s!=="ALL"&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return(n||[]).map(c=>{var d,f,x;return{id:c.id,productId:c.product_id,productName:(d=c.products)==null?void 0:d.name,productImage:(f=c.products)==null?void 0:f.image,branchId:c.branch_id,branchName:(x=c.branches)==null?void 0:x.name,userId:c.user_id,quantity:c.quantity,reason:c.reason,costAtTime:parseFloat(c.cost_at_time||"0"),createdAt:c.created_at}})},async getRestockSheets(s){let a=ee.from("restock_sheets").select(`
                *,
                branches (name)
            `).order("created_at",{ascending:!1});s&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return(n||[]).map(c=>{var d;return{id:c.id,branchId:c.branch_id,branchName:(d=c.branches)==null?void 0:d.name,folio:c.folio,totalAmount:c.total_amount,status:c.status,createdAt:c.created_at}})},async getRestockSheetDetail(s){var d;const{data:a,error:n}=await ee.from("restock_sheets").select("*, branches(*)").eq("id",s).single();if(n)throw n;const{data:i,error:c}=await ee.from("restock_requests").select(`
                *,
                products (*)
            `).eq("sheet_id",s);if(c)throw c;return{...a,branchName:(d=a.branches)==null?void 0:d.name,items:(i||[]).map(f=>({...f,product:Eu(f.products)}))}},async createRestockSheet(s,a){const{data:n,error:i}=await ee.rpc("get_next_restock_folio",{p_branch_id:s});if(i)throw i;const c=a.reduce((p,b)=>p+b.quantity*b.unitPrice,0),{data:d,error:f}=await ee.from("restock_sheets").insert({branch_id:s,folio:n,total_amount:c,status:"pending"}).select().single();if(f)throw f;const x=a.map(p=>({branch_id:s,product_id:p.productId,quantity:p.quantity,sheet_id:d.id,unit_price:p.unitPrice,total_price:p.quantity*p.unitPrice,status:"approved_warehouse"})),{error:m}=await ee.from("restock_requests").insert(x);if(m)throw m;return d.id},async updateRestockSheetStatus(s,a){const{error:n}=await ee.from("restock_sheets").update({status:a}).eq("id",s);if(n)throw n;a==="completed"&&await ee.from("restock_requests").update({status:"shipped"}).eq("sheet_id",s)},async getSupplyOrders(s){let a=ee.from("supply_orders").select(`
                *,
                branches (name),
                supply_order_items (
                    product_id,
                    quantity,
                    unit_price,
                    total_price,
                    products ( name, sku, image )
                )
            `).order("created_at",{ascending:!1});s&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return(n||[]).map(c=>{var d,f;return{id:c.id,folio:c.folio,branchId:c.branch_id,branchName:(d=c.branches)==null?void 0:d.name,createdBy:c.created_by,createdByName:c.created_by,assignedAdminId:c.assigned_admin_id,assignedAdminName:c.assigned_admin_id,status:c.status,estimatedArrival:c.estimated_arrival,totalAmount:c.total_amount,createdAt:c.created_at,items:(f=c.supply_order_items)==null?void 0:f.map(x=>{var m,p;return{id:x.id||"N/A",orderId:c.id,productId:x.product_id,quantity:x.quantity,unitPrice:x.unit_price,totalPrice:x.total_price,productName:(m=x.products)==null?void 0:m.name,productImage:(p=x.products)==null?void 0:p.image}})}})},async createSupplyOrder(s,a,n){const i=n.reduce((m,p)=>m+p.quantity*p.unitPrice,0),{data:c,error:d}=await ee.from("supply_orders").insert({branch_id:s,created_by:a,total_amount:i,status:"pending"}).select().single();if(d)throw d;const f=n.map(m=>({order_id:c.id,product_id:m.productId,quantity:m.quantity,unit_price:m.unitPrice,total_price:m.quantity*m.unitPrice})),{error:x}=await ee.from("supply_order_items").insert(f);if(x)throw x;return c.id},async updateSupplyOrderStatus(s,a,n){const i={status:a};n&&(i.assigned_admin_id=n),a==="shipped"&&(i.estimated_arrival=new Date(Date.now()+864e5).toISOString());const{error:c}=await ee.from("supply_orders").update(i).eq("id",s);if(c)throw c},async confirmSupplyOrderArrival(s){const{data:a,error:n}=await ee.from("supply_orders").select(`
                *,
                supply_order_items (*)
            `).eq("id",s).single();if(n)throw n;if(a.status!=="shipped")throw new Error("El pedido no est en estado 'Enviado'");const{error:i}=await ee.from("supply_orders").update({status:"received",updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i;for(const c of a.supply_order_items){const{data:d}=await ee.from("inventory").select("*").eq("branch_id",a.branch_id).eq("product_id",c.product_id).single();d?await ee.from("inventory").update({stock:d.stock+c.quantity,updated_at:new Date().toISOString()}).eq("id",d.id):await ee.from("inventory").insert({branch_id:a.branch_id,product_id:c.product_id,stock:c.quantity})}},async getPriceRequests(){const{data:s,error:a}=await ee.from("price_requests").select(`
                *,
                products (name, sku)
            `).order("created_at",{ascending:!1});if(a)throw a;return(s||[]).map(n=>{var i;return{id:n.id,productId:n.product_id,productName:(i=n.products)==null?void 0:i.name,requesterId:n.requester_id,requesterName:n.requester_id,status:n.status,createdAt:n.created_at}})},async resolvePriceRequest(s,a,n){const{error:i}=await ee.from("products").update({price:n}).eq("id",a);if(i)throw i;const{error:c}=await ee.from("price_requests").update({status:"resolved"}).eq("id",s);if(c)throw c},async createPriceRequest(s,a){const{error:n}=await ee.from("price_requests").insert({product_id:s,requester_id:a,status:"pending"});if(n)throw n},async createReturnRequest(s,a,n,i){const{error:c}=await ee.from("returns").insert({branch_id:s,product_id:a,quantity:n,reason:i,status:"pending_authorization"});if(c)throw c},async getReturnRequests(s){let a=ee.from("returns").select(`
                *,
                products (name, sku),
                branches (name)
            `).order("created_at",{ascending:!1});s&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return n||[]},async authorizeReturn(s,a,n){const{error:i}=await ee.from("returns").update({status:n?"approved":"rejected",authorized_by:a,updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i},async createInternalSupply(s){const{error:a}=await ee.from("internal_supplies").insert({branch_id:s.branchId,description:s.description,amount:s.amount,category:s.category});if(a)throw a},async getInternalSupplies(s){let a=ee.from("internal_supplies").select(`
                *,
                branches (name)
            `).order("created_at",{ascending:!1});s&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return(n||[]).map(c=>({id:c.id,description:c.description,category:c.category,amount:c.amount,branchId:c.branch_id,branches:c.branches,createdAt:c.created_at,created_at:c.created_at}))},async createPackagingRequest(s){const{error:a}=await ee.from("packaging_requests").insert({bulk_product_id:s.bulkProductId,target_package_type:s.targetPackageType,quantity_drum:s.quantityDrum,branch_id:s.branchId,status:"sent_to_branch"});if(a)throw a},async getPackagingRequests(s){let a=ee.from("packaging_requests").select(`
                *,
                products (name, sku),
                branches (name)
            `).order("created_at",{ascending:!1});s&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return n||[]},async updatePackagingStatus(s,a){const{error:n}=await ee.from("packaging_requests").update({status:a,updated_at:new Date().toISOString()}).eq("id",s);if(n)throw n}},Qs={async processSale(s,a,n,i,c,d){const f=a.map(p=>({product_id:p.productId,quantity:p.quantity,price:p.price,product_name:p.productName})),{data:x,error:m}=await ee.rpc("process_sale",{p_branch_id:s,p_total:n,p_payment_method:i,p_items:f,p_subtotal:(d==null?void 0:d.subtotal)||n,p_discount_amount:(d==null?void 0:d.discountAmount)||0,p_iva:(d==null?void 0:d.iva)||0});if(m)throw console.error("Error processing sale:",m),new Error(m.message);if(x){const p={};c&&(p.client_id=c),(d==null?void 0:d.isWholesale)!==void 0&&(p.is_wholesale=d.isWholesale),d!=null&&d.paymentType&&(p.payment_type=d.paymentType),d!=null&&d.departureAdminId&&(p.departure_admin_id=d.departureAdminId),(d==null?void 0:d.creditDays)!==void 0&&(p.credit_days=d.creditDays),Object.keys(p).length>0&&await ee.from("sales").update(p).eq("id",x)}return x},async getSalesByBranch(s){const{data:a,error:n}=await ee.from("sales").select(`
                *,
                sale_items (*),
                clients (name)
            `).eq("branch_id",s).order("created_at",{ascending:!1});if(n)throw n;return(a||[]).map(i=>{var c;return{id:i.id,branchId:i.branch_id,clientId:i.client_id,clientName:(c=i.clients)==null?void 0:c.name,subtotal:i.subtotal||0,discountAmount:i.discount_amount||0,iva:i.iva||0,total:i.total,status:i.status,paymentMethod:i.payment_method,createdAt:i.created_at,isWholesale:i.is_wholesale,paymentType:i.payment_type,departureAdminId:i.departure_admin_id,items:(i.sale_items||[]).map(d=>({productId:d.product_id,productName:d.product_name,quantity:d.quantity,price:d.unit_price,total:d.quantity*d.unit_price}))}})},async getSalesWithFilters(s,a,n){let i=ee.from("sales").select(`
                *,
                branch:branches(name),
                sale_items (*),
                clients (name)
            `).gte("created_at",s).lte("created_at",a).order("created_at",{ascending:!1});n&&n!=="ALL"&&(i=i.eq("branch_id",n));const{data:c,error:d}=await i;if(d)throw d;return(c||[]).map(f=>{var x,m;return{id:f.id,branchId:f.branch_id,branchName:(x=f.branch)==null?void 0:x.name,clientId:f.client_id,clientName:(m=f.clients)==null?void 0:m.name,subtotal:f.subtotal||0,discountAmount:f.discount_amount||0,iva:f.iva||0,total:f.total,status:f.status,paymentMethod:f.payment_method,createdAt:f.created_at,isWholesale:f.is_wholesale,paymentType:f.payment_type,departureAdminId:f.departure_admin_id,departureAdminName:f.departure_admin_id,items:(f.sale_items||[]).map(p=>({productId:p.product_id,productName:p.product_name,quantity:p.quantity,price:p.unit_price,total:p.quantity*p.unit_price}))}})},async getAdmins(){const{data:s,error:a}=await ee.from("profiles").select("id, full_name").eq("role","ADMIN");if(a)throw a;return(s||[]).map(n=>({id:n.id,name:n.full_name||"Sin nombre"}))},async getSaleDetail(s){var i;const{data:a,error:n}=await ee.from("sales").select(`
                *,
                sale_items (*),
                clients (*)
            `).eq("id",s).single();if(n)throw n;return{id:a.id,branchId:a.branch_id,clientId:a.client_id,clientName:(i=a.clients)==null?void 0:i.name,subtotal:a.subtotal||0,discountAmount:a.discount_amount||0,iva:a.iva||0,total:a.total,status:a.status,paymentMethod:a.payment_method,createdAt:a.created_at,isWholesale:a.is_wholesale,paymentType:a.payment_type,departureAdminId:a.departure_admin_id,departureAdminName:a.departure_admin_id,items:(a.sale_items||[]).map(c=>({productId:c.product_id,productName:c.product_name,quantity:c.quantity,price:c.unit_price,total:c.quantity*c.unit_price}))}}},xs={async requestDiscount(s,a,n,i,c,d){const{data:f,error:x}=await ee.from("discount_requests").insert([{requester_id:s,requester_name:a,branch_id:n,amount:i,type:c,reason:d,status:"pending"}]).select().single();if(x)throw x;return f.id},async getPendingRequests(){const{data:s,error:a}=await ee.from("discount_requests").select("*").eq("status","pending").order("created_at",{ascending:!1});if(a)throw a;return s.map(this.mapDbRequest)},async approveDiscount(s){const{error:a}=await ee.from("discount_requests").update({status:"approved"}).eq("id",s);if(a)throw a},async rejectDiscount(s){const{error:a}=await ee.from("discount_requests").update({status:"rejected"}).eq("id",s);if(a)throw a},subscribeToRequest(s,a){return ee.channel(`discount-${s}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"discount_requests",filter:`id=eq.${s}`},n=>{a(this.mapDbRequest(n.new))}).subscribe()},subscribeToAllPending(s){return ee.channel("all-discounts").on("postgres_changes",{event:"*",schema:"public",table:"discount_requests"},()=>{s()}).subscribe()},mapDbRequest(s){return{id:s.id,requesterId:s.requester_id,requesterName:s.requester_name,branchId:s.branch_id,amount:s.amount,type:s.type,status:s.status,reason:s.reason,createdAt:s.created_at}}},Ap=({user:s,onLogout:a})=>{const n=s.branchId||"BR-CENTRO",[i,c]=v.useState([]),[d,f]=v.useState([]),[x,m]=v.useState(""),[p,b]=v.useState("Todos"),[N,j]=v.useState(!1),[_,S]=v.useState("cash"),[E,C]=v.useState(""),[U,R]=v.useState(!1),[A,$]=v.useState(!1),[Y,te]=v.useState(!1),[T,V]=v.useState(""),[q,re]=v.useState("percentage"),[me,ne]=v.useState(""),[Re,Q]=v.useState(null),[Ee,W]=v.useState(null),[ce,le]=v.useState(!1);v.useEffect(()=>{ye()},[n]);const ye=async()=>{try{$(!0);const Z=await ke.getProductsByBranch(n);c(Z)}catch(Z){console.error("Failed to load products:",Z)}finally{$(!1)}},w=Z=>{var F;const fe=Z.stock||0;if((((F=d.find(_e=>_e.id===Z.id))==null?void 0:F.quantity)||0)>=fe){alert("No hay suficiente stock en esta sucursal");return}f(_e=>_e.find(Le=>Le.id===Z.id)?_e.map(Le=>Le.id===Z.id?{...Le,quantity:Le.quantity+1}:Le):[..._e,{...Z,quantity:1}])},P=(Z,fe)=>{f(gt=>gt.map(F=>{if(F.id===Z){const _e=Math.max(0,F.quantity+fe);return{...F,quantity:_e}}return F}).filter(F=>F.quantity>0))},ae=i.filter(Z=>{const fe=Z.name.toLowerCase().includes(x.toLowerCase())||Z.sku.toLowerCase().includes(x.toLowerCase()),gt=p==="Todos"||Z.category===p;return fe&&gt}),ie=async()=>{try{$(!0);const Z=await xs.requestDiscount(s.id,s.name,n,parseFloat(T),q,me);xs.subscribeToRequest(Z,fe=>{Q(fe),fe.status==="approved"?(W({amount:fe.amount,type:fe.type}),alert("Descuento aprobado!")):fe.status==="rejected"&&(alert("El descuento fue rechazado."),Q(null))}),Q({id:Z,requesterId:s.id,requesterName:s.name,branchId:n,amount:parseFloat(T),type:q,status:"pending",reason:me,createdAt:new Date().toISOString()}),te(!1),V(""),ne("")}catch(Z){console.error(Z),alert("Error al solicitar descuento.")}finally{$(!1)}},ve=d.reduce((Z,fe)=>{const F=(fe.wholesalePrice&&fe.wholesaleMinQty&&fe.quantity>=fe.wholesaleMinQty?fe.wholesalePrice:fe.price)||0;return Z+F*fe.quantity},0),ge=Ee?Ee.type==="percentage"?ve*(Ee.amount/100):Ee.amount:0,X=ve-ge,J=X*.16,pe=X+J,be=Math.max(0,parseFloat(E||"0")-pe),at=async()=>{try{$(!0);const Z=d.map(fe=>{const F=(fe.wholesalePrice&&fe.wholesaleMinQty&&fe.quantity>=fe.wholesaleMinQty?fe.wholesalePrice:fe.price)||0;return{productId:fe.id,productName:fe.name,quantity:fe.quantity,price:F,total:F*fe.quantity}});await Qs.processSale(n,Z,pe,_,void 0,{subtotal:ve,discountAmount:ge,iva:J}),R(!0),await ye(),setTimeout(()=>{R(!1),j(!1),f([]),C("")},2e3)}catch(Z){console.error(Z),alert("Error al procesar la venta. Verifique la conexin o el stock.")}finally{$(!1)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col min-w-0 h-full relative",children:[r.jsxs("header",{className:"h-16 flex items-center justify-between px-6 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 flex-shrink-0 shadow-sm z-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200",children:[r.jsx("span",{className:"material-symbols-outlined text-primary group-hover:rotate-12 transition-transform",children:"store"}),r.jsx("h2",{className:"text-base md:text-lg font-bold",children:"Punto de Venta"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>le(!0),className:"lg:hidden relative p-2 text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[r.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"}),d.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-primary text-white text-[10px] size-5 rounded-full flex items-center justify-center font-black animate-in zoom-in",children:d.length})]}),r.jsx("div",{className:"text-[10px] md:text-xs font-bold text-slate-400 hidden sm:block",children:s.name})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden bg-slate-50 dark:bg-slate-900",children:[r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-6 pb-2 space-y-4",children:[r.jsxs("div",{className:"flex bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 h-12 shadow-sm overflow-hidden focus-within:ring-2 focus-within:ring-primary",children:[r.jsx("div",{className:"flex items-center justify-center px-4 text-slate-400",children:r.jsx("span",{className:"material-symbols-outlined",children:"search"})}),r.jsx("input",{className:"flex-1 bg-transparent border-none focus:ring-0 text-sm font-medium",placeholder:"Buscar producto...",value:x,onChange:Z=>m(Z.target.value)})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["Todos","Interiores","Exteriores","Esmaltes","Accesorios"].map(Z=>r.jsx("button",{onClick:()=>b(Z),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${p===Z?"bg-primary text-white":"bg-white dark:bg-slate-800 border dark:border-slate-700"}`,children:Z},Z))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 pb-6 custom-scrollbar",children:r.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:ae.map(Z=>{const fe=Z.inventory[n]||0;return r.jsxs("div",{className:"group flex flex-col bg-white dark:bg-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700 hover:border-primary transition-all cursor-pointer",onClick:()=>w(Z),children:[r.jsxs("div",{className:"relative aspect-square bg-slate-100 dark:bg-slate-900",children:[r.jsx("img",{src:Z.image,className:"w-full h-full object-contain p-4 group-hover:scale-110 transition-transform"}),r.jsxs("div",{className:`absolute top-2 right-2 text-[8px] font-bold px-1.5 py-0.5 rounded shadow-sm ${fe<5?"bg-red-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:[fe," DISP."]})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-xs font-bold truncate",children:Z.name}),r.jsxs("p",{className:"text-primary font-black mt-1",children:["$",Z.price.toLocaleString()]})]})]},Z.id)})})})]}),ce&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-40 transition-all",onClick:()=>le(!1)}),r.jsxs("div",{className:`
            fixed lg:static top-0 right-0 h-full w-[320px] md:w-[380px] bg-white dark:bg-slate-800 
            border-l border-slate-200 dark:border-slate-700 flex flex-col z-[45] shadow-2xl transition-all duration-300
            ${ce?"translate-x-0":"translate-x-full lg:translate-x-0"}
          `,children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>le(!1),className:"lg:hidden text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward_ios"})}),r.jsx("h3",{className:"font-bold text-sm",children:"Venta Actual"})]}),r.jsx("button",{onClick:()=>f([]),className:"text-slate-400 hover:text-red-500 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:d.map(Z=>r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 p-1",children:r.jsx("img",{src:Z.image,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-[11px] font-bold truncate",children:Z.name}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:fe=>{fe.stopPropagation(),P(Z.id,-1)},className:"size-5 rounded border flex items-center justify-center text-xs",children:"-"}),r.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-xs font-bold bg-transparent border-b border-slate-200 dark:border-slate-700 outline-none p-0 focus:border-primary",value:Z.quantity,onClick:fe=>fe.stopPropagation(),onChange:fe=>{const gt=parseInt(fe.target.value)||0;f(F=>F.map(_e=>_e.id===Z.id?{..._e,quantity:Math.max(0,gt)}:_e))}}),r.jsx("button",{onClick:fe=>{fe.stopPropagation(),P(Z.id,1)},className:"size-5 rounded border flex items-center justify-center text-xs",children:"+"})]}),r.jsx("div",{className:"flex flex-col items-end",children:Z.wholesalePrice&&Z.wholesaleMinQty&&Z.quantity>=Z.wholesaleMinQty?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-[10px] font-black text-green-600 bg-green-50 px-1.5 py-0.5 rounded mb-0.5",children:"MAYOREO"}),r.jsxs("span",{className:"text-xs font-black",children:["$",(Z.wholesalePrice*Z.quantity).toLocaleString()]})]}):r.jsxs("span",{className:"text-xs font-bold",children:["$",(Z.price*Z.quantity).toLocaleString()]})})]})]})]},Z.id))}),r.jsxs("div",{className:"p-4 border-t dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-400 font-bold",children:"SUBTOTAL"}),r.jsxs("span",{className:"font-bold",children:["$",ve.toLocaleString()]})]}),Ee&&r.jsxs("div",{className:"flex justify-between text-xs text-green-600 font-bold",children:[r.jsxs("span",{children:["DESCUENTO (",Ee.type==="percentage"?`${Ee.amount}%`:`$${Ee.amount}`,")"]}),r.jsxs("span",{children:["-$",ge.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-400 font-bold",children:"IVA (16%)"}),r.jsxs("span",{className:"font-bold",children:["$",J.toLocaleString()]})]})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsx("span",{className:"text-xs font-bold text-slate-400",children:"TOTAL"}),r.jsxs("span",{className:"text-2xl font-black text-primary",children:["$",pe.toLocaleString()]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{disabled:d.length===0||!!Re||!!Ee,onClick:()=>te(!0),className:"py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl hover:bg-slate-200 transition-all disabled:opacity-50",children:(Re==null?void 0:Re.status)==="pending"?"Esperando...":"Descuento"}),r.jsx("button",{disabled:d.length===0||(Re==null?void 0:Re.status)==="pending",onClick:()=>j(!0),className:"py-3 bg-primary text-white font-bold rounded-xl shadow-lg active:scale-95 disabled:opacity-50 transition-all",children:"Pagar Ahora"})]})]})]})]}),N&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden p-8",children:[r.jsx("h2",{className:"text-2xl font-black mb-6",children:"Confirmar Pago"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-xl",children:[r.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Monto a Cobrar"}),r.jsxs("p",{className:"text-3xl font-black text-primary",children:["$",pe.toLocaleString()]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Recibido"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-black text-xl",value:E,onChange:Z=>C(Z.target.value)})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Mtodo de Pago"}),r.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:["cash","card","transfer"].map(Z=>r.jsx("button",{onClick:()=>S(Z),className:`flex-1 py-2 rounded-lg text-xs font-bold uppercase transition-all ${_===Z?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:{cash:"Efectivo",card:"Tarjeta",transfer:"Transf."}[Z]},Z))})]}),r.jsxs("div",{className:"flex justify-between text-sm font-bold pt-2",children:[r.jsx("span",{className:"text-slate-500",children:"Cambio:"}),r.jsxs("span",{className:"text-green-600",children:["$",be.toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 font-bold text-slate-400",children:"Cancelar"}),r.jsx("button",{onClick:at,disabled:A,className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl",children:A?"Procesando...":"Finalizar"})]})]}),U&&r.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-slate-800 flex flex-col items-center justify-center p-8 text-center animate-in zoom-in-95",children:[r.jsx("div",{className:"size-20 rounded-full bg-green-500 text-white flex items-center justify-center mb-4",children:r.jsx("span",{className:"material-symbols-outlined text-5xl",children:"check"})}),r.jsx("h3",{className:"text-2xl font-black",children:"Venta Exitosa!"}),r.jsx("p",{className:"text-slate-500",children:"Inventario actualizado en tiempo real."})]})]})}),Y&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden p-8",children:[r.jsx("h2",{className:"text-xl font-black mb-6",children:"Solicitar Descuento"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:["percentage","fixed"].map(Z=>r.jsx("button",{onClick:()=>re(Z),className:`flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${q===Z?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-400"}`,children:Z==="percentage"?"Porcentaje (%)":"Monto Fijo ($)"},Z))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Valor del Descuento"}),r.jsx("input",{type:"number",value:T,onChange:Z=>V(Z.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-bold",placeholder:q==="percentage"?"Ej: 10":"Ej: 50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Motivo"}),r.jsx("textarea",{value:me,onChange:Z=>ne(Z.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-medium text-sm h-24 resize-none",placeholder:"Escriba la razn para este descuento..."})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-3 font-bold text-slate-400",children:"Cancelar"}),r.jsx("button",{onClick:ie,disabled:!T||!me||A,className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl disabled:opacity-50",children:A?"Enviando...":"Solicitar"})]})]})]})})]})]})},Ir="0.37.0";let Rp=!1,nl,gx,bx,Vu,yx,vx,wx,jx,Nx;function jj(s,a={auto:!1}){if(Rp)throw new Error(`you must \`import 'groq-sdk/shims/${s.kind}'\` before importing anything else from groq-sdk`);if(nl)throw new Error(`can't \`import 'groq-sdk/shims/${s.kind}'\` after \`import 'groq-sdk/shims/${nl}'\``);Rp=a.auto,nl=s.kind,gx=s.fetch,bx=s.FormData,Vu=s.File,yx=s.ReadableStream,vx=s.getMultipartRequestOptions,wx=s.getDefaultAgent,jx=s.fileFromPath,Nx=s.isFsReadStream}class Nj{constructor(a){this.body=a}get[Symbol.toStringTag](){return"MultipartBody"}}function _j({manuallyImported:s}={}){const a=s?"You may need to use polyfills":"Add one of these imports before your first `import  from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,i,c,d;try{n=fetch,i=Request,c=Response,d=Headers}catch(f){throw new Error(`this environment is missing the following Web Fetch API type: ${f.message}. ${a}`)}return{kind:"web",fetch:n,Request:i,Response:c,Headers:d,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${a}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${a}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${a}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${a}`)}},getMultipartRequestOptions:async(f,x)=>({...x,body:new Nj(f)}),getDefaultAgent:f=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:f=>!1}}const _x=()=>{nl||jj(_j(),{auto:!0})};_x();class ha extends Error{}class Rt extends ha{constructor(a,n,i,c){super(`${Rt.makeMessage(a,n,i)}`),this.status=a,this.headers=c,this.error=n}static makeMessage(a,n,i){const c=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return a&&c?`${a} ${c}`:a?`${a} status code (no body)`:c||"(no status code or body)"}static generate(a,n,i,c){if(!a||!c)return new Fi({message:i,cause:Xu(n)});const d=n;return a===400?new Sx(a,d,i,c):a===401?new Ex(a,d,i,c):a===403?new Ax(a,d,i,c):a===404?new Rx(a,d,i,c):a===409?new Cx(a,d,i,c):a===422?new Tx(a,d,i,c):a===429?new Ox(a,d,i,c):a>=500?new Dx(a,d,i,c):new Rt(a,d,i,c)}}class Ku extends Rt{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class Fi extends Rt{constructor({message:a,cause:n}){super(void 0,void 0,a||"Connection error.",void 0),n&&(this.cause=n)}}class kx extends Fi{constructor({message:a}={}){super({message:a??"Request timed out."})}}class Sx extends Rt{}class Ex extends Rt{}class Ax extends Rt{}class Rx extends Rt{}class Cx extends Rt{}class Tx extends Rt{}class Ox extends Rt{}class Dx extends Rt{}class Gr{constructor(a,n){this.iterator=a,this.controller=n}static fromSSEResponse(a,n){let i=!1;const c=new kj;async function*d(){if(!a.body)throw n.abort(),new ha("Attempted to iterate over a response with no body");const x=new Fs,m=Cp(a.body);for await(const p of m)for(const b of x.decode(p)){const N=c.decode(b);N&&(yield N)}for(const p of x.flush()){const b=c.decode(p);b&&(yield b)}}async function*f(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let x=!1;try{for await(const m of d())if(!x){if(m.data.startsWith("[DONE]")){x=!0;continue}if(m.event===null||m.event==="error"){let p;try{p=JSON.parse(m.data)}catch(b){throw console.error("Could not parse message into JSON:",m.data),console.error("From chunk:",m.raw),b}if(p&&p.error)throw new Rt(p.error.status_code,p.error,p.error.message,void 0);yield p}}x=!0}catch(m){if(m instanceof Error&&m.name==="AbortError")return;throw m}finally{x||n.abort()}}return new Gr(f,n)}static fromReadableStream(a,n){let i=!1;async function*c(){const f=new Fs,x=Cp(a);for await(const m of x)for(const p of f.decode(m))yield p;for(const m of f.flush())yield m}async function*d(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{for await(const x of c())f||x&&(yield JSON.parse(x));f=!0}catch(x){if(x instanceof Error&&x.name==="AbortError")return;throw x}finally{f||n.abort()}}return new Gr(d,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const a=[],n=[],i=this.iterator(),c=d=>({next:()=>{if(d.length===0){const f=i.next();a.push(f),n.push(f)}return d.shift()}});return[new Gr(()=>c(a),this.controller),new Gr(()=>c(n),this.controller)]}toReadableStream(){const a=this;let n;const i=new TextEncoder;return new yx({async start(){n=a[Symbol.asyncIterator]()},async pull(c){try{const{value:d,done:f}=await n.next();if(f)return c.close();const x=i.encode(JSON.stringify(d)+`
`);c.enqueue(x)}catch(d){c.error(d)}},async cancel(){var c;await((c=n.return)==null?void 0:c.call(n))}})}}class kj{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(a),a.startsWith(":"))return null;let[n,i,c]=Sj(a,":");return c.startsWith(" ")&&(c=c.substring(1)),n==="event"?this.event=c:n==="data"&&this.data.push(c),null}}class Fs{constructor(){this.buffer=[],this.trailingCR=!1}decode(a){let n=this.decodeText(a);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const i=Fs.NEWLINE_CHARS.has(n[n.length-1]||"");let c=n.split(Fs.NEWLINE_REGEXP);return c.length===1&&!i?(this.buffer.push(c[0]),[]):(this.buffer.length>0&&(c=[this.buffer.join("")+c[0],...c.slice(1)],this.buffer=[]),i||(this.buffer=[c.pop()||""]),c)}decodeText(a){if(a==null)return"";if(typeof a=="string")return a;if(typeof Buffer<"u"){if(a instanceof Buffer)return a.toString();if(a instanceof Uint8Array)return Buffer.from(a).toString();throw new ha(`Unexpected: received non-Uint8Array (${a.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(a instanceof Uint8Array||a instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(a);throw new ha(`Unexpected: received non-Uint8Array/ArrayBuffer (${a.constructor.name}) in a web platform. Please report this error.`)}throw new ha("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const a=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,a}}Fs.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);Fs.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Sj(s,a){const n=s.indexOf(a);return n!==-1?[s.substring(0,n),a,s.substring(n+a.length)]:[s,"",""]}function Cp(s){if(s[Symbol.asyncIterator])return s;const a=s.getReader();return{async next(){try{const n=await a.read();return n!=null&&n.done&&a.releaseLock(),n}catch(n){throw a.releaseLock(),n}},async return(){const n=a.cancel();return a.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Ux=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",qx=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Ji(s),Ji=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",Ej=s=>qx(s)||Ux(s)||Nx(s);async function Mx(s,a,n){var c;if(s=await s,qx(s))return s;if(Ux(s)){const d=await s.blob();a||(a=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const f=Ji(d)?[await d.arrayBuffer()]:[d];return new Vu(f,a,n)}const i=await Aj(s);if(a||(a=Cj(s)??"unknown_file"),!(n!=null&&n.type)){const d=(c=i[0])==null?void 0:c.type;typeof d=="string"&&(n={...n,type:d})}return new Vu(i,a,n)}async function Aj(s){var n;let a=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)a.push(s);else if(Ji(s))a.push(await s.arrayBuffer());else if(Tj(s))for await(const i of s)a.push(i);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(n=s==null?void 0:s.constructor)==null?void 0:n.name}; props: ${Rj(s)}`);return a}function Rj(s){return`[${Object.getOwnPropertyNames(s).map(n=>`"${n}"`).join(", ")}]`}function Cj(s){var a;return Au(s.name)||Au(s.filename)||((a=Au(s.path))==null?void 0:a.split(/[\\/]/).pop())}const Au=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},Tj=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",Tp=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",od=async s=>{const a=await Oj(s.body);return vx(a,s)},Oj=async s=>{const a=new bx;return await Promise.all(Object.entries(s||{}).map(([n,i])=>Yu(a,n,i))),a},Yu=async(s,a,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${a}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")s.append(a,String(n));else if(Ej(n)){const i=await Mx(n);s.append(a,i)}else if(Array.isArray(n))await Promise.all(n.map(i=>Yu(s,a+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,c])=>Yu(s,`${a}[${i}]`,c)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Yr={},Dj=function(s,a,n,i,c){if(typeof a=="function"?s!==a||!0:!a.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a.set(s,n),n},Uj=function(s,a,n,i){if(typeof a=="function"?s!==a||!0:!a.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a.get(s)},Bi;_x();async function Lx(s){var f;const{response:a}=s;if(s.options.stream)return Xr("response",a.status,a.url,a.headers,a.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(a,s.controller):Gr.fromSSEResponse(a,s.controller);if(a.status===204)return null;if(s.options.__binaryResponse)return a;const n=a.headers.get("content-type"),i=(f=n==null?void 0:n.split(";")[0])==null?void 0:f.trim();if((i==null?void 0:i.includes("application/json"))||(i==null?void 0:i.endsWith("+json"))){const x=await a.json();return Xr("response",a.status,a.url,a.headers,x),x}const d=await a.text();return Xr("response",a.status,a.url,a.headers,d),d}class Wi extends Promise{constructor(a,n=Lx){super(i=>{i(null)}),this.responsePromise=a,this.parseResponse=n}_thenUnwrap(a){return new Wi(this.responsePromise,async n=>a(await this.parseResponse(n),n))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){const[a,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(a,n){return this.parse().then(a,n)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}class qj{constructor({baseURL:a,baseURLOverridden:n,maxRetries:i=2,timeout:c=6e4,httpAgent:d,fetch:f}){Bi.set(this,void 0),this.baseURL=a,Dj(this,Bi,n),this.maxRetries=Ru("maxRetries",i),this.timeout=Ru("timeout",c),this.httpAgent=d,this.fetch=f??gx}authHeaders(a){return{}}defaultHeaders(a){return{Accept:"application/json",...["head","get"].includes(a.method)?{}:{"Content-Type":"application/json"},"User-Agent":this.getUserAgent(),...$j(),...this.authHeaders(a)}}validateHeaders(a,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Yj()}`}get(a,n){return this.methodRequest("get",a,n)}post(a,n){return this.methodRequest("post",a,n)}patch(a,n){return this.methodRequest("patch",a,n)}put(a,n){return this.methodRequest("put",a,n)}delete(a,n){return this.methodRequest("delete",a,n)}methodRequest(a,n,i){return this.request(Promise.resolve(i).then(async c=>{const d=c&&Ji(c==null?void 0:c.body)?new DataView(await c.body.arrayBuffer()):(c==null?void 0:c.body)instanceof DataView?c.body:(c==null?void 0:c.body)instanceof ArrayBuffer?new DataView(c.body):c&&ArrayBuffer.isView(c==null?void 0:c.body)?new DataView(c.body.buffer):c==null?void 0:c.body;return{method:a,path:n,...c,body:d}}))}getAPIList(a,n,i){return this.requestAPIList(n,{method:"get",path:a,...i})}calculateContentLength(a){if(typeof a=="string"){if(typeof Buffer<"u")return Buffer.byteLength(a,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(a).length.toString()}else if(ArrayBuffer.isView(a))return a.byteLength.toString();return null}async buildRequest(a,{retryCount:n=0}={}){var C;const i={...a},{method:c,path:d,query:f,defaultBaseURL:x,headers:m={}}=i,p=ArrayBuffer.isView(i.body)||i.__binaryRequest&&typeof i.body=="string"?i.body:Tp(i.body)?i.body.body:i.body?JSON.stringify(i.body,null,2):null,b=this.calculateContentLength(p),N=this.buildURL(d,f,x);"timeout"in i&&Ru("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const j=i.httpAgent??this.httpAgent??wx(N),_=i.timeout+1e3;typeof((C=j==null?void 0:j.options)==null?void 0:C.timeout)=="number"&&_>(j.options.timeout??0)&&(j.options.timeout=_),this.idempotencyHeader&&c!=="get"&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),m[this.idempotencyHeader]=a.idempotencyKey);const S=this.buildHeaders({options:i,headers:m,contentLength:b,retryCount:n});return{req:{method:c,...p&&{body:p},headers:S,...j&&{agent:j},signal:i.signal??null},url:N,timeout:i.timeout}}buildHeaders({options:a,headers:n,contentLength:i,retryCount:c}){const d={};i&&(d["content-length"]=i);const f=this.defaultHeaders(a);return Mp(d,f),Mp(d,n),Tp(a.body)&&nl!=="node"&&delete d["content-type"],Mi(f,"x-stainless-retry-count")===void 0&&Mi(n,"x-stainless-retry-count")===void 0&&(d["x-stainless-retry-count"]=String(c)),Mi(f,"x-stainless-timeout")===void 0&&Mi(n,"x-stainless-timeout")===void 0&&a.timeout&&(d["x-stainless-timeout"]=String(Math.trunc(a.timeout/1e3))),this.validateHeaders(d,n),d}async prepareOptions(a){}async prepareRequest(a,{url:n,options:i}){}parseHeaders(a){return a?Symbol.iterator in a?Object.fromEntries(Array.from(a).map(n=>[...n])):{...a}:{}}makeStatusError(a,n,i,c){return Rt.generate(a,n,i,c)}request(a,n=null){return new Wi(this.makeRequest(a,n))}async makeRequest(a,n){var N,j;const i=await a,c=i.maxRetries??this.maxRetries;n==null&&(n=c),await this.prepareOptions(i);const{req:d,url:f,timeout:x}=await this.buildRequest(i,{retryCount:c-n});if(await this.prepareRequest(d,{url:f,options:i}),Xr("request",f,i,d.headers),(N=i.signal)!=null&&N.aborted)throw new Ku;const m=new AbortController,p=await this.fetchWithTimeout(f,d,x,m).catch(Xu);if(p instanceof Error){if((j=i.signal)!=null&&j.aborted)throw new Ku;if(n)return this.retryRequest(i,n);throw p.name==="AbortError"?new kx:new Fi({cause:p})}const b=Lj(p.headers);if(!p.ok){if(n&&this.shouldRetry(p)){const R=`retrying, ${n} attempts remaining`;return Xr(`response (error; ${R})`,p.status,f,b),this.retryRequest(i,n,b)}const _=await p.text().catch(R=>Xu(R).message),S=Pj(_),E=S?void 0:_;throw Xr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,p.status,f,b,E),this.makeStatusError(p.status,S,E,b)}return{response:p,options:i,controller:m}}requestAPIList(a,n){const i=this.makeRequest(n,null);return new Mj(this,i,a)}buildURL(a,n,i){const c=!Uj(this,Bi)&&i||this.baseURL,d=Hj(a)?new URL(a):new URL(c+(c.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return Vj(f)||(n={...f,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(d.search=this.stringifyQuery(n)),d.toString()}stringifyQuery(a){return Object.entries(a).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new ha(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(a,n,i,c){const{signal:d,...f}=n||{};d&&d.addEventListener("abort",()=>c.abort());const x=setTimeout(()=>c.abort(),i),m={signal:c.signal,...f};return m.method&&(m.method=m.method.toUpperCase()),this.fetch.call(void 0,a,m).finally(()=>{clearTimeout(x)})}shouldRetry(a){const n=a.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:a.status===408||a.status===409||a.status===429||a.status>=500}async retryRequest(a,n,i){let c;const d=i==null?void 0:i["retry-after-ms"];if(d){const x=parseFloat(d);Number.isNaN(x)||(c=x)}const f=i==null?void 0:i["retry-after"];if(f&&!c){const x=parseFloat(f);Number.isNaN(x)?c=Date.parse(f)-Date.now():c=x*1e3}if(!(c&&0<=c&&c<60*1e3)){const x=a.maxRetries??this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,x)}return await Gj(c),this.makeRequest(a,n-1)}calculateDefaultRetryTimeoutMillis(a,n){const d=n-a,f=Math.min(.5*Math.pow(2,d),8),x=1-Math.random()*.25;return f*x*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ir}`}}Bi=new WeakMap;class Mj extends Wi{constructor(a,n,i){super(n,async c=>new i(a,c.response,await Lx(c),c.options))}async*[Symbol.asyncIterator](){const a=await this;for await(const n of a)yield n}}const Lj=s=>new Proxy(Object.fromEntries(s.entries()),{get(a,n){const i=n.toString();return a[i.toLowerCase()]||a[i]}}),zj=()=>{var a;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Dp(Deno.build.os),"X-Stainless-Arch":Op(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((a=Deno.version)==null?void 0:a.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Dp(process.platform),"X-Stainless-Arch":Op(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=Bj();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Bj(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:a,pattern:n}of s){const i=n.exec(navigator.userAgent);if(i){const c=i[1]||0,d=i[2]||0,f=i[3]||0;return{browser:a,version:`${c}.${d}.${f}`}}}return null}const Op=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Dp=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let Up;const $j=()=>Up??(Up=zj()),Pj=s=>{try{return JSON.parse(s)}catch{return}},Ij=/^[a-z][a-z0-9+.-]*:/i,Hj=s=>Ij.test(s),Gj=s=>new Promise(a=>setTimeout(a,s)),Ru=(s,a)=>{if(typeof a!="number"||!Number.isInteger(a))throw new ha(`${s} must be an integer`);if(a<0)throw new ha(`${s} must be a positive integer`);return a},Xu=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null)try{return new Error(JSON.stringify(s))}catch{}return new Error(s)},qp=s=>{var a,n,i,c;if(typeof process<"u")return((a=Yr==null?void 0:Yr[s])==null?void 0:a.trim())??void 0;if(typeof Deno<"u")return(c=(i=(n=Deno.env)==null?void 0:n.get)==null?void 0:i.call(n,s))==null?void 0:c.trim()};function Vj(s){if(!s)return!0;for(const a in s)return!1;return!0}function Kj(s,a){return Object.prototype.hasOwnProperty.call(s,a)}function Mp(s,a){for(const n in a){if(!Kj(a,n))continue;const i=n.toLowerCase();if(!i)continue;const c=a[n];c===null?delete s[i]:c!==void 0&&(s[i]=c)}}function Xr(s,...a){typeof process<"u"&&(Yr==null?void 0:Yr.DEBUG)==="true"&&console.log(`Groq:DEBUG:${s}`,...a)}const Yj=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const a=Math.random()*16|0;return(s==="x"?a:a&3|8).toString(16)}),Xj=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Qj=s=>typeof(s==null?void 0:s.get)=="function",Mi=(s,a)=>{var i;const n=a.toLowerCase();if(Qj(s)){const c=((i=a[0])==null?void 0:i.toUpperCase())+a.substring(1).replace(/([^\w])(\w)/g,(d,f,x)=>f+x.toUpperCase());for(const d of[a,n,a.toUpperCase(),c]){const f=s.get(d);if(f)return f}}for(const[c,d]of Object.entries(s))if(c.toLowerCase()===n)return Array.isArray(d)?(d.length<=1||console.warn(`Received ${d.length} entries for the ${a} header, using the first entry.`),d[0]):d};class xa{constructor(a){this._client=a}}class zx extends xa{create(a,n){return this._client.post("/openai/v1/audio/speech",{body:a,...n,headers:{Accept:"audio/wav",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Bx extends xa{create(a,n){return this._client.post("/openai/v1/audio/transcriptions",od({body:a,...n}))}}class $x extends xa{create(a,n){return this._client.post("/openai/v1/audio/translations",od({body:a,...n}))}}class gl extends xa{constructor(){super(...arguments),this.speech=new zx(this._client),this.transcriptions=new Bx(this._client),this.translations=new $x(this._client)}}gl.Speech=zx;gl.Transcriptions=Bx;gl.Translations=$x;class Px extends xa{create(a,n){return this._client.post("/openai/v1/batches",{body:a,...n})}retrieve(a,n){return this._client.get(`/openai/v1/batches/${a}`,n)}list(a){return this._client.get("/openai/v1/batches",a)}cancel(a,n){return this._client.post(`/openai/v1/batches/${a}/cancel`,n)}}let Ix=class extends xa{create(a,n){return this._client.post("/openai/v1/chat/completions",{body:a,...n,stream:a.stream??!1})}};class cd extends xa{constructor(){super(...arguments),this.completions=new Ix(this._client)}}cd.Completions=Ix;class Hx extends xa{}class Gx extends xa{create(a,n){return this._client.post("/openai/v1/embeddings",{body:a,...n})}}class Vx extends xa{create(a,n){return this._client.post("/openai/v1/files",od({body:a,...n}))}list(a){return this._client.get("/openai/v1/files",a)}delete(a,n){return this._client.delete(`/openai/v1/files/${a}`,n)}content(a,n){return this._client.get(`/openai/v1/files/${a}/content`,{...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}info(a,n){return this._client.get(`/openai/v1/files/${a}`,n)}}class Kx extends xa{retrieve(a,n){return this._client.get(`/openai/v1/models/${a}`,n)}list(a){return this._client.get("/openai/v1/models",a)}delete(a,n){return this._client.delete(`/openai/v1/models/${a}`,n)}}var Yx,Xx;class Ve extends qj{constructor({baseURL:a=qp("GROQ_BASE_URL"),apiKey:n=qp("GROQ_API_KEY"),...i}={}){if(n===void 0)throw new ha("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const c={apiKey:n,...i,baseURL:a||"https://api.groq.com"};if(!c.dangerouslyAllowBrowser&&Xj())throw new ha(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:c.baseURL,baseURLOverridden:a?a!=="https://api.groq.com":!1,timeout:c.timeout??6e4,httpAgent:c.httpAgent,maxRetries:c.maxRetries,fetch:c.fetch}),Yx.add(this),this.completions=new Hx(this),this.chat=new cd(this),this.embeddings=new Gx(this),this.audio=new gl(this),this.models=new Kx(this),this.batches=new Px(this),this.files=new Vx(this),this._options=c,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(a){return{...super.defaultHeaders(a),...this._options.defaultHeaders}}authHeaders(a){return{Authorization:`Bearer ${this.apiKey}`}}}Xx=Ve,Yx=new WeakSet;Ve.Groq=Xx;Ve.DEFAULT_TIMEOUT=6e4;Ve.GroqError=ha;Ve.APIError=Rt;Ve.APIConnectionError=Fi;Ve.APIConnectionTimeoutError=kx;Ve.APIUserAbortError=Ku;Ve.NotFoundError=Rx;Ve.ConflictError=Cx;Ve.RateLimitError=Ox;Ve.BadRequestError=Sx;Ve.AuthenticationError=Ex;Ve.InternalServerError=Dx;Ve.PermissionDeniedError=Ax;Ve.UnprocessableEntityError=Tx;Ve.toFile=Mx;Ve.fileFromPath=jx;Ve.Completions=Hx;Ve.Chat=cd;Ve.Embeddings=Gx;Ve.Audio=gl;Ve.Models=Kx;Ve.Batches=Px;Ve.Files=Vx;const Cu="pintamax_groq_api_key",Fj="",Gi=class Gi{static initialize(){const a=localStorage.getItem(Cu)||Fj;a&&!this.groq&&(this.groq=new Ve({apiKey:a,dangerouslyAllowBrowser:!0}))}static setApiKey(a){localStorage.setItem(Cu,a),this.groq=null,this.initialize()}static hasApiKey(){return!!localStorage.getItem(Cu)||!1}static async sendMessage(a,n){var x,m;this.initialize();let i="",c="";switch(n.userRole){case"ADMIN":i="Eres el consultor estratgico de Pintamax. Enfcate en anlisis de ventas, eficiencia de sucursales y sugerencias proactivas para el negocio.",n.financeContext&&(c=`
                    RESUMEN FINANCIERO (ADMIN):
                    - Cuentas por Pagar: $${n.financeContext.accountsPayable.toLocaleString()}
                    - Gastos Mes: $${n.financeContext.monthlyExpenses.toLocaleString()}
                    - Utilidad Neta Est.: $${n.financeContext.netIncome.toLocaleString()}
                    `);break;case"FINANCE":i="Eres 'ContadorAI', el asistente financiero experto de Pintamax. Tu labor es analizar flujos de caja, detectar gastos inusuales y asegurar el pago puntual a proveedores.",n.financeContext&&(c=`
                    ESTADO FINANCIERO ACTUAL:
                    - Cuentas por Pagar (Deuda): $${n.financeContext.accountsPayable.toLocaleString()}
                    - Gastos Operativos Mes: $${n.financeContext.monthlyExpenses.toLocaleString()}
                    - Utilidad Estimada: $${n.financeContext.netIncome.toLocaleString()}
                    `);break;case"WAREHOUSE":case"WAREHOUSE_SUB":i="Eres el experto en logstica de Pintamax. Tu prioridad es el control de stock, movimientos de almacn, caducidades y reportes de inventario crtico.";break;default:i="Eres el asesor tcnico de ventas de Pintamax. Tu objetivo es ayudar al cliente a elegir el producto correcto, explicar beneficios tcnicos y verificar disponibilidad inmediata."}const d=n.products.slice(0,50).map(p=>`- ${p.name} ($${p.price}) Stock:${Object.values(p.inventory||{}).reduce((b,N)=>b+N,0)}`).join(`
`),f=`
      ESTO ES UN SISTEMA DE GESTIN (SaaS) PARA PINTURERAS LLAMADO PINTAMAX.
      
      ${i}
      
      CONTEXTO OPERATIVO:
      - Sucursal Activa: ${n.branchId||"General"}
      ${c}
      - Catlogo/Stock Actual (Muestra):
      ${d.slice(0,3e4)}

      REGLAS CRTICAS:
      1. Solo responde basado en los datos proporcionados. Si un producto no est en la lista, di que no lo tenemos.
      2. No inventes precios.
      3. Mantn un tono profesional acorde a tu rol asignado.
      4. Si el usuario te saluda, identifcate segn tu rol de forma amable.
      5. S conciso pero informativo.
    `;try{if(!this.groq)throw new Error("Groq client not initialized");return((m=(x=(await this.groq.chat.completions.create({messages:[{role:"system",content:f},{role:"user",content:a}],model:this.modelName,temperature:.5,max_tokens:1024})).choices[0])==null?void 0:x.message)==null?void 0:m.content)||"No pude generar una respuesta."}catch(p){return console.error("DEBUG - Groq Error:",p),`Lo siento, tuve un problema conectando con Groq: ${(p==null?void 0:p.message)||"Error desconocido"}.`}}static async generateBusinessInsights(a){var x,m;this.initialize();const n=a.sales.reduce((p,b)=>p+b.total,0),i={};a.sales.forEach(p=>{p.items.forEach(b=>{i[b.productName]=(i[b.productName]||0)+b.quantity})});const c=Object.entries(i).sort(([,p],[,b])=>b-p).slice(0,5).map(([p,b])=>`${p} (${b} vendidos)`).join(", "),d=a.products.filter(p=>Object.values(p.inventory).reduce((b,N)=>b+N,0)<10).slice(0,5).map(p=>p.name).join(", "),f=`
            ACTA COMO UN CONSULTOR DE NEGOCIOS EXPERTO PARA PINTAMAX (Pinturera).
            
            DATOS DE LA SEMANA/MES:
            - Ventas Totales: $${n.toLocaleString()}
            - Productos Estrella: ${c||"Sin datos suficientes"}
            - Alerta Stock Bajo: ${d||"Ninguno crtico"}

            TU TAREA:
            Genera 3 consejos estratgicos MUY BREVES Y ACCIONABLES (mximo 15 palabras cada uno) en formato JSON estricto.
            Deben enfocarse en: 1) Aumentar margen, 2) Mover inventario estancado, o 3) Prevenir quiebres de stock.
            
            FORMATO RESPUESTA JSON:
            {
                "tips": [
                    { "title": "Promocin", "description": "Haz pack de rodillos con pintura..." },
                    { "title": "Reabastece", "description": "Pide ms Impermeabilizante antes del viernes..." },
                    { "title": "Oportunidad", "description": "Sube precio a X..." }
                ]
            }
            SOLO JSON VALIDO. SIN EXPLICACIONES.
        `;try{if(!this.groq)throw new Error("Groq client not initialized");return((m=(x=(await this.groq.chat.completions.create({messages:[{role:"user",content:f}],model:this.modelName,temperature:.4,response_format:{type:"json_object"},max_tokens:300})).choices[0])==null?void 0:x.message)==null?void 0:m.content)||'{"tips": []}'}catch(p){return console.error("DEBUG - Groq Insights Error:",p),'{"tips": []}'}}static async getDynamicPricingSuggestion(a,n){var f,x;this.initialize();const i=n.reduce((m,p)=>m+p.price*p.quantity,0),c=n.map(m=>`${m.name} (x${m.quantity})`).join(", "),d=`
            ACTA COMO UN GERENTE DE VENTAS EXPERTO.
            
            CLIENTE: ${a.name} (${a.type})
            HISTORIAL: Lmite crdito $${a.creditLimit||0}, Das crdito: ${a.creditDays||0}
            COMPRA ACTUAL: $${i.toLocaleString()} - Items: ${c}

            TU TAREA:
            Sugiere un porcentaje de descuento (0-15%) para cerrar esta venta, considerando el volumen y perfil del cliente.
            
            FORMATO RESPUESTA JSON:
            {
                "discount": 5,
                "reasoning": "Volumen alto de cubetas y cliente frecuente."
            }
        `;try{if(!this.groq)throw new Error("Groq client not initialized");const m=await this.groq.chat.completions.create({messages:[{role:"user",content:d}],model:this.modelName,temperature:.3,response_format:{type:"json_object"},max_tokens:150}),p=JSON.parse(((x=(f=m.choices[0])==null?void 0:f.message)==null?void 0:x.content)||"{}");return{discount:p.discount||0,reasoning:p.reasoning||"No se pudo generar descuento."}}catch(m){return console.error("DEBUG - AI Pricing Error:",m),{discount:0,reasoning:"Error de conexin con IA."}}}};Gi.groq=null,Gi.modelName="llama-3.3-70b-versatile";let Xs=Gi;const Jj=()=>{const[s,a]=v.useState([]),[n,i]=v.useState(!0),[c,d]=v.useState(!1),f=async()=>{i(!0),d(!1);try{const x=new Date,m=new Date;m.setDate(x.getDate()-30);const[p,b]=await Promise.all([Qs.getSalesWithFilters(m.toISOString(),x.toISOString(),"ALL"),ke.getProductsByBranch("ALL")]),N=await Xs.generateBusinessInsights({sales:p,products:b}),j=JSON.parse(N);if(j.tips&&Array.isArray(j.tips))a(j.tips.slice(0,3));else throw new Error("Invalid format")}catch(x){console.error("Failed to load AI insights",x),d(!0)}finally{i(!1)}};return v.useEffect(()=>{f()},[]),c?null:r.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 p-6 md:p-8 rounded-[32px] shadow-xl text-white relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),r.jsxs("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white/10 rounded-xl backdrop-blur-md",children:r.jsx("span",{className:"material-symbols-outlined text-yellow-300",children:"lightbulb"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-lg tracking-tight",children:"Consejos Estratgicos"}),r.jsx("p",{className:"text-[10px] text-white/60 font-bold uppercase tracking-widest",children:"IA Consulting de Pintamax"})]})]}),r.jsx("button",{onClick:f,disabled:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors disabled:opacity-50",children:r.jsx("span",{className:`material-symbols-outlined text-white/50 ${n?"animate-spin":""}`,children:"refresh"})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 relative z-10",children:n?[1,2,3].map(x=>r.jsx("div",{className:"bg-white/5 p-4 rounded-2xl animate-pulse h-24"},x)):s.map((x,m)=>r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-5 rounded-2xl border border-white/5 hover:bg-white/20 transition-all cursor-default",children:[r.jsx("h4",{className:"font-bold text-yellow-300 text-xs uppercase tracking-wider mb-2",children:x.title}),r.jsx("p",{className:"text-sm font-medium leading-relaxed opacity-90",children:x.description})]},m))}),!n&&s.length===0&&r.jsx("div",{className:"text-center py-4 text-white/50 text-xs italic",children:"No hay suficientes datos para generar consejos hoy."})]})},Wj=({user:s,onLogout:a})=>{var R;const n=A=>{switch(A){case"pending":return"bg-amber-100 text-amber-700";case"processing":return"bg-blue-100 text-blue-700";case"shipped":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-500"}},[i,c]=v.useState([]),[d,f]=v.useState([]),[x,m]=v.useState([]),[p,b]=v.useState(0),[N,j]=v.useState(null);v.useEffect(()=>{_()},[]);const _=async()=>{try{const[A,$,Y]=await Promise.all([ke.getRestockRequests(void 0,"pending_admin"),xs.getPendingRequests(),ke.getSupplyOrders()]);c(A),f($),m(Y.filter(T=>T.status!=="received"&&T.status!=="cancelled"));const te=JSON.parse(localStorage.getItem("pintamax_sales_history")||"[]");b(te.reduce((T,V)=>T+V.total,0))}catch(A){console.error("Error loading dashboard:",A)}};v.useEffect(()=>{const A=xs.subscribeToAllPending(()=>{_()});return()=>{A.unsubscribe()}},[]);const S=async A=>{try{await ke.updateRestockStatus(A.id,"approved_warehouse"),alert("Solicitud aprobada correctamente. Ahora aparece en el Panel de Bodega."),await _()}catch($){console.error($),alert("Error al aprobar la solicitud.")}},E=async A=>{try{await xs.approveDiscount(A),await _()}catch($){console.error($),alert("Error al aprobar descuento.")}},C=async A=>{try{await xs.rejectDiscount(A),await _()}catch($){console.error($),alert("Error al rechazar descuento.")}},U=async(A,$)=>{try{await ke.updateSupplyOrderStatus(A,$,s.id),await _()}catch(Y){console.error(Y),alert("Error al actualizar estado del pedido.")}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col overflow-y-auto bg-slate-50 dark:bg-slate-950 custom-scrollbar relative",children:[r.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md px-6 md:px-10 h-20 flex items-center justify-between border-b dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 lg:hidden"}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("h1",{className:"text-xl md:text-2xl font-black tracking-tight",children:"Consola"}),r.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest hidden sm:block",children:"Vista Global"})]})]}),r.jsx("div",{className:"flex items-center gap-6",children:r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-green-500 bg-green-500/10 px-3 py-1.5 rounded-full uppercase tracking-widest",children:[r.jsx("span",{className:"size-1.5 bg-green-500 rounded-full animate-pulse"}),"Servicio Operativo"]})})]}),r.jsxs("div",{className:"p-4 md:p-10 max-w-[1600px] mx-auto w-full space-y-6 md:space-y-10",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[32px] border dark:border-slate-800 shadow-sm space-y-4 transition-all hover:shadow-xl hover:-translate-y-1",children:[r.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Venta Consolidada"}),r.jsxs("h3",{className:"text-4xl font-black text-slate-900 dark:text-white leading-none tracking-tighter",children:["$",(410500+p).toLocaleString()]}),r.jsxs("p",{className:"text-xs font-bold text-green-500 flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"trending_up"})," +12.4% vs mes anterior"]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[32px] border dark:border-slate-800 shadow-sm space-y-4 transition-all hover:shadow-xl hover:-translate-y-1",children:[r.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Despachos Hoy"}),r.jsx("h3",{className:"text-4xl font-black text-slate-900 dark:text-white leading-none tracking-tighter",children:"14"}),r.jsx("p",{className:"text-xs font-bold text-slate-500 italic",children:"4 pedidos en ruta"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[32px] border dark:border-slate-800 shadow-sm space-y-4 transition-all hover:shadow-xl hover:-translate-y-1",children:[r.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Uso de Almacn"}),r.jsx("h3",{className:"text-4xl font-black text-primary leading-none tracking-tighter",children:"62%"}),r.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 h-1.5 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-primary h-full w-[62%]"})})]}),r.jsxs("div",{className:"bg-slate-900 dark:bg-primary p-8 rounded-[32px] text-white shadow-2xl shadow-primary/20 space-y-4 transition-all hover:scale-[1.02]",children:[r.jsx("p",{className:"text-[11px] font-black opacity-60 uppercase tracking-[0.2em]",children:"Solicitudes Pendientes"}),r.jsxs("h3",{className:"text-4xl font-black leading-none tracking-tighter",children:[i.length+d.length," Solicitudes"]}),r.jsxs("p",{className:"text-xs font-bold opacity-80 uppercase tracking-widest",children:[d.length," de descuento  ",i.length," de stock"]})]})]}),(s.role==="ADMIN"||s.role==="FINANCE")&&r.jsx(Jj,{}),i.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 md:p-10 rounded-[32px] md:rounded-[40px] border dark:border-slate-800 shadow-sm",children:[r.jsx("div",{className:"flex items-center justify-between mb-8 md:mb-10",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-primary/10 rounded-2xl text-primary shadow-inner",children:r.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"move_to_inbox"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-xl md:text-2xl tracking-tight text-slate-900 dark:text-white",children:"Traspasos"}),r.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-medium",children:"Reabastecimiento Crtico"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(A=>r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 p-8 rounded-[32px] border-2 border-transparent hover:border-primary transition-all flex flex-col group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[11px] font-black text-primary uppercase tracking-widest",children:A.branchName}),r.jsxs("span",{className:"text-[10px] text-slate-400 font-bold uppercase mt-1",children:["Ref: ",A.id.slice(0,8)]})]}),r.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:r.jsx("span",{className:"material-symbols-outlined text-slate-300",children:"inventory"})})]}),r.jsx("p",{className:"font-black text-base text-slate-800 dark:text-slate-100 mb-2",children:A.productName}),r.jsxs("div",{className:"flex items-end gap-3 mb-8",children:[r.jsx("span",{className:"text-5xl font-black text-slate-900 dark:text-white leading-none tracking-tighter",children:A.quantity}),r.jsx("span",{className:"text-xs font-black text-slate-400 uppercase pb-1 tracking-widest",children:"Unidades"})]}),r.jsx("button",{onClick:()=>S(A),className:"mt-auto py-4 bg-white dark:bg-slate-800 border-2 border-primary/20 text-primary text-xs font-black rounded-2xl hover:bg-primary hover:text-white hover:border-primary shadow-sm hover:shadow-xl transition-all active:scale-95",children:"AUTORIZAR ENVO AHORA"})]},A.id))})]}),d.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 md:p-10 rounded-[32px] md:rounded-[40px] border dark:border-slate-800 shadow-sm border-l-4 border-l-amber-500",children:[r.jsx("div",{className:"flex items-center justify-between mb-8 md:mb-10",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-2xl text-amber-600",children:r.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"percent"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-xl md:text-2xl tracking-tight text-slate-900 dark:text-white",children:"Descuentos"}),r.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-medium",children:"Solicitudes Especiales"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(A=>r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 p-8 rounded-[32px] border-2 border-transparent hover:border-amber-500 transition-all flex flex-col group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[11px] font-black text-amber-600 uppercase tracking-widest",children:A.requesterName}),r.jsxs("span",{className:"text-[9px] text-slate-400 font-bold uppercase mt-1",children:["Sucursal: ",A.branchId]})]}),r.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 rounded text-[10px] font-black text-amber-600",children:A.type==="percentage"?`${A.amount}%`:`$${A.amount}`})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Motivo:"}),r.jsxs("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 leading-relaxed italic line-clamp-3",children:['"',A.reason,'"']})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[r.jsx("button",{onClick:()=>C(A.id),className:"py-3 bg-white dark:bg-slate-800 border-2 border-red-500/20 text-red-500 text-[10px] font-black rounded-xl hover:bg-red-500 hover:text-white transition-all uppercase tracking-widest",children:"Rechazar"}),r.jsx("button",{onClick:()=>E(A.id),className:"py-3 bg-amber-500 text-white text-[10px] font-black rounded-xl hover:bg-amber-600 shadow-lg shadow-amber-500/20 transition-all uppercase tracking-widest",children:"Aprobar"})]})]},A.id))})]}),x.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 md:p-10 rounded-[32px] md:rounded-[40px] border dark:border-slate-800 shadow-sm border-l-4 border-l-blue-600",children:[r.jsx("div",{className:"flex items-center justify-between mb-8 md:mb-10",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-2xl text-blue-600",children:r.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"local_shipping"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-xl md:text-2xl tracking-tight text-slate-900 dark:text-white",children:"Pedidos de Suministros"}),r.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-medium",children:"Solicitudes de Bodega Central"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x.map(A=>{var $;return r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 p-8 rounded-[32px] border-2 border-transparent hover:border-blue-600 transition-all flex flex-col group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[11px] font-black text-blue-600 uppercase tracking-widest",children:A.branchName}),r.jsxs("span",{className:"text-[9px] text-slate-400 font-bold uppercase mt-1",children:["Folio: S-",A.folio]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${n(A.status)}`,children:A.status})]}),r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Estimado"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[r.jsxs("button",{onClick:()=>j(A),className:"col-span-2 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] font-black rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all uppercase tracking-widest border border-slate-200 dark:border-slate-700",children:["Ver Detalles (",(($=A.items)==null?void 0:$.length)||0,")"]}),A.status==="pending"&&r.jsx("button",{onClick:()=>U(A.id,"processing"),className:"col-span-2 py-3 bg-blue-600 text-white text-[10px] font-black rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-600/20 transition-all uppercase tracking-widest",children:"Procesar"}),A.status==="processing"&&r.jsx("button",{onClick:()=>U(A.id,"shipped"),className:"col-span-2 py-3 bg-purple-600 text-white text-[10px] font-black rounded-xl hover:bg-purple-700 shadow-lg shadow-purple-600/20 transition-all uppercase tracking-widest",children:"Enviar"}),A.status==="shipped"&&r.jsx("div",{className:"col-span-2 text-center py-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"En trnsito"})]})]},A.id)})})]}),r.jsx("div",{className:"bg-slate-100 dark:bg-slate-800/50 p-8 rounded-[32px] border-2 border-dashed border-slate-300 dark:border-slate-700",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-600 rounded-2xl",children:r.jsx("span",{className:"material-symbols-outlined",children:"auto_delete"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-lg text-slate-800 dark:text-slate-100",children:"Ciclo de Vida de Datos"}),r.jsx("p",{className:"text-xs text-slate-500 font-bold mt-1",children:"Gestin de Historial y Respaldos Automatizados"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>alert("Funcin de respaldo iniciada. Se descargar un archivo JSON con ventas recientes."),className:"px-5 py-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-black text-xs rounded-xl shadow-sm border border-slate-200 hover:bg-slate-50 transition-all flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"RESPALDAR AHORA"]}),r.jsxs("button",{onClick:()=>{confirm("Ests seguro? Se eliminarn ventas de hace ms de 3 meses. Esta accin no se puede deshacer sin un respaldo.")&&alert("Depuracin completada. Se liberaron 0.00 MB de espacio.")},className:"px-5 py-3 bg-red-500 text-white font-black text-xs rounded-xl shadow-lg hover:shadow-red-500/30 hover:bg-red-600 transition-all flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete_history"}),"DEPURAR ANTIGUOS"]})]})]})})]}),N&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-[40px] shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[r.jsxs("div",{className:"p-8 md:p-10 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Detalle del Pedido"}),r.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mt-1",children:["Folio S-",N.folio,"  ",N.branchName]})]}),r.jsx("button",{onClick:()=>j(null),className:"p-2 bg-white dark:bg-slate-700 rounded-full shadow-sm hover:scale-110 transition-transform",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"close"})})]}),r.jsx("div",{className:"p-0 overflow-y-auto custom-scrollbar flex-1",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10 border-b dark:border-slate-700",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-4",children:"Producto"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Cant."}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Unitario"}),r.jsx("th",{className:"px-8 py-4 text-right",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:(R=N.items)==null?void 0:R.map((A,$)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/40 transition-colors",children:[r.jsx("td",{className:"px-8 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"size-10 bg-white border rounded-lg p-1 flex-shrink-0",children:r.jsx("img",{src:A.productImage,className:"w-full h-full object-contain"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:A.productName}),r.jsx("p",{className:"text-[10px] font-mono text-slate-400",children:A.productId.slice(0,8)})]})]})}),r.jsx("td",{className:"px-6 py-4 text-center font-black text-lg",children:A.quantity}),r.jsxs("td",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500",children:["$",A.unitPrice.toLocaleString()]}),r.jsxs("td",{className:"px-8 py-4 text-right font-black text-primary",children:["$",A.totalPrice.toLocaleString()]})]},$))})]})})}),r.jsxs("div",{className:"p-8 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Total General"}),r.jsxs("span",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:["$",N.totalAmount.toLocaleString()]})]})]})})]})]})},Tu={async getExpenses(s){let a=ee.from("expenses").select("*").order("created_at",{ascending:!1});s&&s!=="ALL"&&(a=a.eq("branch_id",s));const{data:n,error:i}=await a;if(i)throw i;return n.map(c=>({id:c.id,description:c.description,amount:c.amount,category:c.category,branchId:c.branch_id,createdAt:c.created_at}))},async createExpense(s){const{error:a}=await ee.from("expenses").insert({description:s.description,amount:s.amount,category:s.category,branch_id:s.branchId});if(a)throw a},async getFinancialSummary(s,a,n){let i=ee.from("sales").select("total, sale_items(quantity, unit_price, products(cost_price))").gte("created_at",s).lte("created_at",a);n&&n!=="ALL"&&(i=i.eq("branch_id",n));const{data:c,error:d}=await i;if(d)throw d;const f=c.reduce((_,S)=>_+Number(S.total),0);let x=0;(c||[]).forEach(_=>{(_.sale_items||[]).forEach(S=>{var C;const E=((C=S.products)==null?void 0:C.cost_price)||0;x+=S.quantity*E})});let m=ee.from("expenses").select("amount").gte("created_at",s).lte("created_at",a);n&&n!=="ALL"&&(m=m.eq("branch_id",n));const{data:p,error:b}=await m;if(b)throw b;const N=p.reduce((_,S)=>_+Number(S.amount),0),j=f/1.16*.16;return{totalSales:f,totalCogs:x,totalExpenses:N,totalIva:j,grossProfit:f-x,netProfit:f-x-N}}},bs=s=>({available:"Disponible",low:"Bajo Stock",out:"Agotado",expired:"Expirado",pending_admin:"Pendiente",approved_warehouse:"Aprobado",shipped:"En Camino",completed:"Recibido",rejected:"Rechazado",pending:"Pendiente",cancelled:"Cancelado",processing:"Procesando",received:"Recibido",renta:"Renta",servicios:"Servicios",salarios:"Salarios",suministros:"Suministros",otros:"Otros",resolved:"Resuelto",approved:"Aprobado",pending_authorization:"Pendiente",active:"Activa",inactive:"Inactiva",overdue:"Vencido",paid:"Pagado",warehouse:"Bodega",store:"Tienda",cash:"Efectivo",card:"Tarjeta",transfer:"Transferencia",contado:"Contado",credito:"Crdito"})[s.toLowerCase()]||s,Lp=({user:s,onLogout:a})=>{const[n,i]=v.useState("dashboard"),[c,d]=v.useState(null),[f,x]=v.useState([]),[m,p]=v.useState(!1),[b,N]=v.useState([]),[j,_]=v.useState("ALL"),[S,E]=v.useState([]),[C,U]=v.useState(!1),[R,A]=v.useState(null),[$,Y]=v.useState(0),[te,T]=v.useState(!1),[V,q]=v.useState({description:"",amount:0,category:"otros",branchId:"BR-MAIN"});v.useEffect(()=>{re(),me()},[n,j]);const re=async()=>{const Q=await ke.getBranches();N(Q)},me=async()=>{p(!0);try{const Q=new Date,Ee=new Date(Q.getFullYear(),Q.getMonth(),1).toISOString(),W=new Date(Q.getFullYear(),Q.getMonth()+1,0).toISOString();if(n==="dashboard"){const ce=await Tu.getFinancialSummary(Ee,W,j);d(ce)}else if(n==="expenses"){const ce=await Tu.getExpenses(j);x(ce)}else if(n==="inventory"){const ce=await ke.getPriceRequests();E(ce)}}catch(Q){console.error("Error loading finance data:",Q)}finally{p(!1)}},ne=async Q=>{Q.preventDefault();try{await Tu.createExpense(V),T(!1),me(),alert("Gasto registrado correctamente")}catch{alert("Error al registrar gasto")}},Re=async Q=>{if(Q.preventDefault(),!!R)try{await ke.resolvePriceRequest(R.id,R.productId,$),U(!1),A(null),Y(0),me(),alert("Precio actualizado y solicitud resuelta.")}catch{alert("Error al actualizar precio")}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shrink-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Panel de Contabilidad"}),r.jsx("div",{className:"flex gap-4 mt-2",children:["dashboard","expenses","audit","inventory"].map(Q=>r.jsx("button",{onClick:()=>i(Q),className:`text-xs font-black uppercase tracking-widest pb-1 border-b-2 transition-all ${n===Q?"border-primary text-primary":"border-transparent text-slate-400"}`,children:Q==="dashboard"?"Resumen":Q==="expenses"?"Gastos":Q==="audit"?"Auditora":"Inventario"},Q))})]}),r.jsxs("select",{className:"bg-slate-100 dark:bg-slate-800 border-none rounded-xl text-xs font-bold px-4 py-2",value:j,onChange:Q=>_(Q.target.value),children:[r.jsx("option",{value:"ALL",children:"Todas las Sucursales"}),b.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n==="dashboard"&&c&&r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Ventas Brutas (Mes)"}),r.jsxs("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:["$",c.totalSales.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-green-500 font-bold mt-2 flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"trending_up"})," Incluye IVA"]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Utilidad Bruta"}),r.jsxs("h2",{className:"text-3xl font-black text-primary",children:["$",c.grossProfit.toLocaleString()]}),r.jsx("p",{className:"text-xs text-slate-400 font-bold mt-2",children:"Ventas - Costo de Productos"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Utilidad Neta"}),r.jsxs("h2",{className:`text-3xl font-black ${c.netProfit>=0?"text-green-600":"text-red-600"}`,children:["$",c.netProfit.toLocaleString()]}),r.jsx("p",{className:"text-xs text-slate-400 font-bold mt-2",children:"Despus de gastos operativos"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl border border-slate-100 dark:border-slate-700",children:[r.jsxs("h3",{className:"font-black text-lg mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary",children:"account_balance_wallet"}),"Desglose Fiscal"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between py-3 border-b border-slate-50 dark:border-slate-700",children:[r.jsx("span",{className:"text-sm font-bold text-slate-500",children:"IVA por Pagar (16%)"}),r.jsxs("span",{className:"text-sm font-black text-red-500",children:["$",c.totalIva.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between py-3 border-b border-slate-50 dark:border-slate-700",children:[r.jsx("span",{className:"text-sm font-bold text-slate-500",children:"Costo de Mercanca"}),r.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white",children:["$",c.totalCogs.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between py-3",children:[r.jsx("span",{className:"text-sm font-bold text-slate-500",children:"Gastos Operativos"}),r.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white",children:["$",c.totalExpenses.toLocaleString()]})]})]})]}),r.jsxs("div",{className:"bg-primary/5 p-8 rounded-3xl border border-primary/10 flex flex-col justify-center items-center text-center",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl text-primary mb-4",children:"insights"}),r.jsx("h4",{className:"text-xl font-black text-primary mb-2",children:"Margen de Operacin"}),r.jsxs("div",{className:"text-5xl font-black text-primary mb-2",children:[c.totalSales>0?(c.netProfit/c.totalSales*100).toFixed(1):0,"%"]}),r.jsx("p",{className:"text-xs font-bold text-primary/60 uppercase tracking-widest",children:"Rendimiento sobre venta total"})]})]})]}),n==="expenses"&&r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"font-black text-xl",children:"Registro de Gastos"}),r.jsx("button",{onClick:()=>T(!0),className:"bg-primary text-white px-6 py-2.5 rounded-xl font-black text-xs shadow-lg shadow-primary/20 hover:scale-105 transition-all",children:"NUEVO GASTO"})]}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-6 py-4",children:"Descripcin"}),r.jsx("th",{className:"px-6 py-4",children:"Categora"}),r.jsx("th",{className:"px-6 py-4",children:"Sucursal"}),r.jsx("th",{className:"px-6 py-4",children:"Fecha"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Monto"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:f.map(Q=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/40 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-bold",children:Q.description}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-900 rounded-lg text-[10px] font-black uppercase tracking-tighter text-slate-500",children:bs(Q.category)})}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-400",children:Q.branchId}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-400",children:new Date(Q.createdAt).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 text-right font-black text-slate-900 dark:text-white",children:["$",Q.amount.toLocaleString()]})]},Q.id))})]})})}),f.length===0&&r.jsx("div",{className:"p-20 text-center text-slate-300 italic font-bold",children:"No hay gastos registrados en este periodo."})]}),n==="inventory"&&r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-xl",children:"Gestin de Catlogo y Precios"}),r.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Solicitudes Pendientes de Bodega"})]})}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-6 py-4",children:"Producto Solicitado"}),r.jsx("th",{className:"px-6 py-4",children:"Solicitante (ID)"}),r.jsx("th",{className:"px-6 py-4",children:"Fecha"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:S.map(Q=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/40 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-tight",children:Q.productName||"Producto no encontrado"}),r.jsx("p",{className:"text-[10px] font-mono text-slate-400 uppercase",children:Q.productId.slice(0,8)})]}),r.jsx("td",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase",children:Q.requesterName}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-400",children:new Date(Q.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${Q.status==="pending"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:bs(Q.status)})}),r.jsx("td",{className:"px-6 py-4 text-right",children:Q.status==="pending"&&r.jsx("button",{onClick:()=>{A(Q),U(!0)},className:"px-3 py-1.5 bg-primary text-white rounded-lg text-[10px] font-black uppercase hover:scale-105 transition-all",children:"Asignar Precio"})})]},Q.id))})]})})}),S.length===0&&r.jsx("div",{className:"p-20 text-center text-slate-300 italic font-bold",children:"No hay solicitudes de precio pendientes."})]}),n==="audit"&&r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-20 text-center opacity-30",children:[r.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"construction"}),r.jsx("h3",{className:"text-2xl font-black uppercase tracking-widest",children:"Mdulo en Desarrollo"}),r.jsx("p",{className:"max-w-md mt-2 font-bold",children:"Estamos conectando los flujos de auditora y valoracin en tiempo real con la base de datos de Supabase."})]})]}),C&&R&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95",children:[r.jsx("h3",{className:"text-xl font-black mb-1 uppercase tracking-tighter text-slate-900 dark:text-white",children:"Asignar Precio"}),r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-8",children:R.productName}),r.jsxs("form",{onSubmit:Re,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Precio al Pblico ($)"}),r.jsx("input",{type:"number",required:!0,autoFocus:!0,step:"0.01",className:"w-full p-6 bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-2xl font-black text-4xl text-center focus:border-primary outline-none transition-all",value:$,onChange:Q=>Y(parseFloat(Q.target.value))})]}),r.jsxs("div",{className:"flex gap-4 pt-2",children:[r.jsx("button",{type:"button",onClick:()=>{U(!1),A(null)},className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl shadow-primary/20 uppercase text-xs tracking-widest",children:"Confirmar"})]})]})]})}),te&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl p-8 animate-in zoom-in-95",children:[r.jsx("h3",{className:"text-xl font-black mb-6",children:"Registrar Gasto Operativo"}),r.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Descripcin"}),r.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-bold",value:V.description,onChange:Q=>q({...V,description:Q.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Monto ($)"}),r.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-black",value:V.amount,onChange:Q=>q({...V,amount:parseFloat(Q.target.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Categora"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-bold",value:V.category,onChange:Q=>q({...V,category:Q.target.value}),children:[r.jsx("option",{value:"renta",children:"Renta"}),r.jsx("option",{value:"servicios",children:"Servicios"}),r.jsx("option",{value:"salarios",children:"Salarios"}),r.jsx("option",{value:"suministros",children:"Suministros"}),r.jsx("option",{value:"otros",children:"Otros"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Sucursal"}),r.jsx("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl font-bold",value:V.branchId,onChange:Q=>q({...V,branchId:Q.target.value}),children:b.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>T(!1),className:"flex-1 py-3 font-bold text-slate-400",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-3 bg-primary text-white font-black rounded-xl shadow-lg",children:"Guardar"})]})]})]})})]})]})},Zi=({isOpen:s,onClose:a,onAuthorized:n,title:i="Autorizacin Requerida",description:c="Esta accin requiere autorizacin de un Administrador."})=>{const[d,f]=v.useState(""),[x,m]=v.useState("");if(!s)return null;const p=b=>{b.preventDefault(),d==="admin123"?(n(),a()):m("Contrasea incorrecta")};return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl shadow-2xl p-8 transform scale-100",children:[r.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[r.jsx("div",{className:"size-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx("span",{className:"material-symbols-outlined text-3xl text-red-600 dark:text-red-400",children:"security"})}),r.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:i}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:c})]}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Contrasea de Administrador"}),r.jsx("input",{type:"password",autoFocus:!0,className:"w-full text-center text-2xl tracking-widest p-3 bg-slate-50 dark:bg-slate-900 border rounded-xl outline-none focus:ring-2 focus:ring-red-500/20 font-black",value:d,onChange:b=>{f(b.target.value),m("")},placeholder:""}),x&&r.jsx("p",{className:"text-xs font-bold text-red-500 text-center animate-pulse",children:x})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:a,className:"flex-1 py-3 font-black text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-xl transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white font-black rounded-xl shadow-lg shadow-red-600/20 transition-all",children:"Autorizar"})]})]})]})})},Zj=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState([]),[m,p]=v.useState("BR-MAIN"),[b,N]=v.useState("products"),[j,_]=v.useState(""),[S,E]=v.useState("all"),[C,U]=v.useState([]),[R,A]=v.useState(!1),$=s.role===xe.ADMIN,Y=s.role===xe.WAREHOUSE||s.role===xe.WAREHOUSE_SUB,te=s.role===xe.WAREHOUSE_SUB,[T,V]=v.useState(!1),[q,re]=v.useState(null);s.role,xe.FINANCE;const[me,ne]=v.useState(!1),[Re,Q]=v.useState(!1),[Ee,W]=v.useState(!1),[ce,le]=v.useState(!1),[ye,w]=v.useState(null),[P,ae]=v.useState(0),[ie,se]=v.useState(0),[ve,ge]=v.useState(""),X=v.useRef(null),[J,pe]=v.useState({name:"",sku:"",category:"Interiores",brand:"",price:0,image:"",description:"",wholesalePrice:0,wholesaleMinQty:12,packageType:"litro"}),[be,at]=v.useState("all");v.useEffect(()=>{Z()},[m,b,S]);const Z=async()=>{try{A(!0);const B=await ke.getProductsByBranch(m),ze=await ke.getBranches();if(i(B),d(ze),b==="requests"){const _t=await ke.getRestockRequests(m==="all"?void 0:m,S==="all"?void 0:S);x(_t)}if(b==="consumption"){const _t=await ke.getInternalConsumptionHistory(m);U(_t)}}catch(B){console.error("Error loading inventory:",B)}finally{A(!1)}},fe=n.filter(B=>{const ze=B.name.toLowerCase().includes(j.toLowerCase())||B.sku.toLowerCase().includes(j.toLowerCase()),_t=be==="all"||B.brand===be;return ze&&_t}),gt=Array.from(new Set(n.map(B=>B.brand).filter(Boolean))),F=()=>{pe({name:"",sku:"",category:"Interiores",brand:"",price:0,image:"",description:"",wholesalePrice:0,wholesaleMinQty:12,packageType:"litro",min_stock:10,max_stock:100,costPrice:0,location:"",unit_measure:"pza"}),w(null)},_e=async B=>{B.preventDefault();try{await ke.createProduct(J),await Z(),W(!1),F()}catch(ze){alert("Error: "+(ze.message||ze))}},bt=async B=>{if(B.preventDefault(),!!ye)try{await ke.updateProduct(ye.id,J),await Z(),Q(!1),F()}catch(ze){alert("Error: "+(ze.message||ze))}},Le=B=>{confirm("Eliminar producto?")&&alert("Pendiente...")},Ht=B=>{w(B),pe({name:B.name,sku:B.sku,category:B.category,price:B.price,image:B.image,description:B.description,brand:B.brand||"",wholesalePrice:B.wholesalePrice||0,wholesaleMinQty:B.wholesaleMinQty||12,packageType:B.packageType||"litro",min_stock:B.min_stock||10,max_stock:B.max_stock||100,costPrice:B.costPrice||0,location:B.location||"",unit_measure:B.unit_measure||"pza"}),Q(!0)},ys=async B=>{try{await ke.createPriceRequest(B,s.id),alert("Solicitud de precio enviada al Contador.")}catch(ze){alert("Error: "+ze.message)}},Wr=()=>{const B=`data:text/csv;charset=utf-8,Nombre,SKU,Categoria,Precio,Descripcion,ImagenURL
Pintura Azul,AZ-001,Interiores,150.50,Bote 4L,`,ze=document.createElement("a");ze.href=encodeURI(B),ze.download="plantilla_productos.csv",ze.click()},eo=async B=>{var bl;const ze=(bl=B.target.files)==null?void 0:bl[0];if(!ze)return;const _t=new FileReader;_t.onload=async yl=>{var vl;try{const Ga=((vl=yl.target)==null?void 0:vl.result).split(`
`),ht=[];for(let Zr=1;Zr<Ga.length;Zr++){const[sa,kt,en,so,tn,Va]=Ga[Zr].split(",");!sa||!kt||ht.push({name:sa.trim(),sku:kt.trim().toUpperCase(),category:(en==null?void 0:en.trim())||"Interiores",price:parseFloat(so)||0,description:(tn==null?void 0:tn.trim())||"",image:(Va==null?void 0:Va.trim())||"",status:"available"})}ht.length>0&&confirm(`Cargar ${ht.length} productos?`)&&(await ke.bulkCreateProducts(ht),Z())}catch(wl){alert("Error: "+wl.message)}},_t.readAsText(ze)},to=async()=>{if(!(!ye||P<=0))try{await ke.createRestockRequest(m,ye.id,P),ne(!1),ae(0),Z()}catch(B){alert("Error: "+B.message)}},Gt=async B=>{if(confirm(`Confirmar recepcin de ${B.quantity} unidades?`))try{await ke.confirmRestockArrival(B.id),Z()}catch(ze){alert("Error: "+ze.message)}},ao=async()=>{if(!(!ye||ie<=0||!ve))try{await ke.recordInternalConsumption(ye.id,m,s.id,ie,ve),le(!1),se(0),ge(""),Z(),alert("Consumo interno registrado correctamente.")}catch(B){alert("Error: "+B.message)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-950 h-full",children:[r.jsxs("header",{className:"flex h-20 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 md:px-8 shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Sucursal"}),r.jsx("select",{className:"bg-transparent border-none text-base md:text-lg font-black focus:ring-0 p-0 cursor-pointer text-primary outline-none pr-8",value:m,onChange:B=>p(B.target.value),children:c.map(B=>r.jsx("option",{value:B.id,children:B.name},B.id))})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:X,onChange:eo}),$&&r.jsxs("div",{className:"hidden sm:flex gap-2",children:[r.jsxs("button",{onClick:()=>{var B;return(B=X.current)==null?void 0:B.click()},className:"h-10 px-4 bg-slate-50 dark:bg-slate-800 text-slate-600 rounded-xl font-bold flex items-center gap-2 border shadow-sm",children:[r.jsx("span",{className:"material-symbols-outlined",children:"upload_file"}),r.jsx("span",{className:"text-xs uppercase",children:"Subir"})]}),r.jsxs("button",{onClick:Wr,className:"h-10 px-4 bg-slate-50 dark:bg-slate-800 text-slate-600 rounded-xl font-bold flex items-center gap-2 border shadow-sm",children:[r.jsx("span",{className:"material-symbols-outlined",children:"download"}),r.jsx("span",{className:"text-xs uppercase",children:"Plantilla"})]})]}),$&&r.jsxs("button",{onClick:()=>W(!0),className:"h-10 px-4 bg-primary text-white rounded-xl font-black flex items-center gap-2 shadow-lg shadow-primary/20 transition-all",children:[r.jsx("span",{className:"material-symbols-outlined",children:"add"}),r.jsx("span",{className:"text-xs uppercase",children:"Nuevo"})]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-end border-b border-slate-200 dark:border-slate-800 pb-1",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>N("products"),className:`pb-3 text-sm font-bold transition-all ${b==="products"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-slate-600"}`,children:"Existencias"}),r.jsx("button",{onClick:()=>N("requests"),className:`pb-3 text-sm font-bold transition-all ${b==="requests"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-slate-600"}`,children:"Peticiones"}),r.jsx("button",{onClick:()=>N("consumption"),className:`pb-3 text-sm font-bold transition-all ${b==="consumption"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-slate-600"}`,children:"Consumo Local"})]}),b==="requests"&&r.jsxs("select",{className:"text-xs font-bold bg-white dark:bg-slate-800 border-none rounded-lg px-3 py-1.5 pr-8 shadow-sm",value:S,onChange:B=>E(B.target.value),children:[r.jsx("option",{value:"all",children:"Filtro Estado"}),r.jsx("option",{value:"pending_admin",children:"Pendientes"}),r.jsx("option",{value:"shipped",children:"En Camino"}),r.jsx("option",{value:"completed",children:"Listos"})]})]}),b==="products"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative max-w-md flex-1",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),r.jsx("input",{className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-slate-800 rounded-2xl border-none shadow-sm focus:ring-2 focus:ring-primary/20",placeholder:"Buscar por nombre o SKU...",value:j,onChange:B=>_(B.target.value)})]}),r.jsxs("select",{className:"bg-white dark:bg-slate-800 px-4 py-3 pr-10 rounded-2xl border-none shadow-sm text-sm font-bold text-slate-600",value:be,onChange:B=>at(B.target.value),children:[r.jsx("option",{value:"all",children:"Todas las Marcas"}),gt.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[32px] overflow-hidden shadow-sm border dark:border-slate-700",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[700px]",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-5",children:"Producto"}),r.jsx("th",{className:"px-6 py-5",children:"Marca/Ubic."}),!Y&&r.jsx("th",{className:"px-6 py-5",children:"Precio"}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Stock (Min/Max)"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:fe.map(B=>{const ze=B.inventory[m]||0;return r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/40 transition-colors",children:[r.jsx("td",{className:"px-8 py-5",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:B.image,className:"size-12 rounded-xl object-contain bg-slate-100 p-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:B.name}),r.jsx("p",{className:"text-[10px] font-mono text-slate-400",children:B.sku})]})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-[9px] font-bold uppercase text-slate-600 dark:text-slate-300 w-fit",children:B.brand||"Genrico"}),B.location&&r.jsxs("span",{className:"text-xs font-bold text-slate-500 pl-1",children:[" ",B.location]})]})}),!Y&&r.jsxs("td",{className:"px-6 py-5 font-black text-primary",children:["$",B.price.toLocaleString()]}),r.jsx("td",{className:"px-6 py-5 text-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:`text-lg font-black ${ze<(B.min_stock||10)?"text-red-500 animate-pulse":"text-slate-800 dark:text-slate-200"}`,children:ze}),B.min_stock&&r.jsxs("span",{className:"text-[9px] text-slate-400 font-bold",children:["Min: ",B.min_stock]})]})}),r.jsx("td",{className:"px-8 py-5 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>{const _t=()=>{w(B),le(!0)};te?(re(()=>_t),V(!0)):_t()},className:"px-3 py-1.5 bg-amber-500/10 text-amber-600 rounded-lg text-[10px] font-black uppercase hover:bg-amber-500 hover:text-white transition-all",title:"Registrar uso local",children:"Uso Local"}),(Y||B.price===0)&&r.jsx("button",{onClick:()=>ys(B.id),className:"px-3 py-1.5 bg-blue-500/10 text-blue-600 rounded-lg text-[10px] font-black uppercase hover:bg-blue-500 hover:text-white transition-all",title:"Solicitar actualizacin de precio",children:"Solicitar Precio"}),m!=="BR-MAIN"&&r.jsx("button",{onClick:()=>{w(B),ne(!0)},className:"px-3 py-1.5 bg-primary/10 text-primary rounded-lg text-[10px] font-black uppercase",children:"Resurtir"}),$&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Ht(B),className:"p-2 text-slate-400 hover:text-blue-500",children:r.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),r.jsx("button",{onClick:()=>Le(B.id),className:"p-2 text-slate-400 hover:text-red-500",children:r.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})]})})]},B.id)})})]})})})]}):b==="requests"?r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[32px] overflow-hidden shadow-sm border dark:border-slate-700",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[700px]",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-5",children:"Producto"}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Cant."}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Estado"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:f.map(B=>{var ze;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-8 py-5 flex items-center gap-3",children:[r.jsx("div",{className:"size-8 bg-slate-100 rounded p-1",children:r.jsx("img",{src:(ze=B.product)==null?void 0:ze.image,className:"w-full h-full object-contain"})}),r.jsx("span",{className:"font-bold text-sm dark:text-white",children:B.productName})]}),r.jsx("td",{className:"px-6 py-5 text-center font-black",children:B.quantity}),r.jsx("td",{className:"px-6 py-5 text-center",children:r.jsx("span",{className:"px-2 py-1 rounded-full text-[9px] font-black uppercase bg-slate-100 text-slate-600",children:bs(B.status)})}),r.jsxs("td",{className:"px-8 py-5 text-right flex justify-end gap-2",children:[r.jsx(Js,{to:`/shipping-note/${B.id}`,className:"p-2 text-slate-400 hover:text-primary",children:r.jsx("span",{className:"material-symbols-outlined",children:"description"})}),B.status==="shipped"&&r.jsx("button",{onClick:()=>Gt(B),className:"px-3 py-1.5 bg-green-600 text-white text-[10px] font-black rounded-lg",children:"Recibido"})]})]},B.id)})})]})})}):r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[32px] overflow-hidden shadow-sm border dark:border-slate-700",children:r.jsxs("div",{className:"overflow-x-auto custom-scrollbar",children:[r.jsxs("table",{className:"w-full text-left min-w-[700px]",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-5",children:"Producto"}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Cant."}),r.jsx("th",{className:"px-6 py-5",children:"Motivo"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:C.map(B=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-8 py-5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"size-8 bg-slate-100 rounded p-1",children:r.jsx("img",{src:B.productImage,className:"w-full h-full object-contain"})}),r.jsx("span",{className:"font-bold text-sm dark:text-white",children:B.productName})]})}),r.jsxs("td",{className:"px-6 py-5 text-center font-black text-amber-600",children:["-",B.quantity]}),r.jsx("td",{className:"px-6 py-5 text-xs text-slate-500 font-medium",children:B.reason}),r.jsx("td",{className:"px-8 py-5 text-right text-[10px] text-slate-400 font-bold uppercase",children:new Date(B.createdAt).toLocaleDateString()})]},B.id))})]}),C.length===0&&r.jsx("div",{className:"p-12 text-center text-slate-400 italic",children:"No hay registros de consumo interno."})]})})]})}),r.jsx(Zi,{isOpen:T,onClose:()=>{V(!1),re(null)},onAuthorized:()=>{q&&q()},description:"El subencargado requiere autorizacin para registrar uso local."}),(Ee||Re)&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full h-[90vh] md:h-auto md:max-h-[85vh] md:max-w-xl rounded-t-[32px] md:rounded-[40px] shadow-2xl overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 md:p-8 border-b border-slate-100 dark:border-slate-800 shrink-0 bg-white dark:bg-slate-800 z-10",children:[r.jsx("h3",{className:"text-xl md:text-2xl font-black",children:Ee?"Nuevo Producto":"Editar Producto"}),r.jsx("button",{onClick:()=>{W(!1),Q(!1),F()},className:"md:hidden p-2 text-slate-400",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsxs("form",{onSubmit:Ee?_e:bt,className:"flex flex-col flex-1 overflow-hidden",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-4 md:space-y-6 custom-scrollbar",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Nombre"}),r.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.name,onChange:B=>pe({...J,name:B.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"SKU"}),r.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20 font-mono",value:J.sku,onChange:B=>pe({...J,sku:B.target.value.toUpperCase()})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Marca"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.brand,onChange:B=>pe({...J,brand:B.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Categora"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:J.category,onChange:B=>pe({...J,category:B.target.value}),children:[r.jsx("option",{children:"Interiores"}),r.jsx("option",{children:"Exteriores"}),r.jsx("option",{children:"Esmaltes"}),r.jsx("option",{children:"Accesorios"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Precio"}),r.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20 font-black",value:J.price,onChange:B=>pe({...J,price:parseFloat(B.target.value)})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Status"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:J.status,onChange:B=>pe({...J,status:B.target.value}),children:[r.jsx("option",{value:"available",children:"Disponible"}),r.jsx("option",{value:"low",children:"Bajo Stock"}),r.jsx("option",{value:"out",children:"Agotado"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Tipo de Envase (Orden de Resurtido)"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.packageType,onChange:B=>pe({...J,packageType:B.target.value}),children:[r.jsx("option",{value:"cubeta",children:"Cubeta (19 lts)"}),r.jsx("option",{value:"galon",children:"Galn (4 lts)"}),r.jsx("option",{value:"litro",children:"Litro (1 lto)"}),r.jsx("option",{value:"medio",children:"Medio (1/2 lto)"}),r.jsx("option",{value:"cuarto",children:"Cuarto (1/4 lto)"}),r.jsx("option",{value:"aerosol",children:"Aerosol"}),r.jsx("option",{value:"complemento",children:"Complemento"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 border-t border-slate-100 dark:border-slate-800 pt-4 mt-4",children:[r.jsx("div",{className:"col-span-2 text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"Logstica y Costos"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Costo Compra"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.costPrice||"",onChange:B=>pe({...J,costPrice:parseFloat(B.target.value)})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Ubicacin"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Ej: Pasillo A-4",value:J.location||"",onChange:B=>pe({...J,location:B.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Min Stock"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.min_stock||"",onChange:B=>pe({...J,min_stock:parseInt(B.target.value)})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Max Stock"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:J.max_stock||"",onChange:B=>pe({...J,max_stock:parseInt(B.target.value)})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Unidad Medida"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",placeholder:"pza, lto, kg",value:J.unit_measure||"",onChange:B=>pe({...J,unit_measure:B.target.value})})]})]})]}),r.jsxs("div",{className:"p-6 md:p-8 pt-4 shrink-0 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex gap-4",children:[r.jsx("button",{type:"button",onClick:()=>{W(!1),Q(!1),F()},className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs tracking-widest hidden md:block",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl shadow-primary/20 uppercase text-xs tracking-widest hover:scale-[1.02] active:scale-95 transition-all",children:"Guardar"})]})]})]})}),me&&ye&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center sm:p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full md:w-[400px] rounded-t-[32px] md:rounded-[40px] shadow-2xl p-8 md:p-10 animate-in slide-in-from-bottom-5 md:zoom-in-95",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-black capitalize",children:"Resurtir Stock"}),r.jsx("button",{onClick:()=>ne(!1),className:"md:hidden",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"close"})})]}),r.jsx("p",{className:"text-slate-500 text-xs mb-8",children:ye.name}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("input",{type:"number",className:"w-full p-6 bg-slate-50 dark:bg-slate-900 rounded-3xl font-black text-4xl text-center focus:ring-4 focus:ring-primary/10 transition-all outline-none",value:P,onChange:B=>ae(parseInt(B.target.value)||0)}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>ne(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs hidden md:block",children:"Cancelar"}),r.jsx("button",{onClick:to,className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl",children:"Solicitar"})]})]})]})}),ce&&ye&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center sm:p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full md:w-[400px] rounded-t-[32px] md:rounded-[40px] shadow-2xl p-8 md:p-10 animate-in slide-in-from-bottom-5 md:zoom-in-95",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("h3",{className:"text-xl font-black",children:"Uso Local"}),r.jsx("button",{onClick:()=>le(!1),className:"md:hidden",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"close"})})]}),r.jsx("p",{className:"text-slate-500 text-[10px] uppercase font-bold tracking-widest mb-6",children:ye.name}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Cantidad"}),r.jsx("input",{type:"number",className:"w-full p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl font-black text-2xl outline-none focus:ring-2 focus:ring-amber-500/20",value:ie,onChange:B=>se(parseInt(B.target.value)||0)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Motivo del uso"}),r.jsxs("select",{className:"w-full p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl font-bold text-sm outline-none",value:ve,onChange:B=>ge(B.target.value),children:[r.jsx("option",{value:"",children:"Selecciona motivo..."}),r.jsx("option",{value:"Mantenimiento de sucursal",children:"Mantenimiento de sucursal"}),r.jsx("option",{value:"Muestra para cliente",children:"Muestra para cliente"}),r.jsx("option",{value:"Uso administrativo",children:"Uso administrativo"}),r.jsx("option",{value:"Exhibicin/Showroom",children:"Exhibicin/Showroom"}),r.jsx("option",{value:"Donacin/Promocin",children:"Donacin/Promocin"})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>{le(!1),ge(""),se(0)},className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs hidden md:block",children:"Cancelar"}),r.jsx("button",{onClick:ao,disabled:!ve||ie<=0,className:"flex-1 py-4 bg-amber-500 text-white font-black rounded-2xl shadow-xl shadow-amber-500/20 disabled:opacity-50 uppercase text-xs",children:"Registrar"})]})]})]})})]})]})},zp={async getProfiles(){const{data:s,error:a}=await ee.from("profiles").select("*").order("created_at",{ascending:!1});if(a)throw a;return s||[]},async createProfile(s){const{error:a}=await ee.from("profiles").insert([{id:s.id,full_name:s.name,email:s.email,role:s.role,branch_id:s.branchId}]);if(a)throw a},async deleteProfile(s){const{error:a}=await ee.from("profiles").delete().eq("id",s);if(a)throw a}},eN=({user:s,onLogout:a})=>{const[n,i]=ja.useState([]),[c,d]=ja.useState([]),[f,x]=ja.useState(!1),[m,p]=ja.useState(!1),[b,N]=ja.useState({id:"",name:"",email:"",role:"SELLER",branchId:"BR-MAIN"});ja.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0);const[S,E]=await Promise.all([zp.getProfiles(),ke.getBranches()]);i(S),d(E)}catch(S){console.error(S)}finally{x(!1)}},_=async S=>{S.preventDefault();try{await zp.createProfile(b),p(!1),N({id:"",name:"",email:"",role:"SELLER",branchId:"BR-MAIN"}),j(),alert("Usuario creado correctamente")}catch(E){alert("Error: "+E.message)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark",children:[r.jsxs("header",{className:"h-16 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 z-10",children:[r.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:r.jsx("span",{children:"Inicio / Administracin / Usuarios"})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"notifications"}),r.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"help"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Gestin de Usuarios"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Administra cuentas, roles y permisos de acceso."})]}),r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-primary text-white px-4 py-2.5 rounded-lg font-medium shadow-md hover:scale-105 transition-all",children:[r.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),r.jsx("span",{children:"Nuevo Usuario"})]})]}),r.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:r.jsxs("div",{className:"relative w-full md:max-w-md",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),r.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",placeholder:"Buscar por nombre, correo o ID..."})]})}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700 text-xs uppercase text-slate-500 font-semibold tracking-wide",children:[r.jsx("th",{className:"px-6 py-4",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4",children:"Rol"}),r.jsx("th",{className:"px-6 py-4",children:"Sucursal"}),r.jsx("th",{className:"px-6 py-4",children:"Estado"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n.map(S=>{var E;return r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"size-10 rounded-full bg-primary/10 text-primary flex items-center justify-center font-bold",children:((E=S.full_name)==null?void 0:E.charAt(0))||"?"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-semibold",children:S.full_name}),r.jsx("span",{className:"text-xs text-slate-500",children:S.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:S.role})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:S.branch_id||"---"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm font-medium text-green-600",children:"Activo"})})]},S.id)})})]})})})]})}),m&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col transform animate-in zoom-in-95",children:r.jsxs("div",{className:"p-8 overflow-y-auto",children:[r.jsx("h3",{className:"text-xl font-bold mb-6",children:"Crear Nuevo Usuario"}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold uppercase text-slate-400",children:"ID de Usuario (Mock)"}),r.jsx("input",{required:!0,className:"w-full p-2.5 bg-slate-50 dark:bg-slate-900 border rounded-lg outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Ej: WH-002",value:b.id,onChange:S=>N({...b,id:S.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Nombre Completo"}),r.jsx("input",{required:!0,className:"w-full p-2.5 bg-slate-50 dark:bg-slate-900 border rounded-lg outline-none focus:ring-2 focus:ring-primary/20",value:b.name,onChange:S=>N({...b,name:S.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Correo Electrnico"}),r.jsx("input",{required:!0,type:"email",className:"w-full p-2.5 bg-slate-50 dark:bg-slate-900 border rounded-lg outline-none focus:ring-2 focus:ring-primary/20",value:b.email,onChange:S=>N({...b,email:S.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Rol"}),r.jsxs("select",{className:"w-full p-2.5 bg-slate-50 dark:bg-slate-900 border rounded-lg",value:b.role,onChange:S=>N({...b,role:S.target.value}),children:[r.jsx("option",{value:"ADMIN",children:"Administrador"}),r.jsx("option",{value:"SELLER",children:"Vendedor"}),r.jsx("option",{value:"WAREHOUSE",children:"Encargado de Bodega"}),r.jsx("option",{value:"WAREHOUSE_SUB",children:"Subencargado de Bodega"}),r.jsx("option",{value:"FINANCE",children:"Contador"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Sucursal"}),r.jsx("select",{className:"w-full p-2.5 bg-slate-50 dark:bg-slate-900 border rounded-lg",value:b.branchId,onChange:S=>N({...b,branchId:S.target.value}),children:c.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-2.5 font-bold text-slate-400",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-2.5 bg-primary text-white font-bold rounded-lg shadow-lg",children:"Guardar"})]})]})]})})})]})]})},Vr={async getClients(){const{data:s,error:a}=await ee.from("clients").select("*").order("name",{ascending:!0});if(a)throw a;return s.map(n=>({id:n.id,name:n.name,email:n.email||"",phone:n.phone||"",taxId:n.tax_id||"",address:n.address||"",type:n.type,municipality:n.municipality,locality:n.locality,creditLimit:n.credit_limit,creditDays:n.credit_days,isActiveCredit:n.is_active_credit}))},async createClient(s){const{data:a,error:n}=await ee.from("clients").insert([{name:s.name,email:s.email,phone:s.phone,tax_id:s.taxId,address:s.address,type:s.type,municipality:s.municipality,locality:s.locality,credit_limit:s.creditLimit,credit_days:s.creditDays,is_active_credit:s.isActiveCredit}]).select().single();if(n)throw n;return{id:a.id,name:a.name,email:a.email,phone:a.phone,taxId:a.tax_id,address:a.address,type:a.type,municipality:a.municipality,locality:a.locality,creditLimit:a.credit_limit,creditDays:a.credit_days,isActiveCredit:a.is_active_credit}},async updateClient(s,a){const n={};a.name&&(n.name=a.name),a.email!==void 0&&(n.email=a.email),a.phone!==void 0&&(n.phone=a.phone),a.taxId!==void 0&&(n.tax_id=a.taxId),a.address!==void 0&&(n.address=a.address),a.type&&(n.type=a.type),a.municipality!==void 0&&(n.municipality=a.municipality),a.locality!==void 0&&(n.locality=a.locality),a.creditLimit!==void 0&&(n.credit_limit=a.creditLimit),a.creditDays!==void 0&&(n.credit_days=a.creditDays),a.isActiveCredit!==void 0&&(n.is_active_credit=a.isActiveCredit),n.updated_at=new Date().toISOString();const{error:i}=await ee.from("clients").update(n).eq("id",s);if(i)throw i},async registerPayment(s){const{data:a,error:n}=await ee.from("client_payments").insert([{client_id:s.clientId,amount:s.amount,payment_method:s.paymentMethod,received_by_admin_id:s.receivedByAdminId,authorized_by_admin_id:s.authorizedByAdminId,transfer_reference:s.transferReference,payment_status:s.paymentStatus}]).select().single();if(n)throw n;return a},async getClientPayments(s){const{data:a,error:n}=await ee.from("client_payments").select("*").eq("client_id",s).order("created_at",{ascending:!1});if(n)throw n;return a},async addMarketingSpend(s){const{data:a,error:n}=await ee.from("client_marketing_spend").insert([{client_id:s.clientId,description:s.description,amount:s.amount}]).select().single();if(n)throw n;return a},async getMarketingHistory(s){const{data:a,error:n}=await ee.from("client_marketing_spend").select("*").eq("client_id",s).order("created_at",{ascending:!1});if(n)throw n;return a},async deleteClient(s){const{error:a}=await ee.from("clients").delete().eq("id",s);if(a)throw a}},tN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(""),[f,x]=v.useState(!1),[m,p]=v.useState(!1),[b,N]=v.useState(null),j=s.role===xe.WAREHOUSE_SUB,[_,S]=v.useState(!1),[E,C]=v.useState(null),[U,R]=v.useState({name:"",email:"",phone:"",taxId:"",address:"",type:"Individual",municipality:"",locality:"",creditLimit:0,creditDays:0,isActiveCredit:!1});v.useEffect(()=>{A()},[]);const A=async()=>{try{const q=await Vr.getClients();i(q)}catch(q){console.error("Error loading clients:",q)}},$=async q=>{q.preventDefault();try{m&&b?(await Vr.updateClient(b,U),alert("Cliente actualizado correctamente")):(await Vr.createClient(U),alert("Cliente registrado correctamente")),V(),A()}catch(re){console.error(re),alert("Error al guardar cliente")}},Y=n.filter(q=>q.name.toLowerCase().includes(c.toLowerCase())||(q.taxId||"").toLowerCase().includes(c.toLowerCase())),te=async q=>{if(confirm("Eliminar este cliente permanentemente?"))try{await Vr.deleteClient(q),A()}catch(re){console.error(re),alert("Error al eliminar cliente")}},T=q=>{p(!0),N(q.id),R({name:q.name,email:q.email,phone:q.phone,taxId:q.taxId,address:q.address,type:q.type,municipality:q.municipality||"",locality:q.locality||"",creditLimit:q.creditLimit||0,creditDays:q.creditDays||0,isActiveCredit:q.isActiveCredit||!1}),x(!0)},V=()=>{x(!1),p(!1),N(null),R({name:"",email:"",phone:"",taxId:"",address:"",type:"Individual",municipality:"",locality:"",creditLimit:0,creditDays:0,isActiveCredit:!1})};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark",children:[r.jsxs("header",{className:"h-16 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 z-10",children:[r.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:r.jsx("span",{children:"Inicio / Directorio / Clientes"})}),r.jsxs("button",{onClick:()=>{const q=()=>x(!0);j?(C(()=>q),S(!0)):q()},className:"bg-primary hover:bg-primary-hover text-white px-5 py-2.5 rounded-lg font-bold shadow-lg transition-all active:scale-95 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"person_add"}),r.jsx("span",{children:"Nuevo Cliente"})]})]}),r.jsx(Zi,{isOpen:_,onClose:()=>{S(!1),C(null)},onAuthorized:()=>{E&&E()},description:"El subencargado requiere autorizacin para gestionar clientes."}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white leading-tight",children:"Cartera de Clientes"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Gestiona la base de datos de compradores frecuentes y empresas."})]}),r.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),r.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Buscar por nombre, RFC o correo...",value:c,onChange:q=>d(q.target.value)})]})}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700 text-[10px] uppercase text-slate-400 font-black tracking-widest",children:[r.jsx("th",{className:"px-6 py-4",children:"Informacin del Cliente"}),r.jsx("th",{className:"px-6 py-4",children:"RFC / Contacto"}),r.jsx("th",{className:"px-6 py-4",children:"Ubicacin"}),r.jsx("th",{className:"px-6 py-4",children:"Crdito"}),r.jsx("th",{className:"px-6 py-4",children:"Tipo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:Y.map(q=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center font-bold text-white shadow-sm ${q.type==="Empresa"?"bg-indigo-500":"bg-orange-500"}`,children:q.name.charAt(0)}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:q.name}),r.jsx("span",{className:"text-[10px] text-slate-500 font-mono tracking-tighter",children:q.id})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-black text-slate-600 dark:text-slate-300 font-mono uppercase",children:q.taxId}),r.jsxs("span",{className:"text-[10px] text-slate-400",children:[q.email,"  ",q.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:q.municipality||"N/A"}),r.jsx("span",{className:"text-[10px] text-slate-400",children:q.locality||"-"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:`text-xs font-black ${q.isActiveCredit?"text-green-600":"text-slate-400"}`,children:q.isActiveCredit?`$${(q.creditLimit||0).toLocaleString()}`:"Sin Crdito"}),q.isActiveCredit&&r.jsxs("span",{className:"text-[10px] text-slate-400",children:[q.creditDays," das"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider ${q.type==="Empresa"?"bg-indigo-100 text-indigo-700":"bg-orange-100 text-orange-700"}`,children:q.type})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>{const re=()=>T(q);j?(C(()=>re),S(!0)):re()},className:"p-1.5 text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-all",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),r.jsx("button",{onClick:()=>{const re=()=>te(q.id);j?(C(()=>re),S(!0)):re()},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})})]},q.id))})]})}),Y.length===0&&r.jsxs("div",{className:"px-6 py-12 text-center flex flex-col items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-200",children:"person_search"}),r.jsx("p",{className:"text-slate-400 font-medium italic text-sm",children:"No hay resultados para esta bsqueda."})]})]})]})}),f&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50 shrink-0",children:[r.jsx("h3",{className:"font-black text-xl text-slate-900 dark:text-white",children:m?"Editar Perfil":"Registro de Cliente"}),r.jsx("button",{onClick:V,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-200 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsxs("form",{onSubmit:$,className:"p-8 flex flex-col gap-6 overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Nombre Completo"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-primary/20",value:U.name,onChange:q=>R({...U,name:q.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Tipo de Cuenta"}),r.jsxs("select",{className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold",value:U.type,onChange:q=>R({...U,type:q.target.value}),children:[r.jsx("option",{value:"Individual",children:"Individual"}),r.jsx("option",{value:"Empresa",children:"Empresa / RFC"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Correo Electrnico"}),r.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm",value:U.email,onChange:q=>R({...U,email:q.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Telfono"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm",value:U.phone,onChange:q=>R({...U,phone:q.target.value})})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"RFC / Identificacin Fiscal"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-mono font-bold uppercase",value:U.taxId,onChange:q=>R({...U,taxId:q.target.value.toUpperCase()})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Municipio"}),r.jsx("input",{className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold",value:U.municipality,onChange:q=>R({...U,municipality:q.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Localidad"}),r.jsx("input",{className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold",value:U.locality,onChange:q=>R({...U,locality:q.target.value})})]})]}),r.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-200 dark:border-slate-700 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs font-black text-slate-700 dark:text-slate-300 uppercase",children:"Habilitar Crdito?"}),r.jsx("input",{type:"checkbox",className:"size-5 rounded border-slate-300 text-primary focus:ring-primary",checked:U.isActiveCredit,onChange:q=>R({...U,isActiveCredit:q.target.checked})})]}),U.isActiveCredit&&r.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Lmite ($)"}),r.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-black",value:U.creditLimit,onChange:q=>R({...U,creditLimit:parseFloat(q.target.value)||0})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Das Plazo"}),r.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-black",value:U.creditDays,onChange:q=>R({...U,creditDays:parseInt(q.target.value)||0})})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Domicilio Fiscal / Envo"}),r.jsx("textarea",{className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm h-24 resize-none",value:U.address,onChange:q=>R({...U,address:q.target.value})})]}),r.jsxs("div",{className:"flex gap-4 mt-2",children:[r.jsx("button",{type:"button",onClick:V,className:"flex-1 py-4 font-bold text-slate-400 hover:text-slate-600 transition-colors",children:"Descartar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-bold rounded-2xl shadow-xl hover:shadow-primary/30 active:scale-95 transition-all",children:m?"Guardar Cambios":"Registrar Cliente"})]})]})]})})]})]})},aN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(!1),[f,x]=v.useState(null),[m,p]=v.useState(!1),[b,N]=v.useState({name:"",address:"",manager:"",phone:"",type:"store",config:{enable_manual_tinting:!1,enable_ai_dynamic_pricing:!1,enable_pro_portal:!1}});v.useEffect(()=>{j()},[]);const j=async()=>{try{p(!0);const E=await ke.getBranches();i(E)}catch(E){console.error(E),alert("Error cargando sucursales")}finally{p(!1)}},_=E=>{E?(x(E),N({name:E.name,address:E.address,manager:E.manager,phone:E.phone,type:E.type,config:E.config||{enable_manual_tinting:!1,enable_ai_dynamic_pricing:!1,enable_pro_portal:!1}})):(x(null),N({name:"",address:"",manager:"",phone:"",type:"store",config:{enable_manual_tinting:!1,enable_ai_dynamic_pricing:!1,enable_pro_portal:!1}})),d(!0)},S=async E=>{E.preventDefault();try{if(p(!0),f){const C={...f,...b};await ke.updateBranch(C),alert("Sucursal actualizada correctamente")}else{const U={id:`BR-${Math.random().toString(36).substr(2,5).toUpperCase()}`,status:"active",...b};await ke.createBranch(U),alert("Sucursal creada correctamente")}d(!1),j()}catch(C){console.error(C),alert("Error al guardar la sucursal. Revisa la consola.")}finally{p(!1)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-slate-950",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg text-primary",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"store"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:"Gestin de Sucursales"}),r.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Administra tus puntos de venta y bodegas"})]})]}),r.jsxs("button",{onClick:()=>_(),className:"bg-primary text-white px-5 py-2.5 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-primary/30 hover:scale-105 transition-all active:scale-95",children:[r.jsx("span",{className:"material-symbols-outlined",children:"add_location_alt"}),r.jsx("span",{children:"Nueva Sucursal"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:m&&n.length===0?r.jsx("div",{className:"text-center py-20 text-slate-400 font-bold animate-pulse",children:"Cargando sucursales..."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl mx-auto",children:n.map(E=>r.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden hover:shadow-xl hover:border-primary/30 transition-all duration-300",children:[r.jsx("div",{className:`h-1.5 w-full ${E.type==="warehouse"?"bg-orange-500":"bg-primary"}`}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white leading-tight group-hover:text-primary transition-colors",children:E.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-[10px] font-bold text-slate-500 font-mono tracking-wider",children:E.id}),r.jsx("span",{className:`text-[10px] font-black uppercase tracking-wide ${E.type==="warehouse"?"text-orange-500":"text-primary"}`,children:E.type==="warehouse"?"Bodega":"Tienda"})]})]}),r.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wide ${E.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:E.status})]}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"size-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"location_on"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"Direccin"}),r.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 leading-snug",children:E.address})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"size-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"person"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"Encargado"}),r.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:E.manager})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"size-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0",children:r.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"phone"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"Telfono"}),r.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:E.phone})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Js,{to:"/inventory",state:{branchFilter:E.id},className:"flex-1 py-2.5 bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-black rounded-xl border border-slate-200 dark:border-slate-700 text-center flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"inventory_2"}),"Inventario"]}),r.jsx("button",{onClick:()=>_(E),className:"flex-1 py-2.5 bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300 text-xs font-black rounded-xl border border-slate-200 dark:border-slate-700 hover:border-primary dark:hover:border-primary hover:text-primary transition-all shadow-sm",children:"Editar"})]})]})]},E.id))})}),c&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md animate-in zoom-in-95 duration-200",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden border dark:border-slate-800",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white tracking-tight",children:f?"Editar Sucursal":"Nueva Sucursal"}),r.jsx("button",{onClick:()=>d(!1),className:"size-8 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-red-500 flex items-center justify-center transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]}),r.jsxs("form",{onSubmit:S,className:"p-6 space-y-5",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider ml-1",children:"Nombre"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all font-bold text-sm",placeholder:"Ej. Sucursal Norte",value:b.name,onChange:E=>N({...b,name:E.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider ml-1",children:"Tipo"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1 bg-slate-100 dark:bg-slate-950 rounded-xl border border-slate-200 dark:border-slate-800",children:[r.jsx("button",{type:"button",onClick:()=>N({...b,type:"store"}),className:`py-2 rounded-lg text-xs font-bold transition-all ${b.type==="store"?"bg-white dark:bg-slate-800 text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Punto de Venta"}),r.jsx("button",{type:"button",onClick:()=>N({...b,type:"warehouse"}),className:`py-2 rounded-lg text-xs font-bold transition-all ${b.type==="warehouse"?"bg-white dark:bg-slate-800 text-orange-500 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Bodega"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider ml-1",children:"Direccin"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all font-bold text-sm",placeholder:"Calle, Nmero, Col...",value:b.address,onChange:E=>N({...b,address:E.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider ml-1",children:"Encargado"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all font-bold text-sm",placeholder:"Nombre",value:b.manager,onChange:E=>N({...b,manager:E.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider ml-1",children:"Telfono"}),r.jsx("input",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all font-bold text-sm",placeholder:"10 dgitos",value:b.phone,onChange:E=>N({...b,phone:E.target.value})})]})]}),r.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[r.jsx("h4",{className:"text-[10px] font-black uppercase text-slate-400 tracking-wider",children:"Configuracin Premium"}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-950 rounded-xl border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Colorimetra Manual"}),r.jsx("p",{className:"text-[10px] text-slate-400",children:"Permitir frmulas manuales"})]}),r.jsx("button",{type:"button",onClick:()=>N({...b,config:{...b.config,enable_manual_tinting:!b.config.enable_manual_tinting}}),className:`w-10 h-5 rounded-full transition-colors relative ${b.config.enable_manual_tinting?"bg-primary":"bg-slate-300 dark:bg-slate-700"}`,children:r.jsx("div",{className:`absolute top-1 left-1 size-3 bg-white rounded-full transition-transform ${b.config.enable_manual_tinting?"translate-x-5":""}`})})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-950 rounded-xl border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Precios Dinmicos IA"}),r.jsx("p",{className:"text-[10px] text-slate-400",children:"Sugerencias de precio en POS"})]}),r.jsx("button",{type:"button",onClick:()=>N({...b,config:{...b.config,enable_ai_dynamic_pricing:!b.config.enable_ai_dynamic_pricing}}),className:`w-10 h-5 rounded-full transition-colors relative ${b.config.enable_ai_dynamic_pricing?"bg-primary":"bg-slate-300 dark:bg-slate-700"}`,children:r.jsx("div",{className:`absolute top-1 left-1 size-3 bg-white rounded-full transition-transform ${b.config.enable_ai_dynamic_pricing?"translate-x-5":""}`})})]})]}),r.jsx("button",{disabled:m,type:"submit",className:"w-full py-3.5 bg-primary text-white font-black rounded-xl shadow-lg shadow-primary/20 hover:shadow-primary/40 active:scale-95 transition-all text-sm disabled:opacity-50 disabled:pointer-events-none",children:m?"Guardando...":f?"Guardar Cambios":"Crear Sucursal"})]})]})})]})]})},sN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState([]),[m,p]=v.useState(""),[b,N]=v.useState(null),[j,_]=v.useState(!1),[S,E]=v.useState(!1),[C,U]=v.useState(""),[R,A]=v.useState("percentage"),[$,Y]=v.useState(""),[te,T]=v.useState(null),[V,q]=v.useState(null),[re,me]=v.useState(!1),[ne,Re]=v.useState(!1),Q=`COT-${Math.floor(Math.random()*1e4).toString().padStart(4,"0")}`,Ee=new Date().toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});v.useEffect(()=>{W()},[]);const W=async()=>{try{const[X,J]=await Promise.all([ke.getProducts(),Vr.getClients()]);i(X),d(J)}catch(X){console.error("Error loading quotation data:",X)}},ce=X=>{x(J=>J.find(be=>be.id===X.id)?J.map(be=>be.id===X.id?{...be,quantity:be.quantity+1}:be):[...J,{...X,quantity:1}])},le=(X,J)=>{x(pe=>pe.map(be=>be.id===X?{...be,quantity:Math.max(0,be.quantity+J)}:be).filter(be=>be.quantity>0))},ye=()=>{window.print()},w=async()=>{try{Re(!0);const X=await xs.requestDiscount(s.id,s.name,s.branchId||"BR-CENTRO",parseFloat(C),R,$);xs.subscribeToRequest(X,J=>{T(J),J.status==="approved"?q({amount:J.amount,type:J.type}):J.status==="rejected"&&T(null)}),T({id:X,requesterId:s.id,requesterName:s.name,branchId:s.branchId||"BR-CENTRO",amount:parseFloat(C),type:R,status:"pending",reason:$,createdAt:new Date().toISOString()}),E(!1),U(""),Y("")}catch(X){console.error(X),alert("Error al solicitar descuento.")}finally{Re(!1)}},P=f.reduce((X,J)=>{const be=(J.wholesalePrice&&J.wholesaleMinQty&&J.quantity>=J.wholesaleMinQty?J.wholesalePrice:J.price)||0;return X+be*J.quantity},0),ae=V?V.type==="percentage"?P*(V.amount/100):V.amount:0,ie=P-ae,se=ie*.16,ve=ie+se,ge=()=>r.jsxs("div",{className:"w-[210mm] min-h-[297mm] bg-white text-slate-800 p-[20mm] mx-auto font-sans relative flex flex-col border border-slate-200 print:border-none print:p-[15mm]",children:[r.jsxs("div",{className:"flex justify-between items-start mb-12 border-b-2 border-slate-900 pb-8 relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-slate-900 p-4 rounded-2xl flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"format_paint"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:["Pintamax",r.jsx("span",{className:"text-primary text-xl ml-1",children:""})]}),r.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.2em] mt-2",children:"Pintamax S.A. de C.V.  Professional Paint Solutions"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Folio de Cotizacin"}),r.jsx("div",{className:"text-xl font-black text-primary tracking-tighter",children:Q}),r.jsx("div",{className:"text-[10px] font-bold text-slate-500 mt-2 uppercase",children:Ee})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-16 relative z-10",children:[r.jsxs("div",{className:"p-8 bg-slate-50 rounded-[32px] border border-slate-100 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/50 rounded-full -mr-12 -mt-12 group-hover:scale-110 transition-transform"}),r.jsxs("h4",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mb-5 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-xs",children:"person"}),"Informacin del Cliente"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-xl font-black text-slate-900 leading-tight",children:(b==null?void 0:b.name)||"Cliente de Mostrador"}),r.jsxs("div",{className:"pt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3 text-slate-500 font-medium text-xs",children:[r.jsx("span",{className:"material-symbols-outlined text-sm text-primary/50",children:"mail"}),(b==null?void 0:b.email)||"ventas@pintamax.com.mx"]}),r.jsxs("div",{className:"flex items-center gap-3 text-slate-500 font-medium text-xs",children:[r.jsx("span",{className:"material-symbols-outlined text-sm text-primary/50",children:"phone"}),(b==null?void 0:b.phone)||"01 800 PINTAMAX"]}),r.jsxs("div",{className:"mt-4 inline-flex items-center px-4 py-1.5 bg-white border border-slate-200 rounded-xl text-[10px] font-black text-slate-400 uppercase tracking-widest shadow-sm",children:["RFC: ",(b==null?void 0:b.taxId)||"XAXX010101000"]})]})]})]}),r.jsxs("div",{className:"p-8 border-2 border-slate-100 rounded-[32px] flex flex-col justify-center",children:[r.jsxs("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-5 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-xs",children:"badge"}),"Atendido por"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"size-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"support_agent"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-black text-slate-900 leading-none",children:s.name}),r.jsx("p",{className:"text-xs text-slate-500 font-bold mt-1.5",children:"Asesor Especialista"}),r.jsx("p",{className:"text-[10px] text-primary font-black uppercase tracking-widest mt-1 italic",children:"Sucursal Centro"})]})]})]})]}),r.jsx("div",{className:"flex-1 relative z-10",children:r.jsx("div",{className:"rounded-[24px] overflow-hidden border border-slate-100 shadow-sm",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-900 text-white text-[10px] font-black uppercase tracking-[0.2em]",children:[r.jsx("th",{className:"px-6 py-5 text-center w-20",children:"Imagen"}),r.jsx("th",{className:"px-8 py-5 text-left",children:"Referencia / Descripcin"}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Cantidad"}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Precio Unitario"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Subtotal"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[f.map((X,J)=>r.jsxs("tr",{className:J%2===0?"bg-white":"bg-slate-50/50",children:[r.jsx("td",{className:"px-6 py-6 text-center",children:r.jsx("div",{className:"size-12 mx-auto rounded-lg overflow-hidden bg-slate-50 border border-slate-100 flex items-center justify-center p-1",children:r.jsx("img",{src:X.image,className:"max-h-full max-w-full object-contain",alt:X.name})})}),r.jsx("td",{className:"px-8 py-6",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest mb-0.5",children:X.sku}),r.jsx("span",{className:"text-sm font-bold text-slate-800 tracking-tight",children:X.name})]})}),r.jsx("td",{className:"px-6 py-6 text-center",children:r.jsx("span",{className:"px-3 py-1.5 bg-slate-100 rounded-lg text-xs font-black text-slate-600",children:X.quantity})}),r.jsx("td",{className:"px-6 py-6 text-right",children:r.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["$",(X.wholesalePrice&&X.wholesaleMinQty&&X.quantity>=X.wholesaleMinQty?X.wholesalePrice:X.price).toLocaleString("es-MX",{minimumFractionDigits:2})]})}),r.jsx("td",{className:"px-8 py-6 text-right",children:r.jsxs("span",{className:"text-sm font-black text-slate-900",children:["$",((X.wholesalePrice&&X.wholesaleMinQty&&X.quantity>=X.wholesaleMinQty?X.wholesalePrice:X.price)*X.quantity).toLocaleString("es-MX",{minimumFractionDigits:2})]})})]},X.id)),f.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-8 py-20 text-center text-slate-300 italic font-medium",children:"No se han seleccionado productos."})})]})]})})}),r.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 gap-12 relative z-10",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100",children:[r.jsxs("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-xs",children:"gavel"}),"Condiciones Comerciales"]}),r.jsxs("ul",{className:"space-y-2 text-[9px] font-bold text-slate-500 leading-relaxed uppercase tracking-tighter",children:[r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""})," Precios incluyen IVA (16.0%)."]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""})," Validez de la oferta: 15 das naturales."]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""})," Entrega inmediata sujeta a stock."]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 pt-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-16 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:"Firma Autorizada"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-16 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:"Aceptacin Cliente"})]})]})]}),r.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl shadow-slate-900/40 relative overflow-hidden",children:[r.jsx("div",{className:"absolute -bottom-10 -left-10 size-40 bg-white/5 rounded-full blur-2xl"}),r.jsxs("div",{className:"space-y-4 relative z-10",children:[r.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{className:"text-white",children:["$",P.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),V&&r.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-green-400 uppercase tracking-widest",children:[r.jsx("span",{children:"Descuento"}),r.jsxs("span",{children:["-$",ae.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"IVA (16%)"}),r.jsxs("span",{className:"text-white",children:["$",se.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"pt-6 mt-2 border-t border-white/10 flex flex-col items-end",children:[r.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] mb-1",children:"Inversin Total"}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-white/40",children:"MXN"}),r.jsxs("span",{className:"text-4xl font-black text-white tracking-tighter",children:["$",ve.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})]})]}),r.jsxs("div",{className:"mt-auto pt-10 flex justify-between items-end border-t border-slate-100 relative z-10",children:[r.jsx("div",{className:"text-[9px] font-black text-slate-300 uppercase tracking-[0.4em]",children:"Pintamax  Copyright 2025"}),r.jsx("div",{className:"flex items-center gap-6",children:r.jsx("p",{className:"text-[10px] font-black text-slate-900",children:"pintamax.com.mx"})})]})]});return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-white dark:bg-slate-950 relative",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-6 md:px-10 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Cotizador"}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest hidden sm:block",children:"Gestin de Presupuestos"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>me(!0),className:"lg:hidden relative p-3 text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-2xl",children:[r.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"}),f.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-primary text-white text-[10px] size-5 rounded-full flex items-center justify-center font-black",children:f.length})]}),r.jsxs("div",{className:"flex gap-3 h-10 print:hidden",children:[r.jsxs("button",{disabled:f.length===0,onClick:()=>_(!0),className:"flex h-10 px-3 md:px-5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-black text-xs rounded-xl hover:bg-slate-100 transition-all items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility"}),r.jsx("span",{className:"hidden md:inline",children:"VISTA PREVIA"})]}),r.jsxs("button",{disabled:f.length===0,onClick:ye,className:"h-10 px-6 bg-primary text-white font-black text-xs rounded-xl shadow-lg shadow-primary/20 flex items-center gap-2 hover:scale-105 active:scale-95 transition-all",children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"print"}),r.jsx("span",{className:"hidden sm:inline",children:"IMPRIMIR"})]})]})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"flex-1 p-4 md:p-8 flex flex-col gap-6 overflow-hidden",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative group",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",children:"search"}),r.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl outline-none focus:border-primary shadow-sm transition-all text-sm font-medium",placeholder:"Buscar producto...",value:m,onChange:X=>p(X.target.value)})]}),r.jsxs("div",{className:"w-full md:w-80 relative flex items-center bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-4 py-1.5 shadow-sm transition-all focus-within:border-primary",children:[r.jsx("span",{className:"material-symbols-outlined text-slate-400 mr-2",children:"person"}),r.jsxs("select",{className:"flex-1 bg-transparent border-none text-xs font-black uppercase p-2 focus:ring-0 outline-none cursor-pointer",onChange:X=>{const J=c.find(pe=>pe.id===X.target.value);N(J||null)},children:[r.jsx("option",{value:"",children:"Consumidor Final"}),c.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:r.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:n.filter(X=>X.name.toLowerCase().includes(m.toLowerCase())||X.sku.toLowerCase().includes(m.toLowerCase())).map(X=>r.jsxs("div",{onClick:()=>ce(X),className:"bg-white dark:bg-slate-800 p-5 rounded-3xl border-2 border-transparent hover:border-primary hover:shadow-xl hover:shadow-primary/5 cursor-pointer transition-all group relative",children:[r.jsx("div",{className:"aspect-square bg-slate-50 dark:bg-slate-900 rounded-2xl p-4 mb-4 flex items-center justify-center overflow-hidden",children:r.jsx("img",{src:X.image,className:"max-h-full max-w-full object-contain group-hover:scale-110 transition-transform duration-500"})}),r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1.5",children:X.sku}),r.jsx("p",{className:"text-sm font-black text-slate-800 dark:text-slate-100 leading-snug line-clamp-2",children:X.name}),r.jsxs("p",{className:"text-primary font-black mt-3 text-lg",children:["$",X.price.toLocaleString()]}),r.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity bg-primary text-white rounded-xl p-2 shadow-lg",children:r.jsx("span",{className:"material-symbols-outlined text-base",children:"add"})})]},X.id))})})]}),re&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-40 transition-all",onClick:()=>me(!1)}),r.jsxs("div",{className:`
            fixed lg:static top-0 right-0 h-full w-[320px] md:w-[440px] bg-white dark:bg-slate-800 
            border-l dark:border-slate-700 flex flex-col z-[45] shadow-2xl transition-all duration-300
            ${re?"translate-x-0":"translate-x-full lg:translate-x-0"}
          `,children:[r.jsxs("div",{className:"p-6 md:p-8 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>me(!1),className:"lg:hidden text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward_ios"})}),r.jsx("h3",{className:"font-black text-lg leading-tight",children:"Presupuesto"})]}),r.jsx("button",{onClick:()=>x([]),className:"size-10 flex items-center justify-center text-slate-300 hover:text-red-500 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"delete_sweep"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6 custom-scrollbar",children:[f.map(X=>r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"size-14 rounded-2xl bg-slate-100 dark:bg-slate-900 p-2 flex-shrink-0 flex items-center justify-center",children:r.jsx("img",{src:X.image,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("p",{className:"text-xs font-bold text-slate-800 dark:text-slate-100 truncate pr-2",children:X.name}),r.jsxs("span",{className:"text-sm font-black text-primary",children:["$",(X.price*X.quantity).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-100 dark:bg-slate-700 rounded-xl p-0.5",children:[r.jsx("button",{onClick:()=>le(X.id,-1),className:"size-7 flex items-center justify-center hover:bg-white dark:hover:bg-slate-600 rounded-lg text-lg font-bold transition-colors",children:"-"}),r.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-xs font-black bg-transparent border-b border-slate-200 dark:border-slate-700 outline-none p-0 focus:border-primary",value:X.quantity,onChange:J=>{const pe=parseInt(J.target.value)||0;x(be=>be.map(at=>at.id===X.id?{...at,quantity:Math.max(0,pe)}:at))}}),r.jsx("button",{onClick:()=>le(X.id,1),className:"size-7 flex items-center justify-center hover:bg-white dark:hover:bg-slate-600 rounded-lg text-lg font-bold transition-colors",children:"+"})]}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tighter",children:["$",X.price.toLocaleString()," C/U"]})]})]})]},X.id)),f.length===0&&r.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 opacity-40",children:[r.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300",children:"shopping_bag"}),r.jsx("p",{className:"text-xs font-black uppercase mt-4",children:"Lista Vaca"})]})]}),r.jsxs("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-900/50 border-t-2 border-slate-100 dark:border-slate-700 space-y-4",children:[r.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{className:"text-slate-900 dark:text-white",children:["$",P.toLocaleString()]})]}),V&&r.jsxs("div",{className:"flex justify-between text-xs font-black text-green-600 uppercase tracking-widest",children:[r.jsx("span",{children:"Descuento"}),r.jsxs("span",{children:["-$",ae.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"IVA (16.0%)"}),r.jsxs("span",{className:"text-slate-900 dark:text-white",children:["$",se.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between items-end pt-5 border-t-4 border-primary mt-2",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em]",children:"IMPORTE TOTAL"}),r.jsxs("span",{className:"text-2xl md:text-4xl font-black text-primary tracking-tighter leading-none mt-2",children:["$",ve.toLocaleString()]})]}),r.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[r.jsx("button",{disabled:f.length===0||!!te||!!V,onClick:()=>E(!0),className:"text-[9px] font-black text-primary uppercase hover:underline disabled:opacity-50",children:(te==null?void 0:te.status)==="pending"?"Esperando Aprobacin...":"Solicitar Descuento"}),r.jsxs("button",{disabled:f.length===0,onClick:()=>_(!0),className:"lg:hidden flex items-center gap-1 text-[10px] font-black text-slate-500 uppercase hover:text-primary transition-colors",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"visibility"}),"Vista Previa"]})]})]})]})]})]}),j&&r.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-100 dark:bg-slate-950 p-4 md:p-10 overflow-y-auto flex flex-col items-center animate-in fade-in duration-300",children:[r.jsxs("div",{className:"w-full max-w-[210mm] mb-6 flex justify-between items-center shrink-0",children:[r.jsxs("button",{onClick:()=>_(!1),className:"flex items-center gap-2 text-slate-500 font-black hover:text-slate-900 dark:hover:text-white transition-all uppercase tracking-widest text-xs",children:[r.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})," Regresar"]}),r.jsxs("button",{onClick:ye,className:"flex items-center gap-2 bg-primary text-white px-8 py-3 rounded-2xl font-black shadow-xl shadow-primary/30 hover:scale-105 transition-all uppercase tracking-widest text-xs",children:[r.jsx("span",{className:"material-symbols-outlined",children:"print"})," Imprimir"]})]}),r.jsxs("div",{className:"w-full flex-1 overflow-auto flex flex-col items-center custom-scrollbar pb-20 px-4",children:[r.jsx("div",{className:"w-fit bg-white shadow-2xl rounded-sm mb-10 origin-top transition-transform duration-300",style:{transform:typeof window<"u"&&window.innerWidth<850?`scale(${(window.innerWidth-40)/850})`:"scale(1)"},children:r.jsx(ge,{})}),r.jsx("p",{className:"pb-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.5em] mt-auto",children:"--- Fin de la Vista Previa ---"})]})]}),S&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:r.jsxs("div",{className:"p-8 md:p-10 overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-black mb-6",children:"Descuento Especial"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-2xl",children:["percentage","fixed"].map(X=>r.jsx("button",{onClick:()=>A(X),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${R===X?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-400"}`,children:X==="percentage"?"Porcentaje":"Monto Fijo"},X))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest",children:"Monto"}),r.jsx("input",{type:"number",value:C,onChange:X=>U(X.target.value),className:"w-full p-4 bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 rounded-2xl font-black text-xl outline-none focus:border-primary transition-all",placeholder:R==="percentage"?"Ej: 15":"Ej: 500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest",children:"Justificacin"}),r.jsx("textarea",{value:$,onChange:X=>Y(X.target.value),className:"w-full p-4 bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 rounded-2xl font-bold text-sm h-32 resize-none outline-none focus:border-primary transition-all",placeholder:"Motivo..."})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs tracking-widest",children:"Cancelar"}),r.jsx("button",{onClick:w,disabled:!C||!$||ne,className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl shadow-primary/20 disabled:opacity-50 uppercase text-xs tracking-widest",children:ne?"Enviando...":"Pedir Descuento"})]})]})]})})}),r.jsx("div",{className:"hidden print:block w-full",children:r.jsx(ge,{})})]})]})},rN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState(!1),[m,p]=v.useState(!1),[b,N]=v.useState(""),[j,_]=v.useState(1),[S,E]=v.useState("uso_tienda"),C=s.role===xe.ADMIN,U=s.role===xe.WAREHOUSE_SUB,[R,A]=v.useState(!1);v.useEffect(()=>{$()},[]);const $=async()=>{try{x(!0);const[T,V]=await Promise.all([ke.getProductsByBranch(s.branchId||"BR-MAIN"),ke.getReturnRequests(C?void 0:s.branchId)]);i(T),d(V)}catch(T){console.error(T)}finally{x(!1)}},Y=async T=>{if(T.preventDefault(),!(!b||j<=0))try{await ke.createReturnRequest(s.branchId||"BR-MAIN",b,j,S),p(!1),$(),alert("Solicitud de devolucin enviada.")}catch(V){alert("Error: "+V.message)}},te=async(T,V)=>{try{await ke.authorizeReturn(T,s.id,V),$()}catch(q){alert("Error: "+q.message)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:[r.jsx("h1",{className:"text-xl font-black",children:"Devoluciones a Bodega"}),!C&&r.jsx("button",{onClick:()=>U?A(!0):p(!0),className:"px-6 py-2 bg-primary text-white rounded-xl font-black text-xs uppercase shadow-lg shadow-primary/20",children:"Nueva Devolucin"})]}),r.jsx(Zi,{isOpen:R,onClose:()=>A(!1),onAuthorized:()=>p(!0),description:"El subencargado requiere autorizacin para generar devoluciones."}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:r.jsx("div",{className:"max-w-6xl mx-auto bg-white dark:bg-slate-800 rounded-[32px] shadow-sm border dark:border-slate-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700 uppercase text-[10px] font-black text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-8 py-5",children:"Producto"}),r.jsx("th",{className:"px-6 py-5",children:"Cantidad"}),r.jsx("th",{className:"px-6 py-5",children:"Sucursal"}),r.jsx("th",{className:"px-6 py-5",children:"Motivo"}),r.jsx("th",{className:"px-6 py-5",children:"Estado"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:c.map(T=>{var V,q;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-8 py-5 font-bold",children:(V=T.products)==null?void 0:V.name}),r.jsx("td",{className:"px-6 py-5 font-black",children:T.quantity}),r.jsx("td",{className:"px-6 py-5",children:(q=T.branches)==null?void 0:q.name}),r.jsx("td",{className:"px-6 py-5 capitalize",children:T.reason.replace("_"," ")}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-[9px] font-black uppercase ${T.status==="approved"?"bg-green-100 text-green-600":T.status==="rejected"?"bg-red-100 text-red-600":"bg-amber-100 text-amber-600"}`,children:bs(T.status)})}),r.jsx("td",{className:"px-8 py-5 text-right",children:C&&T.status==="pending_authorization"&&r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>te(T.id,!0),className:"p-2 text-green-500 hover:bg-green-50 rounded-lg",children:r.jsx("span",{className:"material-symbols-outlined",children:"check_circle"})}),r.jsx("button",{onClick:()=>te(T.id,!1),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:r.jsx("span",{className:"material-symbols-outlined",children:"cancel"})})]})})]},T.id)})})]})})})}),m&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:r.jsxs("div",{className:"p-10 overflow-y-auto",children:[r.jsx("h3",{className:"text-2xl font-black mb-8",children:"Solicitar Devolucin"}),r.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Producto"}),r.jsxs("select",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:b,onChange:T=>N(T.target.value),children:[r.jsx("option",{value:"",children:"Selecciona..."}),n.map(T=>r.jsxs("option",{value:T.id,children:[T.name," (",T.stock," dispon.)"]},T.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Cantidad"}),r.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none font-black",value:j,onChange:T=>_(parseInt(T.target.value)||0)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Motivo"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:S,onChange:T=>E(T.target.value),children:[r.jsx("option",{value:"uso_tienda",children:"Uso de Tienda"}),r.jsx("option",{value:"demostracion",children:"Demostraciones"}),r.jsx("option",{value:"defecto",children:"Defecto de Material"})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl",children:"Enviar"})]})]})]})})})]})]})},nN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(!1),[f,x]=v.useState(!1),[m,p]=v.useState(""),[b,N]=v.useState(0),[j,_]=v.useState("limpieza"),S=s.role===xe.ADMIN,E=s.role===xe.WAREHOUSE;v.useEffect(()=>{C()},[]);const C=async()=>{try{d(!0);const R=await ke.getInternalSupplies(S?void 0:s.branchId);i(R)}catch(R){console.error(R)}finally{d(!1)}},U=async R=>{R.preventDefault();try{await ke.createInternalSupply({branchId:s.branchId||"BR-MAIN",description:m,amount:b,category:j}),x(!1),p(""),N(0),C()}catch(A){alert("Error: "+A.message)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:[r.jsx("h1",{className:"text-xl font-black",children:"Suministros (Limpieza y Papelera)"}),E&&r.jsx("button",{onClick:()=>x(!0),className:"px-6 py-2 bg-primary text-white rounded-xl font-black text-xs uppercase shadow-lg shadow-primary/20",children:"Registrar Salida"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:r.jsx("div",{className:"max-w-6xl mx-auto bg-white dark:bg-slate-800 rounded-[32px] shadow-sm border dark:border-slate-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700 uppercase text-[10px] font-black text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-8 py-5",children:"Descripcin"}),r.jsx("th",{className:"px-6 py-5",children:"Categora"}),r.jsx("th",{className:"px-6 py-5",children:"Sucursal Destino"}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Valor (Solo Control)"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:n.map(R=>{var A;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-8 py-5 font-bold",children:R.description}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${R.category==="limpieza"?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"}`,children:R.category})}),r.jsx("td",{className:"px-6 py-5",children:(A=R.branches)==null?void 0:A.name}),r.jsxs("td",{className:"px-6 py-5 text-right font-black text-slate-400",children:["$",R.amount.toLocaleString()]}),r.jsx("td",{className:"px-8 py-5 text-right text-xs text-slate-500",children:R.createdAt&&!isNaN(new Date(R.createdAt).getTime())?new Date(R.createdAt).toLocaleDateString():R.created_at&&!isNaN(new Date(R.created_at).getTime())?new Date(R.created_at).toLocaleDateString():"---"})]},R.id)})})]})})})}),f&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:r.jsxs("div",{className:"p-10 overflow-y-auto",children:[r.jsx("h3",{className:"text-2xl font-black mb-8",children:"Registrar Suministros"}),r.jsxs("form",{onSubmit:U,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Descripcin del material"}),r.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none focus:ring-2 focus:ring-primary/20",value:m,onChange:R=>p(R.target.value),placeholder:"Ej: Paquete de hojas, Jabn, etc."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Categora"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:j,onChange:R=>_(R.target.value),children:[r.jsx("option",{value:"limpieza",children:"Limpieza"}),r.jsx("option",{value:"papeleria",children:"Papelera"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Precio (Valor para control de gastos)"}),r.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none font-black",value:b,onChange:R=>N(parseFloat(R.target.value)||0)})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl",children:"Registrar"})]})]})]})})})]})]})},da={async getSuppliers(){const{data:s,error:a}=await ee.from("suppliers").select("*").order("name");if(a)throw a;return s||[]},async createSupplier(s){const{data:a,error:n}=await ee.from("suppliers").insert({name:s.name,tax_id:s.taxId,contact_info:s.contactInfo,contact_name:s.contactName,contact_phone:s.contactPhone,contact_email:s.contactEmail,payment_terms_days:s.paymentTermsDays,commercial_conditions:s.commercialConditions||{}}).select().single();if(n)throw n;return a},async updateSupplier(s,a){const n={};a.name&&(n.name=a.name),a.taxId&&(n.tax_id=a.taxId),a.contactInfo&&(n.contact_info=a.contactInfo),a.contactName&&(n.contact_name=a.contactName),a.contactPhone&&(n.contact_phone=a.contactPhone),a.contactEmail&&(n.contact_email=a.contactEmail),a.paymentTermsDays!==void 0&&(n.payment_terms_days=a.paymentTermsDays);const{error:i}=await ee.from("suppliers").update(n).eq("id",s);if(i)throw i},async deleteSupplier(s){const{error:a}=await ee.from("suppliers").delete().eq("id",s);if(a)throw a},async getInvoices(s){let a=ee.from("supplier_invoices").select("*, suppliers(name)");s&&s!=="all"&&(a=a.eq("status",s));const{data:n,error:i}=await a.order("due_date",{ascending:!0});if(i)throw i;return(n==null?void 0:n.map(c=>{var d;return{id:c.id,supplierId:c.supplier_id,supplierName:(d=c.suppliers)==null?void 0:d.name,invoiceFolio:c.invoice_folio,amount:c.amount,status:c.status,issueDate:c.issue_date,dueDate:c.due_date,pdfUrl:c.pdf_url,xmlUrl:c.xml_url,notes:c.notes,createdAt:c.created_at}}))||[]},async createInvoice(s){const{data:a,error:n}=await ee.from("supplier_invoices").insert({supplier_id:s.supplierId,invoice_folio:s.invoiceFolio,amount:s.amount,issue_date:s.issueDate,due_date:s.dueDate,status:"received"}).select().single();if(n)throw n;return a},async updateInvoiceStatus(s,a){const{error:n}=await ee.from("supplier_invoices").update({status:a}).eq("id",s);if(n)throw n},async getLeases(){const{data:s,error:a}=await ee.from("leases").select("*").eq("active",!0);if(a)throw a;return(s||[]).map(n=>({id:n.id,propertyName:n.property_name,landlordName:n.landlord_name,monthlyAmount:n.monthly_amount,paymentDay:n.payment_day,contractStart:n.contract_start,contractEnd:n.contract_end,active:n.active,branchId:n.branch_id}))},async registerLeasePayment(s){const{error:a}=await ee.from("lease_payments").insert({lease_id:s.leaseId,amount:s.amount,payment_date:s.paymentDate,notes:s.notes});if(a)throw a},async getFinanceMetrics(){const{data:s}=await ee.from("supplier_invoices").select("amount").in("status",["received","verified","authorized"]),a=(s==null?void 0:s.reduce((c,d)=>c+d.amount,0))||0,n=a*.5,i=12e4;return{accountsPayable:a,monthlyExpenses:n,monthlySales:i,netIncome:i-n}}},lN=()=>{const[s,a]=v.useState(!1),[n,i]=v.useState([{id:"welcome",role:"assistant",text:"Hola! Soy tu asistente Pintamax. Pregntame sobre inventario, recomendaciones tcnicas o anlisis de ventas.",timestamp:new Date}]),[c,d]=v.useState(""),[f,x]=v.useState(!1),[m,p]=v.useState(!Xs.hasApiKey()),[b,N]=v.useState(""),j=v.useRef(null),_=()=>{var C;(C=j.current)==null||C.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{console.log("AiAssistant mounted, user role:",localStorage.getItem("pintamax_user")),_()},[n,s]);const S=()=>{b.trim().length>10&&(Xs.setApiKey(b),p(!1))},E=async()=>{if(!c.trim()||f)return;const C={id:Date.now().toString(),role:"user",text:c,timestamp:new Date};i(U=>[...U,C]),d(""),x(!0);try{const U=await ke.getProductsByBranch("ALL"),R=localStorage.getItem("pintamax_user"),A=R?JSON.parse(R):null;let $;if((A==null?void 0:A.role)===xe.FINANCE||(A==null?void 0:A.role)===xe.ADMIN)try{$=await da.getFinanceMetrics()}catch(T){console.error("Error fetching finance context",T)}const Y=await Xs.sendMessage(C.text,{products:U,branchId:"BR-MAIN",userRole:(A==null?void 0:A.role)||"POS",financeContext:$}),te={id:(Date.now()+1).toString(),role:"assistant",text:Y,timestamp:new Date};i(T=>[...T,te])}catch{const R={id:(Date.now()+1).toString(),role:"assistant",text:"Error de conexin con el cerebro de IA.",timestamp:new Date};i(A=>[...A,R])}finally{x(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>a(!s),className:`fixed bottom-6 right-6 sm:bottom-8 sm:right-8 z-[9999] p-4 rounded-full shadow-2xl transition-all duration-300 hover:scale-110 active:scale-95 ${s?"bg-slate-800 rotate-90":"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-pulse-slow"}`,children:s?r.jsx("span",{className:"material-symbols-outlined text-white text-xl",children:"close"}):r.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"auto_awesome"})}),r.jsxs("div",{className:`fixed bottom-24 right-6 sm:right-8 w-96 max-w-[calc(100vw-3rem)] bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border border-slate-200 dark:border-slate-800 z-[9999] overflow-hidden transition-all duration-300 origin-bottom-right flex flex-col ${s?"scale-100 opacity-100":"scale-0 opacity-0 pointer-events-none"}`,style:{height:"600px",maxHeight:"70vh"},children:[r.jsxs("div",{className:"p-4 bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center gap-3 shrink-0",children:[r.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:r.jsx("span",{className:"material-symbols-outlined text-white",children:"smart_toy"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-white text-sm",children:"Asistente Pintamax"}),r.jsx("p",{className:"text-[10px] text-white/80 font-bold uppercase tracking-wider",children:"Powered by Llama 3 (Groq)"})]})]}),m?r.jsxs("div",{className:"flex-1 p-8 flex flex-col items-center justify-center text-center space-y-4",children:[r.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300",children:"key_off"}),r.jsx("h4",{className:"font-black text-slate-700 dark:text-white",children:"Falta API Key"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Para usar el asistente, necesitas una API Key de Gemini (Google AI Studio)."}),r.jsx("input",{type:"password",placeholder:"Pegar API Key aqu...",className:"w-full p-3 bg-slate-100 dark:bg-slate-800 rounded-xl text-xs font-mono border dark:border-slate-700",value:b,onChange:C=>N(C.target.value)}),r.jsx("button",{onClick:S,className:"w-full py-3 bg-indigo-500 text-white font-bold rounded-xl text-xs uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Guardar y Activar"}),r.jsx("p",{className:"text-[10px] text-slate-400",children:"La clave se guarda localmente en tu navegador."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-950/50 custom-scrollbar",children:[n.map(C=>r.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-xs font-medium leading-relaxed ${C.role==="user"?"bg-indigo-500 text-white rounded-br-none":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-bl-none shadow-sm"}`,children:C.text})},C.id)),f&&r.jsx("div",{className:"flex justify-start",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-2xl rounded-bl-none border border-slate-200 dark:border-slate-700 shadow-sm flex gap-1",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.2s]"}),r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})}),r.jsx("div",{ref:j})]}),r.jsx("div",{className:"p-3 bg-white dark:bg-slate-900 border-t dark:border-slate-800 shrink-0",children:r.jsxs("form",{onSubmit:C=>{C.preventDefault(),E()},className:"flex gap-2",children:[r.jsx("input",{className:"flex-1 bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 text-xs font-medium focus:ring-2 focus:ring-indigo-500",placeholder:"Escribe tu consulta...",value:c,onChange:C=>d(C.target.value),disabled:f}),r.jsx("button",{type:"submit",disabled:!c.trim()||f,className:"bg-indigo-500 text-white p-3 rounded-xl disabled:opacity-50 hover:bg-indigo-600 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"send"})})]})})]})]})]})},iN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState(!1),[m,p]=v.useState(!1),[b,N]=v.useState(""),[j,_]=v.useState("litro"),[S,E]=v.useState(1),[C,U]=v.useState(""),[R,A]=v.useState([]),$=s.role===xe.ADMIN,Y=s.role===xe.WAREHOUSE||s.role===xe.WAREHOUSE_SUB,te=s.role===xe.WAREHOUSE_SUB,[T,V]=v.useState(!1);v.useEffect(()=>{q()},[]);const q=async()=>{try{x(!0);const[ne,Re,Q]=await Promise.all([ke.getProducts(),ke.getPackagingRequests($?void 0:s.branchId),ke.getBranches()]);i(ne.filter(Ee=>(Ee.description||"").toLowerCase().includes("tambo")||Ee.sku.includes("200L"))),d(Re),A(Q)}catch(ne){console.error(ne)}finally{x(!1)}},re=async ne=>{ne.preventDefault();try{await ke.createPackagingRequest({bulkProductId:b,targetPackageType:j,quantityDrum:S,branchId:C||s.branchId}),p(!1),q()}catch(Re){alert("Error: "+Re.message)}},me=async(ne,Re)=>{try{await ke.updatePackagingStatus(ne,Re),q()}catch(Q){alert("Error: "+Q.message)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-8 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:[r.jsx("h1",{className:"text-xl font-black",children:"Envasado (Litreados)"}),Y&&r.jsx("button",{onClick:()=>te?V(!0):p(!0),className:"px-6 py-2 bg-primary text-white rounded-xl font-black text-xs uppercase shadow-lg shadow-primary/20",children:"Solicitar Envasado"})]}),r.jsx(Zi,{isOpen:T,onClose:()=>V(!1),onAuthorized:()=>p(!0),description:"El subencargado requiere autorizacin para solicitar envasado."}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:r.jsx("div",{className:"max-w-6xl mx-auto bg-white dark:bg-slate-800 rounded-[32px] shadow-sm border dark:border-slate-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-700 uppercase text-[10px] font-black text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-8 py-5",children:"Producto Granel"}),r.jsx("th",{className:"px-6 py-5",children:"Sucursal Responsable"}),r.jsx("th",{className:"px-6 py-5",children:"Envase Destino"}),r.jsx("th",{className:"px-6 py-5 text-center",children:"Cant. Tambos"}),r.jsx("th",{className:"px-6 py-5",children:"Estado"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:c.map(ne=>{var Re,Q;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-8 py-5 font-bold",children:(Re=ne.products)==null?void 0:Re.name}),r.jsx("td",{className:"px-6 py-5",children:(Q=ne.branches)==null?void 0:Q.name}),r.jsx("td",{className:"px-6 py-5 font-black uppercase text-xs",children:ne.target_package_type}),r.jsx("td",{className:"px-6 py-5 text-center font-black",children:ne.quantity_drum}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-[9px] font-black uppercase ${ne.status==="completed"?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:bs(ne.status)})}),r.jsxs("td",{className:"px-8 py-5 text-right",children:[Y&&ne.status==="processing"&&r.jsx("button",{onClick:()=>me(ne.id,"completed"),className:"text-xs font-black text-primary uppercase hover:underline",children:"Finalizar"}),s.branchId===ne.branch_id&&ne.status==="sent_to_branch"&&r.jsx("button",{onClick:()=>me(ne.id,"processing"),className:"text-xs font-black text-blue-500 uppercase hover:underline",children:"Iniciar Envasado"})]})]},ne.id)})})]})})})}),m&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:r.jsxs("div",{className:"p-10 overflow-y-auto",children:[r.jsx("h3",{className:"text-2xl font-black mb-8",children:"Nueva Solicitud"}),r.jsxs("form",{onSubmit:re,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Tambo (200L)"}),r.jsxs("select",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:b,onChange:ne=>N(ne.target.value),children:[r.jsx("option",{value:"",children:"Selecciona..."}),n.map(ne=>r.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Envase Destino"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:j,onChange:ne=>_(ne.target.value),children:[r.jsx("option",{value:"litro",children:"LITRO"}),r.jsx("option",{value:"galon",children:"GALN"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Cantidad Tambos"}),r.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none font-black",value:S,onChange:ne=>E(parseInt(ne.target.value)||0)})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500",children:"Sucursal que envasa"}),r.jsxs("select",{required:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-2xl outline-none",value:C,onChange:ne=>U(ne.target.value),children:[r.jsx("option",{value:"",children:"Selecciona sucursal..."}),R.filter(ne=>ne.type==="store").map(ne=>r.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase text-xs",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-xl",children:"Solicitar"})]})]})]})})})]})]})},oN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState(!1),[m,p]=v.useState("today"),[b,N]=v.useState(""),[j,_]=v.useState(""),[S,E]=v.useState(s.role===xe.ADMIN?"ALL":"BR-CENTRO");v.useEffect(()=>{C()},[]),v.useEffect(()=>{R()},[m,b,j,S]);const C=async()=>{try{const T=await ke.getBranches();d(T)}catch(T){console.error(T)}},U=()=>{const T=new Date;let V=new Date;switch(T.setHours(23,59,59,999),V.setHours(0,0,0,0),m){case"today":break;case"week":const q=V.getDay(),re=V.getDate()-q+(q===0?-6:1);V.setDate(re);break;case"fortnight":V.setDate(V.getDate()-15);break;case"month":V.setDate(1);break;case"custom":if(!b||!j)return null;V=new Date(b);const me=new Date(j);return me.setHours(23,59,59,999),{start:V.toISOString(),end:me.toISOString()}}return{start:V.toISOString(),end:T.toISOString()}},R=async()=>{const T=U();if(T){x(!0);try{const V=await Qs.getSalesWithFilters(T.start,T.end,S);i(V)}catch(V){console.error(V)}finally{x(!1)}}},A=n.reduce((T,V)=>T+V.total,0),$=n.filter(T=>T.paymentMethod==="cash").reduce((T,V)=>T+V.total,0),Y=n.filter(T=>T.paymentMethod==="card").reduce((T,V)=>T+V.total,0),te=n.filter(T=>T.paymentMethod==="transfer").reduce((T,V)=>T+V.total,0);return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-slate-950",children:[r.jsxs("header",{className:"h-20 flex items-center justify-between px-6 md:px-8 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Corte de Caja"})]}),r.jsx("div",{className:"hidden lg:flex gap-2 bg-slate-100 dark:bg-slate-800 p-1 rounded-xl",children:["today","week","fortnight","month"].map(T=>r.jsx("button",{onClick:()=>p(T),className:`px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${m===T?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:{today:"Hoy",week:"Semana",fortnight:"Quincena",month:"Mes",custom:"Personalizado"}[T]},T))})]}),r.jsxs("div",{className:"p-4 md:p-8 overflow-y-auto custom-scrollbar space-y-6 md:space-y-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-end bg-white dark:bg-slate-900 p-6 rounded-2xl border dark:border-slate-800 shadow-sm transition-all focus-within:ring-2 focus-within:ring-primary/10",children:[r.jsxs("div",{className:"lg:hidden w-full space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Periodo"}),r.jsxs("select",{className:"block w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-xl text-sm font-bold",value:m,onChange:T=>p(T.target.value),children:[r.jsx("option",{value:"today",children:"Hoy"}),r.jsx("option",{value:"week",children:"Esta Semana"}),r.jsx("option",{value:"fortnight",children:"Quincena"}),r.jsx("option",{value:"month",children:"Este Mes"}),r.jsx("option",{value:"custom",children:"Personalizado"})]})]}),s.role===xe.ADMIN&&r.jsxs("div",{className:"space-y-1 w-full md:w-auto",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Sucursal"}),r.jsxs("select",{className:"block w-full md:w-48 px-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-xl text-sm font-bold",value:S,onChange:T=>E(T.target.value),children:[r.jsx("option",{value:"ALL",children:"Todas"}),c.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),m==="custom"&&r.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Desde"}),r.jsx("input",{type:"date",className:"block w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 rounded-xl text-sm font-bold",value:b,onChange:T=>N(T.target.value)})]}),r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Hasta"}),r.jsx("input",{type:"date",className:"block w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 rounded-xl text-sm font-bold",value:j,onChange:T=>_(T.target.value)})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-8",children:[r.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-xl shadow-indigo-500/20",children:[r.jsx("p",{className:"text-xs font-medium opacity-80 uppercase tracking-widest mb-1",children:"Total"}),r.jsxs("h3",{className:"text-2xl md:text-3xl font-black",children:["$",A.toLocaleString()]}),r.jsxs("p",{className:"text-[10px] opacity-60 mt-2",children:[n.length," ventas"]})]}),r.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl shadow-sm",children:[r.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:"Efectivo"}),r.jsxs("h3",{className:"text-2xl md:text-3xl font-black text-slate-900 dark:text-white",children:["$",$.toLocaleString()]})]}),r.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl shadow-sm",children:[r.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:"Tarjeta"}),r.jsxs("h3",{className:"text-2xl md:text-3xl font-black text-slate-900 dark:text-white",children:["$",Y.toLocaleString()]})]}),r.jsxs("div",{className:"p-6 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl shadow-sm",children:[r.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:"Transf."}),r.jsxs("h3",{className:"text-2xl md:text-3xl font-black text-slate-900 dark:text-white",children:["$",te.toLocaleString()]})]})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border dark:border-slate-800 shadow-sm overflow-hidden transition-all hover:shadow-lg",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[700px]",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b dark:border-slate-800",children:r.jsxs("tr",{className:"text-[10px] uppercase font-black text-slate-400 tracking-widest",children:[r.jsx("th",{className:"px-6 py-5",children:"Folio / Fecha"}),r.jsx("th",{className:"px-6 py-5",children:"Detalle Venta"}),r.jsx("th",{className:"px-6 py-5",children:"Mtodo"}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:f?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-20 text-center text-slate-400 font-bold",children:"Cargando transacciones..."})}):n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-slate-400 italic",children:"No hay registros"})}):n.map(T=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-black text-slate-900 dark:text-white font-mono",children:T.id.slice(0,8).toUpperCase()}),r.jsxs("span",{className:"text-[9px] text-slate-400 font-bold mt-1 uppercase tracking-tighter",children:[new Date(T.createdAt).toLocaleDateString(),"  ",new Date(T.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.items.map((V,q)=>r.jsxs("div",{className:"flex justify-between text-[11px] text-slate-600 dark:text-slate-300 max-w-xs group-hover:text-slate-900 dark:group-hover:text-white transition-colors",children:[r.jsxs("span",{className:"truncate pr-4 font-medium",children:[V.quantity,"x ",V.productName]}),r.jsxs("span",{className:"text-slate-400 font-mono tracking-tighter shrink-0",children:["$",V.total.toLocaleString()]})]},q)),T.discountAmount>0&&r.jsxs("div",{className:"flex justify-between items-center text-[9px] font-black text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg max-w-xs mt-1 border border-amber-100 dark:border-amber-900/30",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"percent"}),"DESCUENTO"]}),r.jsxs("span",{className:"font-mono",children:["-$",T.discountAmount.toLocaleString()]})]}),T.branchName&&r.jsx("span",{className:"mt-1 text-[9px] font-black px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded-md w-fit text-slate-500 uppercase tracking-tighter",children:T.branchName})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest
                                                        ${T.paymentMethod==="cash"?"bg-emerald-100 text-emerald-700":T.paymentMethod==="card"?"bg-indigo-100 text-indigo-700":"bg-violet-100 text-violet-700"}
                                                    `,children:T.paymentMethod==="cash"?"Efectivo":T.paymentMethod==="card"?"Tarjeta":"Transf."})}),r.jsx("td",{className:"px-6 py-5 text-right",children:r.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white group-hover:text-primary transition-colors",children:["$",T.total.toLocaleString()]})})]},T.id))})]})})})]})]})]})},cN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState([]),[m,p]=v.useState([]),[b,N]=v.useState(!1),[j,_]=v.useState("branches"),[S,E]=v.useState(!1),[C,U]=v.useState(!1),[R,A]=v.useState(null),[$,Y]=v.useState([]),[te,T]=v.useState(""),[V,q]=v.useState("ALL"),re=ml();v.useEffect(()=>{me()},[]);const me=async()=>{try{N(!0);const[w,P,ae,ie]=await Promise.all([ke.getBranches(),ke.getRestockSheets(),ke.getProducts(),ke.getSupplyOrders()]);d(w.filter(se=>se.type==="store")),i(P),x(ae),p(ie)}catch(w){console.error(w)}finally{N(!1)}},ne=w=>{A(w),Y([]),E(!0)},Re=w=>{const P=$.find(ae=>ae.product.id===w.id);Y(P?$.map(ae=>ae.product.id===w.id?{...ae,quantity:ae.quantity+1}:ae):[...$,{product:w,quantity:1}])},Q=(w,P)=>{P<=0?Y($.filter(ae=>ae.product.id!==w)):Y($.map(ae=>ae.product.id===w?{...ae,quantity:P}:ae))},Ee=async()=>{if(!(!R||$.length===0))try{N(!0);const w=$.map(ae=>({productId:ae.product.id,quantity:ae.quantity,unitPrice:ae.product.price})),P=await ke.createRestockSheet(R.id,w);E(!1),me(),re(`/shipping-note/${P}`)}catch(w){console.error(w),alert("Error al crear hoja de resurtido")}finally{N(!1)}},W=async()=>{if($.length!==0)try{N(!0);const w=$.map(P=>({productId:P.product.id,quantity:P.quantity,unitPrice:P.product.price}));if(!s.branchId){alert("Error: No tienes una sucursal asignada."),N(!1);return}await ke.createSupplyOrder(s.branchId,s.id,w),U(!1),me(),alert("Pedido a administracin creado correctamente.")}catch(w){console.error(w),alert("Error al crear pedido")}finally{N(!1)}},ce=async w=>{if(confirm("Confirmas que has recibido todos los productos de este pedido? Esto actualizar tu inventario."))try{N(!0),await ke.confirmSupplyOrderArrival(w),alert("Pedido recibido y stock actualizado correctamente."),me()}catch(P){console.error(P),alert("Error al confirmar recepcin.")}finally{N(!1)}},le=f.filter(w=>w.name.toLowerCase().includes(te.toLowerCase())||w.sku.toLowerCase().includes(te.toLowerCase())).slice(0,5),ye=$.reduce((w,P)=>w+P.product.price*P.quantity,0);return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-slate-950",children:[r.jsx("header",{className:"h-20 flex items-center justify-between px-6 md:px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shrink-0",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary hidden sm:block",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"warehouse"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:"Bodega"}),r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest hidden xs:block",children:"Gestin de Resurtidos"})]})]})}),r.jsxs("div",{className:"px-6 md:px-8 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shrink-0 flex gap-8",children:[r.jsx("button",{onClick:()=>_("branches"),className:`py-4 text-xs font-black uppercase tracking-widest border-b-2 transition-all ${j==="branches"?"border-primary text-primary":"border-transparent text-slate-400"}`,children:"Sucursales"}),r.jsx("button",{onClick:()=>_("sheets"),className:`py-4 text-xs font-black uppercase tracking-widest border-b-2 transition-all ${j==="sheets"?"border-primary text-primary":"border-transparent text-slate-400"}`,children:"Historial de Notas"}),r.jsx("button",{onClick:()=>_("supply"),className:`py-4 text-xs font-black uppercase tracking-widest border-b-2 transition-all ${j==="supply"?"border-primary text-primary":"border-transparent text-slate-400"}`,children:"Pedidos a Admin"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:j==="branches"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(w=>r.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-xl transition-all group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("div",{className:"size-12 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center text-slate-400 group-hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"location_on"})}),r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-[10px] font-black uppercase tracking-wide",children:bs(w.status)})]}),r.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-1",children:w.name}),r.jsx("p",{className:"text-xs text-slate-500 font-bold mb-6 line-clamp-1",children:w.address}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>ne(w),className:"flex-1 py-3 bg-primary text-white text-[10px] font-black uppercase tracking-widest rounded-xl shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all",children:"Resurtir"})})]},w.id))}):j==="sheets"?r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[r.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-end",children:r.jsxs("select",{value:V,onChange:w=>q(w.target.value),className:"px-4 py-2 pr-8 bg-slate-50 dark:bg-slate-800 border-none rounded-xl text-xs font-bold text-slate-600 dark:text-slate-300 focus:ring-2 focus:ring-primary/20 outline-none",children:[r.jsx("option",{value:"ALL",children:"Todas las Sucursales"}),c.map(w=>r.jsx("option",{value:w.id,children:w.name},w.id))]})}),r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b dark:border-slate-800",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-5",children:"Folio"}),r.jsx("th",{className:"px-6 py-5",children:"Sucursal"}),r.jsx("th",{className:"px-6 py-5",children:"Fecha"}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Total"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:n.filter(w=>V==="ALL"||w.branchId===V).map(w=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[r.jsxs("td",{className:"px-8 py-5 font-black text-primary",children:["#",w.folio]}),r.jsxs("td",{className:"px-6 py-5",children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:w.branchName}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:w.branchId})]}),r.jsx("td",{className:"px-6 py-5 text-xs font-bold text-slate-500",children:new Date(w.createdAt).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-5 text-right font-black text-slate-900 dark:text-white",children:["$",w.totalAmount.toLocaleString()]}),r.jsx("td",{className:"px-8 py-5 text-right",children:r.jsx(Js,{to:`/shipping-note/${w.id}`,className:"p-2 text-slate-400 hover:text-primary transition-colors inline-block",children:r.jsx("span",{className:"material-symbols-outlined",children:"print"})})})]},w.id))})]})}),n.length===0&&r.jsx("div",{className:"p-20 text-center text-slate-400 font-bold",children:"No hay notas de resurtido registradas."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>{Y([]),U(!0)},className:"bg-primary text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-lg shadow-primary/20 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Nuevo Pedido a Admin"]})}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b dark:border-slate-800",children:r.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("th",{className:"px-8 py-5",children:"Folio"}),r.jsx("th",{className:"px-6 py-5",children:"Estado"}),r.jsx("th",{className:"px-6 py-5",children:"Atiende"}),r.jsx("th",{className:"px-6 py-5",children:"Arribo Est."}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Total"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:m.map(w=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[r.jsxs("td",{className:"px-8 py-5 font-black text-blue-600",children:["S-",w.folio]}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${w.status==="pending"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:bs(w.status)})}),r.jsx("td",{className:"px-6 py-5",children:w.assignedAdminName?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"size-6 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-[10px] font-black",children:w.assignedAdminName[0]}),r.jsx("span",{className:"text-xs font-bold text-slate-600",children:w.assignedAdminName})]}):r.jsx("span",{className:"text-xs text-slate-400 italic",children:"No asignado"})}),r.jsx("td",{className:"px-6 py-5 text-xs font-bold text-slate-500",children:w.estimatedArrival&&!isNaN(new Date(w.estimatedArrival).getTime())?new Date(w.estimatedArrival).toLocaleDateString():"Pendiente"}),r.jsxs("td",{className:"px-6 py-5 text-right font-black text-slate-900 dark:text-white",children:["$",w.totalAmount.toLocaleString()]}),r.jsx("td",{className:"px-8 py-5 text-right",children:w.status==="shipped"?r.jsx("button",{onClick:()=>ce(w.id),className:"px-4 py-2 bg-green-500 text-white text-[10px] font-black uppercase tracking-widest rounded-xl shadow-lg shadow-green-500/20 hover:bg-green-600 transition-all animate-pulse",children:"Confirmar Recepcin"}):r.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:w.createdAt&&!isNaN(new Date(w.createdAt).getTime())?new Date(w.createdAt).toLocaleDateString():"Fecha no disp."})})]},w.id))})]})}),m.length===0&&r.jsx("div",{className:"p-20 text-center text-slate-400 font-bold",children:"No hay pedidos a administracin registrados."})]})]})})]}),S&&R&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl rounded-[2.5rem] shadow-2xl flex flex-col md:flex-row overflow-hidden max-h-[90vh]",children:[r.jsxs("div",{className:"flex-1 p-8 border-r border-slate-100 dark:border-slate-800 overflow-y-auto custom-scrollbar",children:[r.jsx("h3",{className:"text-2xl font-black mb-1",children:"Resurtir Tienda"}),r.jsx("p",{className:"text-primary font-black uppercase text-[10px] tracking-widest mb-8",children:R.name}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),r.jsx("input",{autoFocus:!0,className:"w-full pl-12 pr-4 py-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border-none font-bold text-sm focus:ring-2 focus:ring-primary/20",placeholder:"Buscar por nombre o SKU...",value:te,onChange:w=>T(w.target.value)})]}),r.jsxs("div",{className:"space-y-3",children:[te&&le.map(w=>r.jsxs("button",{onClick:()=>Re(w),className:"w-full p-4 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-2xl flex items-center gap-4 hover:border-primary transition-all text-left shadow-sm hover:shadow-md",children:[r.jsx("div",{className:"size-10 bg-slate-100 dark:bg-slate-900 rounded-lg p-1 shrink-0",children:r.jsx("img",{src:w.image,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-sm text-slate-900 dark:text-white truncate",children:w.name}),r.jsxs("p",{className:"text-[10px] font-mono text-slate-400",children:[w.sku,"  ",r.jsxs("span",{className:"text-primary font-bold",children:["$",w.price]})]})]}),r.jsx("span",{className:"material-symbols-outlined text-slate-300",children:"add_circle"})]},w.id)),!te&&r.jsxs("div",{className:"text-center py-20 text-slate-300",children:[r.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"search_check"}),r.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Busca productos para agregar"})]})]})]}),r.jsxs("div",{className:"w-full md:w-[350px] bg-slate-50 dark:bg-[#0f172a] p-8 flex flex-col shrink-0",children:[r.jsx("h4",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-6",children:"Lista de Material"}),r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:[$.map(w=>r.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-right-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white truncate",children:w.product.name}),r.jsxs("p",{className:"text-[9px] font-black text-primary",children:["$",(w.product.price*w.quantity).toLocaleString()]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-2 py-1 rounded-lg border dark:border-slate-700",children:[r.jsx("button",{onClick:()=>Q(w.product.id,w.quantity-1),className:"text-slate-400 hover:text-red-500 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"remove"})}),r.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-xs font-black bg-transparent border-b border-slate-200 dark:border-slate-700 outline-none p-0 focus:border-primary",value:w.quantity,onChange:P=>{const ae=parseInt(P.target.value)||0;Q(w.product.id,Math.max(0,ae))}}),r.jsx("button",{onClick:()=>Q(w.product.id,w.quantity+1),className:"text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]})]},w.product.id)),$.length===0&&r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 opacity-50 pt-20",children:[r.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"production_quantity_limits"}),r.jsx("p",{className:"text-[10px] font-black uppercase",children:"Vaco"})]})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-800 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"}),r.jsxs("span",{className:"text-2xl font-black text-slate-900 dark:text-white",children:["$",ye.toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-4 text-xs font-black uppercase text-slate-400",children:"Cancelar"}),r.jsx("button",{onClick:Ee,disabled:$.length===0||b,className:"flex-[2] py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black rounded-2xl shadow-xl hover:scale-[1.02] active:scale-95 transition-all text-xs uppercase disabled:opacity-50",children:"Finalizar Nota"})]})]})]})]})}),C&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl rounded-[2.5rem] shadow-2xl flex flex-col md:flex-row overflow-hidden max-h-[90vh]",children:[r.jsxs("div",{className:"flex-1 p-8 border-r border-slate-100 dark:border-slate-800 overflow-y-auto custom-scrollbar",children:[r.jsx("h3",{className:"text-2xl font-black mb-1",children:"Nuevo Pedido a Admin"}),r.jsx("p",{className:"text-blue-600 font-black uppercase text-[10px] tracking-widest mb-8",children:"Solicitud de Suministros para Bodega"}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),r.jsx("input",{autoFocus:!0,className:"w-full pl-12 pr-4 py-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border-none font-bold text-sm focus:ring-2 focus:ring-primary/20",placeholder:"Buscar por nombre o SKU...",value:te,onChange:w=>T(w.target.value)})]}),r.jsxs("div",{className:"space-y-3",children:[te&&le.map(w=>r.jsxs("button",{onClick:()=>Re(w),className:"w-full p-4 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-2xl flex items-center gap-4 hover:border-blue-600 transition-all text-left shadow-sm hover:shadow-md",children:[r.jsx("div",{className:"size-10 bg-slate-100 dark:bg-slate-900 rounded-lg p-1 shrink-0",children:r.jsx("img",{src:w.image,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-sm text-slate-900 dark:text-white truncate",children:w.name}),r.jsxs("p",{className:"text-[10px] font-mono text-slate-400",children:[w.sku,"  ",r.jsxs("span",{className:"text-primary font-bold",children:["$",w.price]})]})]}),r.jsx("span",{className:"material-symbols-outlined text-slate-300",children:"add_circle"})]},w.id)),!te&&r.jsxs("div",{className:"text-center py-20 text-slate-300",children:[r.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"shopping_bag"}),r.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Busca productos para agregar al pedido"})]})]})]}),r.jsxs("div",{className:"w-full md:w-[350px] bg-slate-50 dark:bg-[#0f172a] p-8 flex flex-col shrink-0",children:[r.jsx("h4",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-6",children:"Resumen del Pedido"}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:$.map(w=>r.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-right-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white truncate",children:w.product.name}),r.jsxs("p",{className:"text-[9px] font-black text-blue-600",children:["Qty: ",w.quantity]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-2 py-1 rounded-lg border dark:border-slate-700",children:[r.jsx("button",{onClick:()=>Q(w.product.id,w.quantity-1),className:"text-slate-400 hover:text-red-500 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"remove"})}),r.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-xs font-black bg-transparent border-b border-slate-200 dark:border-slate-700 outline-none p-0 focus:border-primary",value:w.quantity,onChange:P=>{const ae=parseInt(P.target.value)||0;Q(w.product.id,Math.max(0,ae))}}),r.jsx("button",{onClick:()=>Q(w.product.id,w.quantity+1),className:"text-slate-400 hover:text-blue-600 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]})]},w.product.id))}),r.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-800 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Estimado"}),r.jsxs("span",{className:"text-2xl font-black text-slate-900 dark:text-white",children:["$",ye.toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-4 text-xs font-black uppercase text-slate-400",children:"Cancelar"}),r.jsx("button",{onClick:W,disabled:$.length===0||b,className:"flex-[2] py-4 bg-blue-600 text-white font-black rounded-2xl shadow-xl hover:scale-[1.02] active:scale-95 transition-all text-xs uppercase disabled:opacity-50",children:"Enviar Pedido"})]})]})]})]})})]})},Bp={cubeta:1,galon:2,litro:3,medio:4,cuarto:5,aerosol:6,complemento:7},uN=()=>{var m;const{id:s}=Yp(),a=ml(),[n,i]=v.useState(null),[c,d]=v.useState(!0);v.useEffect(()=>{s&&f()},[s]);const f=async()=>{try{d(!0);const p=await ke.getRestockSheetDetail(s);p.items&&p.items.sort((b,N)=>{var S,E;const j=Bp[((S=b.product)==null?void 0:S.packageType)||""]||99,_=Bp[((E=N.product)==null?void 0:E.packageType)||""]||99;return j-_}),i(p)}catch(p){console.error("Error loading shipping note:",p)}finally{d(!1)}};if(c)return r.jsx("div",{className:"p-20 text-center font-bold",children:"Cargando formato..."});if(!n)return r.jsx("div",{className:"p-20 text-center font-bold text-red-500",children:"Error: No se encontr la nota de resurtido."});const x=new Date(n.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 md:p-10 print:p-0 print:bg-white flex flex-col items-center",children:[r.jsxs("div",{className:"w-full max-w-[210mm] mb-6 flex justify-between items-center print:hidden",children:[r.jsxs("button",{onClick:()=>a(-1),className:"flex items-center gap-2 text-slate-500 font-bold hover:text-slate-800 transition-colors",children:[r.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Regresar"]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-primary text-white px-6 py-2.5 rounded-xl font-black shadow-lg shadow-primary/20 hover:scale-105 transition-all",children:[r.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Imprimir Nota"]})]}),r.jsx("div",{className:"w-full overflow-x-auto print:overflow-visible flex justify-center",children:r.jsxs("div",{className:"w-[210mm] min-h-[297mm] bg-white shadow-2xl print:shadow-none p-[15mm] md:p-[20mm] font-sans flex flex-col border border-slate-200 print:border-none shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 border-b-2 border-slate-900 pb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-slate-900 p-4 rounded-2xl flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"inventory"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Nota de Resurtido"}),r.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Pintamax S.A. de C.V.  Control de Bodega"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Folio Sucursal"}),r.jsxs("div",{className:"text-2xl font-black text-primary tracking-tighter",children:["#",n.folio]}),r.jsx("div",{className:"text-[9px] font-bold text-slate-500 mt-1 uppercase",children:x})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[r.jsx("h3",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Origen (Bodega)"}),r.jsx("p",{className:"text-sm font-black text-slate-900",children:"Bodega Principal (Hub)"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"ID: BR-MAIN"})]}),r.jsxs("div",{className:"p-4 bg-primary/5 rounded-xl border border-primary/10",children:[r.jsx("h3",{className:"text-[9px] font-black text-primary/60 uppercase tracking-widest mb-2",children:"Destino (Sucursal)"}),r.jsx("p",{className:"text-sm font-black text-slate-900",children:n.branchName}),r.jsxs("p",{className:"text-[10px] text-primary font-bold",children:["ID: ",n.branch_id]})]})]}),r.jsx("div",{className:"flex-1 mb-8 overflow-hidden",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-900 text-white text-[9px] font-black uppercase tracking-widest",children:[r.jsx("th",{className:"p-3 text-left rounded-tl-lg",children:"SKU / Producto"}),r.jsx("th",{className:"p-3 text-center",children:"Tipo"}),r.jsx("th",{className:"p-3 text-right",children:"Unitario"}),r.jsx("th",{className:"p-3 text-center",children:"Cant."}),r.jsx("th",{className:"p-3 text-right rounded-tr-lg",children:"Subtotal"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100 border-x border-b border-slate-100",children:[n.items.map(p=>{var b,N,j,_,S;return r.jsxs("tr",{className:"text-[11px]",children:[r.jsxs("td",{className:"p-3",children:[r.jsx("p",{className:"font-bold text-slate-900",children:(b=p.product)==null?void 0:b.name}),r.jsx("p",{className:"text-[8px] font-mono text-slate-400",children:(N=p.product)==null?void 0:N.sku})]}),r.jsx("td",{className:"p-3 text-center capitalize text-slate-500",children:((j=p.product)==null?void 0:j.packageType)||"---"}),r.jsxs("td",{className:"p-3 text-right font-medium",children:["$",((_=p.unit_price)==null?void 0:_.toLocaleString())||"0"]}),r.jsx("td",{className:"p-3 text-center font-black text-sm",children:p.quantity}),r.jsxs("td",{className:"p-3 text-right font-black",children:["$",((S=p.total_price)==null?void 0:S.toLocaleString())||"0"]})]},p.id)}),n.items.length<15&&Array.from({length:15-n.items.length}).map((p,b)=>r.jsx("tr",{className:"border-none",children:r.jsx("td",{colSpan:5,className:"p-3",children:""})},`empty-${b}`))]}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"bg-slate-50",children:[r.jsx("td",{colSpan:4,className:"p-4 text-right font-black text-slate-500 uppercase text-[10px] tracking-widest",children:"Total Material Resurtido:"}),r.jsxs("td",{className:"p-4 text-right font-black text-lg text-slate-900",children:["$",((m=n.total_amount)==null?void 0:m.toLocaleString())||"0"]})]})})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-6 border-t border-slate-200",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-16 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-1",children:"Salida de Almacn"}),r.jsx("p",{className:"text-[9px] font-bold text-slate-700",children:"Firma Autorizada"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-16 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-1",children:"Chofer / Repartidor"}),r.jsx("p",{className:"text-[9px] font-bold text-slate-700",children:"Nombre y Firma"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-16 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-1",children:"Recibido en Sucursal"}),r.jsx("p",{className:"text-[9px] font-bold text-slate-700",children:"Nombre y Firma"})]})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100 flex justify-between items-center text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:[r.jsx("p",{children:"Surtido por: ____________________________"}),r.jsxs("p",{children:["Pintamax Logistics System  ",new Date().getFullYear()]})]})]})})]})},dN=({user:s,onLogout:a})=>{const n="BR-MAIN",[i,c]=v.useState([]),[d,f]=v.useState([]),[x,m]=v.useState([]),[p,b]=v.useState([]),[N,j]=v.useState(""),[_,S]=v.useState("Todos"),[E,C]=v.useState(null),[U,R]=v.useState(""),[A,$]=v.useState("contado"),[Y,te]=v.useState(!1),[T,V]=v.useState(!1),[q,re]=v.useState(!1),[me,ne]=v.useState(!1),[Re,Q]=v.useState(0),[Ee,W]=v.useState(),[ce,le]=v.useState(null),[ye,w]=v.useState(!1),[P,ae]=v.useState(0);v.useEffect(()=>{ie()},[]);const ie=async()=>{try{V(!0);const[F,_e,bt]=await Promise.all([ke.getProductsByBranch(n),Vr.getClients(),Qs.getAdmins()]);c(F),f(_e),m(bt);const Ht=(await ke.getBranches()).find(ys=>ys.id===n);Ht&&W(Ht.config)}catch(F){console.error(F)}finally{V(!1)}},se=F=>{b(_e=>_e.find(Le=>Le.id===F.id)?_e.map(Le=>Le.id===F.id?{...Le,quantity:Le.quantity+1}:Le):[..._e,{...F,quantity:1}])},ve=(F,_e)=>{b(bt=>bt.map(Le=>Le.id===F?{...Le,quantity:Math.max(0,Le.quantity+_e)}:Le).filter(Le=>Le.quantity>0))},ge=i.filter(F=>{const _e=F.name.toLowerCase().includes(N.toLowerCase())||F.sku.toLowerCase().includes(N.toLowerCase()),bt=_==="Todos"||F.category===_;return _e&&bt}),X=p.reduce((F,_e)=>F+(_e.wholesalePrice||_e.price)*_e.quantity,0),J=X*(P/100),pe=X-J,be=pe*.16,at=pe+be,Z=async()=>{if(!(!E||p.length===0)){w(!0);try{const F=await Xs.getDynamicPricingSuggestion(E,p);le(F)}catch(F){console.error(F),alert("No se pudo conectar con la IA")}finally{w(!1)}}},fe=()=>{ce&&(ae(ce.discount),le(null))},gt=async()=>{if(!E||!U){alert("Seleccione cliente y administrador de salida");return}try{V(!0);const F=p.map(_e=>({productId:_e.id,productName:_e.name,quantity:_e.quantity,price:_e.wholesalePrice||_e.price,total:(_e.wholesalePrice||_e.price)*_e.quantity}));await Qs.processSale(n,F,at,"cash",E.id,{isWholesale:!0,paymentType:A,departureAdminId:U,departureAdminId:U,subtotal:pe,discountAmount:J,iva:be,creditDays:Re}),re(!0),setTimeout(()=>{re(!1),te(!1),b([]),C(null),R("")},2e3)}catch(F){console.error(F),alert("Error al procesar venta mayorista")}finally{V(!1)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col min-w-0 h-full relative",children:[r.jsxs("header",{className:"h-16 flex items-center justify-between px-6 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 flex-shrink-0 shadow-sm z-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[r.jsx("span",{className:"material-symbols-outlined font-black",children:"groups"}),r.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"Ventas Mayoreo"})]})]}),r.jsxs("button",{onClick:()=>ne(!0),className:"lg:hidden p-2 bg-slate-100 rounded-xl relative",children:[r.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"}),p.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-primary text-white text-[10px] size-5 rounded-full flex items-center justify-center font-black",children:p.length})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden bg-slate-50 dark:bg-slate-900 relative",children:[r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${me?"lg:mr-[400px]":""}`,children:[r.jsxs("div",{className:"p-6 pb-2 space-y-4",children:[r.jsxs("div",{className:"flex bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 h-14 shadow-sm overflow-hidden focus-within:ring-2 focus-within:ring-primary",children:[r.jsx("div",{className:"flex items-center justify-center px-4 text-slate-400",children:r.jsx("span",{className:"material-symbols-outlined",children:"search"})}),r.jsx("input",{className:"flex-1 bg-transparent border-none focus:ring-0 text-sm font-bold",placeholder:"Buscar producto por SKU o nombre...",value:N,onChange:F=>j(F.target.value)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["Todos","Interiores","Exteriores","Esmaltes","Accesorios"].map(F=>r.jsx("button",{onClick:()=>S(F),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase transition-all ${_===F?"bg-primary text-white":"bg-white dark:bg-slate-800 border dark:border-slate-700 text-slate-400"}`,children:F},F))}),r.jsxs("button",{onClick:()=>ne(!me),className:`hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${me?"bg-slate-200 text-slate-600":"bg-primary text-white shadow-lg shadow-primary/20"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-base",children:me?"last_page":"shopping_cart"}),me?"Ocultar Carrito":"Ver Carrito"]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 custom-scrollbar",children:r.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 ${me?"xl:grid-cols-3":"xl:grid-cols-4 2xl:grid-cols-5"} gap-4 transition-all`,children:ge.map(F=>r.jsxs("div",{className:"group bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-primary transition-all cursor-pointer overflow-hidden shadow-sm hover:shadow-md",onClick:()=>se(F),children:[r.jsxs("div",{className:"aspect-square bg-slate-50 dark:bg-slate-900/50 p-4 relative",children:[r.jsx("img",{src:F.image,className:"w-full h-full object-contain group-hover:scale-110 transition-transform"}),r.jsx("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-white/80 dark:bg-slate-800/80 backdrop-blur rounded text-[9px] font-black text-slate-500 uppercase",children:F.brand})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest truncate",children:F.sku}),r.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white truncate mb-2",children:F.name}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("p",{className:"text-lg font-black text-primary",children:["$",(F.wholesalePrice||F.price).toLocaleString()]}),r.jsx("span",{className:"text-[9px] font-black text-green-600 bg-green-50 px-1.5 py-0.5 rounded uppercase",children:"Mayoreo"})]})]})]},F.id))})})]}),r.jsxs("div",{className:`fixed inset-y-0 right-0 w-full sm:w-[400px] bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 flex flex-col z-50 transition-transform duration-300 shadow-2xl lg:shadow-none ${me?"translate-x-0":"translate-x-full"}`,children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"font-black text-xs uppercase tracking-widest text-slate-400",children:"Carrito de Venta"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>b([]),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),r.jsx("button",{onClick:()=>ne(!1),className:"p-2 text-slate-400 hover:text-slate-600",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",children:[p.map(F=>r.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-right-2",children:[r.jsx("div",{className:"size-12 rounded-xl bg-slate-100 p-2 shrink-0",children:r.jsx("img",{src:F.image,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-tighter",children:F.sku}),r.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white truncate",children:F.name}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-900 p-1 rounded-lg border dark:border-slate-700",children:[r.jsx("button",{onClick:()=>ve(F.id,-1),className:"size-6 flex items-center justify-center text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"remove"})}),r.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-xs font-black bg-transparent border-b border-slate-200 dark:border-slate-700 outline-none p-0 focus:border-primary",value:F.quantity,onChange:_e=>{const bt=parseInt(_e.target.value)||0;b(Le=>Le.map(Ht=>Ht.id===F.id?{...Ht,quantity:Math.max(0,bt)}:Ht))}}),r.jsx("button",{onClick:()=>ve(F.id,1),className:"size-6 flex items-center justify-center text-slate-400 hover:text-primary transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),r.jsxs("p",{className:"text-xs font-black text-primary",children:["$",((F.wholesalePrice||F.price)*F.quantity).toLocaleString()]})]})]})]},F.id)),p.length===0&&r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 opacity-50 pt-20",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl mb-4",children:"shopping_cart"}),r.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-center",children:["Seleccione productos para",r.jsx("br",{}),"comenzar la venta"]})]})]}),r.jsx("div",{className:"p-8 border-t dark:border-slate-700 bg-slate-50 dark:bg-slate-950/50 space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Cliente"}),r.jsxs("select",{className:"w-full p-3 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl text-xs font-bold",value:(E==null?void 0:E.id)||"",onChange:F=>{const _e=d.find(bt=>bt.id===F.target.value)||null;C(_e),_e&&Q(_e.creditDays||0)},children:[r.jsx("option",{value:"",children:"Seleccionar Cliente..."}),d.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Salida Autorizada por"}),r.jsxs("select",{className:"w-full p-3 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl text-xs font-bold",value:U,onChange:F=>R(F.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar Admin..."}),x.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Tipo de Pago"}),r.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:[r.jsx("button",{onClick:()=>$("contado"),className:`flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${A==="contado"?"bg-white dark:bg-slate-800 text-primary shadow-sm":"text-slate-400"}`,children:"Contado"}),r.jsx("button",{onClick:()=>$("credito"),className:`flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${A==="credito"?"bg-white dark:bg-slate-800 text-primary shadow-sm":"text-slate-400"}`,children:"Crdito"})]})]}),A==="credito"&&r.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Plazo de Crdito (Das)"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl text-xs font-black",value:Re,onChange:F=>Q(parseInt(F.target.value)||0),placeholder:"Das"})]})]})}),r.jsxs("div",{className:"py-2 border-t dark:border-slate-800 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Descuento Extra (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",className:"w-16 text-right text-xs font-bold bg-transparent border-b border-slate-200 focus:border-primary outline-none",value:P,onChange:F=>ae(parseFloat(F.target.value)||0)})]}),(Ee==null?void 0:Ee.enable_ai_dynamic_pricing)&&p.length>0&&E&&r.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:ce?r.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-xl border border-indigo-100 dark:border-indigo-800 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-black text-indigo-700 dark:text-indigo-300",children:["Sugerencia: ",ce.discount,"%"]}),r.jsx("p",{className:"text-[10px] text-indigo-600/80 leading-tight mt-1",children:ce.reasoning})]}),r.jsx("button",{onClick:()=>le(null),className:"text-indigo-400 hover:text-indigo-600",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),r.jsx("button",{onClick:fe,className:"w-full py-1.5 bg-indigo-600 text-white text-[10px] font-bold rounded-lg hover:bg-indigo-700",children:"Aplicar Descuento"})]}):r.jsxs("button",{onClick:Z,disabled:ye,className:"w-full py-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 text-[10px] font-black uppercase tracking-wider rounded-lg border border-indigo-100 dark:border-indigo-800 hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2",children:[ye?r.jsx("span",{className:"animate-spin material-symbols-outlined text-sm",children:"sync"}):r.jsx("span",{className:"material-symbols-outlined text-sm",children:"smart_toy"}),ye?"Analizando...":"Consultar descuento IA"]})})]}),r.jsxs("div",{className:"pt-2 border-t dark:border-slate-800 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",pe.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[r.jsx("span",{children:"IVA (16%)"}),r.jsxs("span",{children:["$",be.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between items-end pt-2",children:[r.jsx("span",{className:"text-xs font-black uppercase text-slate-400",children:"Total"}),r.jsxs("span",{className:"text-3xl font-black text-primary",children:["$",at.toLocaleString()]})]})]}),r.jsx("button",{disabled:p.length===0||!E||!U||T,onClick:gt,className:"w-full py-5 bg-primary text-white font-black rounded-2xl shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all text-xs uppercase tracking-widest disabled:opacity-50",children:T?"Procesando...":"Finalizar Venta"})]})]}),q&&r.jsxs("div",{className:"fixed inset-0 z-[100] bg-white dark:bg-slate-950 flex flex-col items-center justify-center p-8 text-center animate-in zoom-in-95",children:[r.jsx("div",{className:"size-24 rounded-full bg-green-500 text-white flex items-center justify-center mb-6 shadow-2xl shadow-green-500/20",children:r.jsx("span",{className:"material-symbols-outlined text-6xl",children:"check_circle"})}),r.jsx("h3",{className:"text-4xl font-black mb-2",children:"Venta Registrada!"}),r.jsx("p",{className:"text-slate-500 font-bold",children:"La nota de venta mayorista ha sido procesada correctamente."})]})]})]})},hN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(!1),[f,x]=v.useState([]),[m,p]=v.useState("ALL");v.useEffect(()=>{b(),N()},[m]);const b=async()=>{try{const j=await ke.getBranches();x(j)}catch(j){console.error(j)}},N=async()=>{d(!0);try{const j=new Date,_=new Date;_.setDate(_.getDate()-30);const S=await Qs.getSalesWithFilters(_.toISOString(),j.toISOString(),m);i(S.filter(E=>E.isWholesale))}catch(j){console.error(j)}finally{d(!1)}};return r.jsxs("div",{className:"h-screen flex overflow-hidden",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-slate-950",children:[r.jsx("header",{className:"h-20 flex items-center justify-between px-6 md:px-8 bg-white dark:bg-slate-900 border-b dark:border-slate-800 shrink-0",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 lg:hidden"}),r.jsx("span",{className:"material-symbols-outlined text-primary font-black",children:"history_edu"}),r.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white tracking-tight uppercase",children:"Historial Mayoreo"})]})}),r.jsxs("div",{className:"p-4 md:p-8 overflow-y-auto custom-scrollbar space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-900 p-4 rounded-2xl border dark:border-slate-800 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Filtrar por Sucursal"}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-xs font-bold px-3 py-2",value:m,onChange:j=>p(j.target.value),children:[r.jsx("option",{value:"ALL",children:"Todas"}),f.map(j=>r.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Total Periodo"}),r.jsxs("p",{className:"text-xl font-black text-primary",children:["$",n.reduce((j,_)=>j+_.total,0).toLocaleString()]})]})})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border dark:border-slate-800 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-950/50 border-b dark:border-slate-800",children:r.jsxs("tr",{className:"text-[10px] uppercase font-black text-slate-400 tracking-widest",children:[r.jsx("th",{className:"px-6 py-5",children:"Folio / Fecha"}),r.jsx("th",{className:"px-6 py-5",children:"Cliente / Pago"}),r.jsx("th",{className:"px-6 py-5",children:"Atiende / Despacha"}),r.jsx("th",{className:"px-6 py-5 text-right",children:"Total"}),r.jsx("th",{className:"px-8 py-5 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:c?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-20 text-center text-slate-400 font-bold",children:"Cargando historial..."})}):n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400 italic",children:"No hay registros de ventas al mayoreo"})}):n.map(j=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"text-xs font-black text-primary font-mono tracking-tighter",children:["#",j.id.slice(0,8).toUpperCase()]}),r.jsx("span",{className:"text-[10px] text-slate-400 font-bold mt-1",children:new Date(j.createdAt).toLocaleDateString()})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-tight",children:j.clientName||"Cliente General"}),r.jsx("span",{className:`w-fit mt-1 px-2 py-0.5 rounded text-[9px] font-black uppercase ${j.paymentType==="credito"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:bs(j.paymentType||"contado")})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[r.jsx("span",{className:"material-symbols-outlined text-xs",children:"person"}),"Despacha: ",r.jsx("span",{className:"text-slate-900 dark:text-slate-200",children:j.departureAdminName||"No reg."})]}),j.branchName&&r.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:j.branchName})]})}),r.jsxs("td",{className:"px-6 py-5 text-right font-black text-lg text-slate-900 dark:text-white",children:["$",j.total.toLocaleString()]}),r.jsx("td",{className:"px-8 py-5 text-right",children:r.jsx(Js,{to:`/wholesale-note/${j.id}`,className:"size-10 bg-slate-100 dark:bg-slate-800 rounded-xl flex items-center justify-center text-slate-400 hover:text-primary hover:bg-primary/10 transition-all inline-flex",children:r.jsx("span",{className:"material-symbols-outlined",children:"print"})})})]},j.id))})]})})})]})]})]})},fN=()=>{var m,p;const{id:s}=Yp(),a=ml(),[n,i]=v.useState(null),[c,d]=v.useState(!0);v.useEffect(()=>{s&&f()},[s]);const f=async()=>{try{d(!0);const b=await Qs.getSaleDetail(s);i(b)}catch(b){console.error("Error loading wholesale note:",b)}finally{d(!1)}};if(c)return r.jsx("div",{className:"p-20 text-center font-bold",children:"Cargando nota de venta..."});if(!n)return r.jsx("div",{className:"p-20 text-center font-bold text-red-500",children:"Error: No se encontr la venta."});const x=new Date(n.createdAt).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 md:p-10 print:p-0 print:bg-white flex flex-col items-center",children:[r.jsxs("div",{className:"w-full max-w-[210mm] mb-6 flex justify-between items-center print:hidden",children:[r.jsxs("button",{onClick:()=>a(-1),className:"flex items-center gap-2 text-slate-500 font-bold hover:text-slate-800 transition-colors",children:[r.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Regresar"]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-primary text-white px-6 py-2.5 rounded-xl font-black shadow-lg shadow-primary/20",children:[r.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Imprimir Ticket"]})]}),r.jsx("div",{className:"w-full overflow-x-auto print:overflow-visible flex justify-center",children:r.jsxs("div",{className:"w-[210mm] min-h-[297mm] bg-white shadow-2xl print:shadow-none p-[15mm] md:p-[20mm] font-sans flex flex-col border border-slate-200 print:border-none shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 border-b-2 border-slate-900 pb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-primary p-4 rounded-2xl",children:r.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"groups"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Nota de Venta Mayoreo"}),r.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Pintamax S.A. de C.V.  Distribucin Mayorista"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Folio"}),r.jsxs("div",{className:"text-2xl font-black text-primary tracking-tighter",children:["#",n.id.slice(0,8).toUpperCase()]}),r.jsx("div",{className:"text-[9px] font-bold text-slate-500 mt-1 uppercase",children:x})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[r.jsx("h3",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Cliente"}),r.jsx("p",{className:"text-sm font-black text-slate-900 uppercase",children:n.clientName||"Cliente General"}),r.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Estatus: ",r.jsx("span",{className:"text-primary font-bold",children:n.paymentType==="credito"?"CRDITO":"LIQUIDADO"})]})]}),r.jsxs("div",{className:"p-4 bg-primary/5 rounded-xl border border-primary/10",children:[r.jsx("h3",{className:"text-[9px] font-black text-primary/60 uppercase tracking-widest mb-2",children:"Detalles de Salida"}),r.jsxs("p",{className:"text-sm font-black text-slate-900",children:["Despachado por: ",n.departureAdminName||"---"]}),r.jsxs("p",{className:"text-[10px] text-primary font-bold mt-1 uppercase",children:["Sucursal: ",n.branchId]})]})]}),r.jsx("div",{className:"flex-1 mb-8",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-900 text-white text-[9px] font-black uppercase tracking-widest",children:[r.jsx("th",{className:"p-3 text-left rounded-tl-lg",children:"Producto / Descripcin"}),r.jsx("th",{className:"p-3 text-right",children:"Precio Unit."}),r.jsx("th",{className:"p-3 text-center",children:"Cant."}),r.jsx("th",{className:"p-3 text-right rounded-tr-lg",children:"Importe"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100 border-x border-b border-slate-100",children:[n.items.map((b,N)=>r.jsxs("tr",{className:"text-[11px]",children:[r.jsxs("td",{className:"p-3",children:[r.jsx("p",{className:"font-bold text-slate-900",children:b.productName}),r.jsx("p",{className:"text-[8px] font-mono text-slate-400",children:"MAYOREO PROTECTED"})]}),r.jsxs("td",{className:"p-3 text-right font-medium",children:["$",b.price.toLocaleString()]}),r.jsx("td",{className:"p-3 text-center font-black text-sm",children:b.quantity}),r.jsxs("td",{className:"p-3 text-right font-black",children:["$",b.total.toLocaleString()]})]},N)),n.items.length<10&&Array.from({length:10-n.items.length}).map((b,N)=>r.jsx("tr",{className:"border-none",children:r.jsx("td",{colSpan:4,className:"p-3",children:""})},`empty-${N}`))]}),r.jsxs("tfoot",{children:[r.jsxs("tr",{className:"bg-slate-50",children:[r.jsx("td",{colSpan:3,className:"p-4 text-right font-black text-slate-500 uppercase text-[10px] tracking-widest",children:"Subtotal:"}),r.jsxs("td",{className:"p-4 text-right font-black text-slate-900",children:["$",(m=n.subtotal)==null?void 0:m.toLocaleString()]})]}),r.jsxs("tr",{className:"bg-slate-50",children:[r.jsx("td",{colSpan:3,className:"p-2 text-right font-black text-slate-500 uppercase text-[10px] tracking-widest",children:"IVA (16%):"}),r.jsxs("td",{className:"p-2 text-right font-black text-slate-900",children:["$",(p=n.iva)==null?void 0:p.toLocaleString()]})]}),r.jsxs("tr",{className:"bg-slate-900 text-white",children:[r.jsx("td",{colSpan:3,className:"p-4 text-right font-black uppercase text-[12px] tracking-widest",children:"Total a Pagar:"}),r.jsxs("td",{className:"p-4 text-right font-black text-xl italic",children:["$",n.total.toLocaleString()]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-12 pt-10 border-t border-slate-200",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-20 border-b border-slate-300 mb-2 relative",children:n.departureAdminName&&r.jsx("span",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-[10px] font-black text-slate-300 opacity-50 uppercase tracking-widest",children:"Sello Digital Pintamax"})}),r.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-1",children:"Autorizado por (Admin)"}),r.jsx("p",{className:"text-xs font-black text-slate-900 uppercase",children:n.departureAdminName||"Firma Requerida"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-20 border-b border-slate-300 mb-2"}),r.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-1",children:"Recibido en Sucursal / Cliente"}),r.jsx("p",{className:"text-xs font-black text-slate-900 uppercase",children:n.clientName||"Firma de Conformidad"})]})]}),r.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-center text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:[r.jsxs("p",{children:["Condicin de Pago: ",r.jsx("span",{className:"text-slate-900",children:n.paymentType==="credito"?"CRDITO 15 DAS":"CONTADO / EFECTIVO"})]}),r.jsxs("p",{children:["Pintamax Wholesale System  ",new Date().getFullYear()]})]})]})}),r.jsx("style",{children:`
                    @media print {
                        @page { margin: 0; }
                        body { margin: 1.6cm; }
                        .print\\:hidden { display: none !important; }
                    }
                `})]})},mN=({user:s,onLogout:a})=>{const[n,i]=v.useState({accountsPayable:0,monthlyExpenses:0,monthlySales:0,netIncome:0}),[c,d]=v.useState(!1);v.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0);const m=await da.getFinanceMetrics();i(m)}catch(m){console.error(m)}finally{d(!1)}},x=[{label:"Cuentas por Pagar",value:n.accountsPayable,icon:"money_off",color:"text-red-500",bg:"bg-red-50 dark:bg-red-900/20"},{label:"Gastos Mes Actual",value:n.monthlyExpenses,icon:"trending_down",color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-900/20"},{label:"Ventas Mensuales",value:n.monthlySales,icon:"payments",color:"text-green-500",bg:"bg-green-50 dark:bg-green-900/20"},{label:"Utilidad Estimada",value:n.netIncome,icon:"account_balance_wallet",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"}];return r.jsxs("div",{className:"h-screen flex overflow-hidden bg-slate-50 dark:bg-slate-900",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsx("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-6 flex justify-between items-center sticky top-0 z-10",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"account_balance"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Finanzas"}),r.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Tablero Financiero General"})]})]})}),r.jsx("div",{className:"p-6",children:c?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:x.map((m,p)=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-1",children:m.label}),r.jsxs("p",{className:`text-2xl font-black ${m.color}`,children:["$",m.value.toLocaleString()]})]}),r.jsx("div",{className:`p-3 rounded-2xl ${m.bg}`,children:r.jsx("span",{className:`material-symbols-outlined text-xl ${m.color}`,children:m.icon})})]},p))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm min-h-[300px] flex flex-col items-center justify-center text-slate-400",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"bar_chart"}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Grfica de Gastos vs Ingresos (Prximamente)"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm min-h-[300px] flex flex-col items-center justify-center text-slate-400",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"pie_chart"}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Distribucin de Gastos (Prximamente)"})]})]})]})})]})]})},pN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(!1),[f,x]=v.useState(!1),[m,p]=v.useState({name:"",taxId:"",contactInfo:"",paymentTermsDays:0});v.useEffect(()=>{b()},[]);const b=async()=>{try{d(!0);const _=await da.getSuppliers();i(_)}catch(_){console.error(_)}finally{d(!1)}},N=async _=>{_.preventDefault();try{if(!m.name)return;await da.createSupplier(m),x(!1),p({name:"",taxId:"",contactInfo:"",paymentTermsDays:0}),b()}catch(S){console.error(S),alert("Error al guardar proveedor")}},j=async(_,S)=>{if(window.confirm(`Ests seguro de eliminar al proveedor "${S}"?`))try{await da.deleteSupplier(_),b()}catch(E){console.error(E),alert("Error al eliminar proveedor")}};return r.jsxs("div",{className:"h-screen flex overflow-hidden bg-slate-50 dark:bg-slate-900",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsxs("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-6 flex justify-between items-center sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"local_shipping"}),r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Proveedores"})]}),r.jsxs("button",{onClick:()=>x(!0),className:"bg-primary text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:[r.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Nuevo Proveedor"]})]}),r.jsx("div",{className:"p-6",children:c?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(_=>r.jsxs("div",{className:"relative bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:border-primary/50 transition-colors",children:[r.jsx("button",{onClick:S=>{S.stopPropagation(),j(_.id,_.name)},className:"absolute top-4 right-4 text-slate-400 hover:text-red-500 transition-colors p-2",title:"Eliminar Proveedor",children:r.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),r.jsxs("div",{className:"flex justify-between items-start mb-4 pr-8",children:[r.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-xl",children:r.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"store"})}),r.jsxs("span",{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider",children:[_.paymentTermsDays," Das Crdito"]})]}),r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-1",children:_.name}),r.jsx("p",{className:"text-sm text-slate-500 font-bold mb-4",children:_.taxId||"Sin RFC"}),r.jsxs("div",{className:"space-y-2 border-t border-slate-100 dark:border-slate-700 pt-4",children:[_.contactName&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-medium",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"}),_.contactName]}),_.contactPhone&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-medium",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"call"}),_.contactPhone]}),_.contactEmail&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-medium",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"email"}),_.contactEmail]}),!_.contactName&&!_.contactPhone&&!_.contactEmail&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-xs font-medium",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"contact_phone"}),_.contactInfo||"Sin contacto"]})]})]},_.id))})}),f&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md p-6 shadow-2xl animate-in zoom-in-95",children:[r.jsx("h2",{className:"text-xl font-black mb-6",children:"Registrar Proveedor"}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Razn Social"}),r.jsx("input",{autoFocus:!0,className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:m.name,onChange:_=>p({...m,name:_.target.value}),placeholder:"Ej. Distribuidora de Pinturas S.A."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"RFC"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:m.taxId,onChange:_=>p({...m,taxId:_.target.value}),placeholder:"XAXX010101000"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Das Crdito"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:m.paymentTermsDays,onChange:_=>p({...m,paymentTermsDays:parseInt(_.target.value)||0})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Datos de Contacto"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-1",children:[r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-medium text-sm",value:m.contactName,onChange:_=>p({...m,contactName:_.target.value}),placeholder:"Nombre de contacto"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-medium text-sm",value:m.contactPhone,onChange:_=>p({...m,contactPhone:_.target.value}),placeholder:"Telfono"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-medium text-sm",value:m.contactEmail,onChange:_=>p({...m,contactEmail:_.target.value}),placeholder:"Correo electrnico"})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 font-bold rounded-xl text-slate-500 hover:bg-slate-200",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl hover:opacity-90",children:"Guardar"})]})]})]})})]})]})},xN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState([]),[f,x]=v.useState(!1),[m,p]=v.useState(!1),[b,N]=v.useState(""),[j,_]=v.useState(""),[S,E]=v.useState(""),[C,U]=v.useState(new Date().toISOString().split("T")[0]);v.useEffect(()=>{R()},[]);const R=async()=>{try{x(!0);const[T,V]=await Promise.all([da.getInvoices(),da.getSuppliers()]);i(T),d(V)}catch(T){console.error(T)}finally{x(!1)}},A=async T=>{if(T.preventDefault(),!b||!S||!j)return;const V=c.find(me=>me.id===b),q=(V==null?void 0:V.paymentTermsDays)||0,re=new Date(new Date(C).getTime()+q*24*60*60*1e3).toISOString().split("T")[0];try{await da.createInvoice({supplierId:b,invoiceFolio:j,amount:parseFloat(S),issueDate:C,dueDate:re}),p(!1),_(""),E(""),R()}catch(me){console.error(me),alert("Error al registrar factura")}},$=async(T,V)=>{try{await da.updateInvoiceStatus(T,V),R()}catch(q){console.error(q)}},Y=T=>{switch(T){case"received":return"bg-slate-100 text-slate-600";case"verified":return"bg-blue-100 text-blue-700";case"authorized":return"bg-purple-100 text-purple-700";case"paid":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100"}},te=T=>{switch(T){case"received":return"Recibida";case"verified":return"Verificada";case"authorized":return"Autorizada";case"paid":return"Pagada";case"rejected":return"Rechazada";default:return T}};return r.jsxs("div",{className:"h-screen flex overflow-hidden bg-slate-50 dark:bg-slate-900",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsxs("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-6 flex justify-between items-center sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"request_quote"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Cuentas por Pagar"}),r.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Gestin de Facturas de Proveedores"})]})]}),r.jsxs("button",{onClick:()=>p(!0),className:"bg-primary text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:[r.jsx("span",{className:"material-symbols-outlined",children:"upload_file"}),"Registrar Factura"]})]}),r.jsx("div",{className:"p-6",children:f?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700 text-xs font-black uppercase text-slate-400 tracking-wider",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4 pl-6",children:"Proveedor"}),r.jsx("th",{className:"p-4",children:"Folio"}),r.jsx("th",{className:"p-4",children:"Fecha Vencimiento"}),r.jsx("th",{className:"p-4",children:"Monto"}),r.jsx("th",{className:"p-4 text-center",children:"Estado"}),r.jsx("th",{className:"p-4 text-right pr-6",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[n.map(T=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[r.jsx("td",{className:"p-4 pl-6 font-bold text-slate-900 dark:text-white",children:T.supplierName}),r.jsx("td",{className:"p-4 text-sm font-mono text-slate-500",children:T.invoiceFolio}),r.jsx("td",{className:"p-4 text-sm font-bold",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-base text-slate-400",children:"event"}),T.dueDate]})}),r.jsxs("td",{className:"p-4 font-black text-slate-900 dark:text-white",children:["$",T.amount.toLocaleString()]}),r.jsx("td",{className:"p-4 text-center",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider ${Y(T.status)}`,children:te(T.status)})}),r.jsx("td",{className:"p-4 text-right pr-6",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[T.status==="received"&&r.jsx("button",{onClick:()=>$(T.id,"verified"),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-xs font-bold",title:"Verificar",children:"Verificar"}),T.status==="verified"&&r.jsx("button",{onClick:()=>$(T.id,"authorized"),className:"p-2 bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100 text-xs font-bold",title:"Autorizar",children:"Autorizar"}),T.status==="authorized"&&r.jsx("button",{onClick:()=>$(T.id,"paid"),className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 text-xs font-bold",title:"Pagada",children:"Pagar"})]})})]},T.id)),n.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-400 font-bold uppercase tracking-widest text-xs",children:"No hay facturas pendientes"})})]})]})})}),m&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md p-6 shadow-2xl animate-in zoom-in-95",children:[r.jsx("h2",{className:"text-xl font-black mb-6",children:"Registrar Factura"}),r.jsxs("form",{onSubmit:A,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Proveedor"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:b,onChange:T=>N(T.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar..."}),c.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Folio"}),r.jsx("input",{className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:j,onChange:T=>_(T.target.value),placeholder:"F-12345"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Monto"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:S,onChange:T=>E(T.target.value),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-black uppercase text-slate-400",children:"Fecha Emisin"}),r.jsx("input",{type:"date",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 rounded-xl border-none focus:ring-2 focus:ring-primary font-bold",value:C,onChange:T=>U(T.target.value)})]}),r.jsx("div",{className:"pt-2 text-xs text-slate-500",children:"* La fecha de vencimiento se calcular automticamente segn los das de crdito del proveedor."}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 font-bold rounded-xl text-slate-500 hover:bg-slate-200",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl hover:opacity-90",children:"Guardar"})]})]})]})})]})]})},gN=({user:s,onLogout:a})=>{const[n,i]=v.useState([]),[c,d]=v.useState(!1);v.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0);const m=await da.getLeases();i(m)}catch(m){console.error(m)}finally{d(!1)}},x=m=>{window.confirm(`Registrar pago de renta para ${m.propertyName} por $${m.monthlyAmount}?`)&&da.registerLeasePayment({leaseId:m.id,amount:m.monthlyAmount,paymentDate:new Date().toISOString().split("T")[0],notes:"Pago mensual registrado desde panel"}).then(()=>{alert("Pago registrado correctamente")}).catch(b=>{console.error(b),alert("Error al registrar pago")})};return r.jsxs("div",{className:"h-screen flex overflow-hidden bg-slate-50 dark:bg-slate-900",children:[r.jsx(dt,{user:s,onLogout:a}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsx("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-6 flex justify-between items-center sticky top-0 z-10",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"apartment"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Arrendamientos"}),r.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Contratos de Renta y Locales"})]})]})}),r.jsx("div",{className:"p-6",children:c?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(m=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:r.jsx("span",{className:"material-symbols-outlined text-9xl",children:"apartment"})}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-1",children:m.propertyName}),r.jsx("p",{className:"text-sm font-bold text-slate-500",children:m.landlordName})]}),r.jsxs("div",{className:"flex items-end justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-1",children:"Renta Mensual"}),r.jsxs("p",{className:"text-3xl font-black text-primary",children:["$",m.monthlyAmount.toLocaleString()]})]}),r.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-lg",children:r.jsxs("p",{className:"text-xs font-bold text-slate-600 dark:text-slate-400",children:["Da de Pago: ",r.jsx("span",{className:"text-slate-900 dark:text-white",children:m.paymentDay})]})})]}),r.jsxs("button",{onClick:()=>x(m),className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"payments"}),"Registrar Pago Mes Actual"]})]})]},m.id)),n.length===0&&r.jsxs("div",{className:"col-span-full py-20 text-center",children:[r.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-200 mb-4",children:"apartment"}),r.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-sm",children:"No hay contratos registrados"}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Agregue registros manualmente en la base de datos por ahora."})]})]})})]})]})},bN=()=>{const[s,a]=v.useState(null);v.useEffect(()=>{const c=localStorage.getItem("pintamax_user");if(c)try{a(JSON.parse(c))}catch(d){console.error("Failed to parse user session:",d),localStorage.removeItem("pintamax_user")}},[]);const n=c=>{a(c),localStorage.setItem("pintamax_user",JSON.stringify(c))},i=()=>{a(null),localStorage.removeItem("pintamax_user")};return r.jsx(Ty,{children:r.jsxs("div",{className:"min-h-screen",children:[r.jsxs(iy,{children:[r.jsx(Qe,{path:"/login",element:s?r.jsx(et,{to:"/",replace:!0}):r.jsx(Py,{onLogin:n})}),r.jsx(Qe,{path:"/",element:s?s.role===xe.ADMIN?r.jsx(Wj,{user:s,onLogout:i}):s.role===xe.WAREHOUSE||s.role===xe.WAREHOUSE_SUB?r.jsx(cN,{user:s,onLogout:i}):s.role===xe.FINANCE?r.jsx(Lp,{user:s,onLogout:i}):r.jsx(Ap,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/pos",element:s?r.jsx(Ap,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/finance",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.FINANCE?r.jsx(Lp,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/inventory",element:s?r.jsx(Zj,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/sales-history",element:s?r.jsx(oN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/shipping-note/:id",element:s?r.jsx(uN,{}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/users",element:(s==null?void 0:s.role)===xe.ADMIN?r.jsx(eN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/clients",element:s?r.jsx(tN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/branches",element:(s==null?void 0:s.role)===xe.ADMIN?r.jsx(aN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/quotations",element:s?r.jsx(sN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/returns",element:s?r.jsx(rN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/supplies",element:s?r.jsx(nN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/packaging",element:s?r.jsx(iN,{user:s,onLogout:i}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/wholesale-pos",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.WAREHOUSE||(s==null?void 0:s.role)===xe.WAREHOUSE_SUB?r.jsx(dN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/wholesale-history",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.WAREHOUSE||(s==null?void 0:s.role)===xe.WAREHOUSE_SUB?r.jsx(hN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/wholesale-note/:id",element:s?r.jsx(fN,{}):r.jsx(et,{to:"/login",replace:!0})}),r.jsx(Qe,{path:"/finance-dashboard",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.FINANCE?r.jsx(mN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/suppliers",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.FINANCE?r.jsx(pN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/accounts-payable",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.FINANCE?r.jsx(xN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"/leases",element:(s==null?void 0:s.role)===xe.ADMIN||(s==null?void 0:s.role)===xe.FINANCE?r.jsx(gN,{user:s,onLogout:i}):r.jsx(et,{to:"/",replace:!0})}),r.jsx(Qe,{path:"*",element:r.jsx(et,{to:"/",replace:!0})})]}),s&&r.jsx(lN,{})]})})},Qx=document.getElementById("root");if(!Qx)throw new Error("Could not find root element to mount to");const yN=bb.createRoot(Qx);yN.render(r.jsx(ja.StrictMode,{children:r.jsx(bN,{})}));
